(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var r=n("uXP2"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:"[DEFAULT]",optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(s){if(n)return null;throw s}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService("[DEFAULT]")}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.e)(o.value,2),a=s[1],u=this.normalizeInstanceIdentifier(s[0]);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,(function(){var t;return Object(r.d)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return"[DEFAULT]"===t?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t}(),a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("ZUHj"),i=n("l7GE"),o=n("51Dv"),s=n("lJxs"),a=n("Cfvw");function u(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(u((n,r)=>Object(a.a)(t(n,r)).pipe(Object(s.a)((t,i)=>e(n,t,r,i))),n)):("number"==typeof e&&(n=e),e=>e.lift(new c(t,n)))}class c{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new l(t,this.project,this.concurrent))}}class l extends i.a{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e,t,n)}_innerSub(t,e,n){const i=new o.a(this,e,n),s=this.destination;s.add(i);const a=Object(r.a)(this,t,void 0,void 0,i);a!==i&&s.add(a)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t,e,n,r,i){this.destination.next(e)}notifyComplete(t){const e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"51Dv":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("uXP2"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),l=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new s.b("@firebase/database"),p=(e=1,function(){return e++}),g=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=y.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},v=null,m=!0,b=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(d.logLevel=s.a.VERBOSE,v=d.log.bind(d),e&&f.set("logging_enabled",!0)):"function"==typeof t?v=t:(v=null,f.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===m&&(m=!1,null===v&&!0===f.get("logging_enabled")&&b(!0)),v){var n=y.apply(null,t);v(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(i.f)([t],e))}},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(i.f)(t));d.error(n)},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(i.f)(t));throw d.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(i.f)(t));d.warn(n)},S=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",I="[MAX_NAME]",x=function(t,e){if(t===e)return 0;if(t===T||e===I)return-1;if(e===T||t===I)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},j=function(t,e){return t===e?0:t<e?-1:1},A=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},N=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=N(t[e[i]]);return r+"}"},k=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function P(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var R=function(t){var e,n,r,i,s;Object(o.e)(!S(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},D=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(D.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},M=function(t){try{t()}catch(e){setTimeout((function(){throw C("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},F=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},U=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function V(){return new U("")}function q(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function H(t){return t.pieces_.length-t.pieceNum_}function B(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new U(t.pieces_,e)}function z(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function G(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function W(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function Q(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new U(e,0)}function K(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof U)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new U(n,0)}function $(t){return t.pieceNum_>=t.pieces_.length}function Y(t,e){var n=q(t),r=q(e);if(null===n)return e;if(n===r)return Y(B(t),B(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function X(t,e){for(var n=W(t,0),r=W(e,0),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Z(t,e){if(H(t)!==H(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function J(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(H(t)>H(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var tt,et,nt,rt,it,ot,st,at,ut,ct=function(){function t(t,e){this.errorPrefix_=e,this.parts_=W(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),lt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ht=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=h.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&h.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if("long_polling"!==t)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return P(e,(function(t,e){r.push(t+"="+e)})),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}(),ft=function(t,e){var n=dt(t),r=n.namespace;return"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new ht(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new U(n.pathString)}},dt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in d&&(s=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},pt=/[\[\].#$\/\u0000-\u001F\u007F]/,gt=/[\[\].#$\u0000-\u001F\u007F]/,yt=function(t){return"string"==typeof t&&0!==t.length&&!pt.test(t)},vt=function(t){return"string"==typeof t&&0!==t.length&&!gt.test(t)},mt=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!S(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},bt=function(t,e,n,r,i){i&&void 0===n||_t(Object(o.m)(t,e,i),n,r)},_t=function(t,e,n){var r=n instanceof U?new ct(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(S(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>10485760/3&&Object(o.E)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(P(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!yt(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),_t(t,n,r),r.pop()})),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},wt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];P(n,(function(t,e){var n=new U(t);if(_t(s,e,K(r,n)),".priority"===z(n)&&!mt(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=W(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!yt(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&J(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},Ot=function(t,e,n,r){if(!r||void 0!==n){if(S(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mt(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Et=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ct=function(t,e,n,r){if(!(r&&void 0===n||yt(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},St=function(t,e,n,r){if(!(r&&void 0===n||vt(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Tt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),St(t,e,n,r)},It=function(t,e){if(".info"===q(e))throw new Error(t+" failed = Can't modify data under /.info/")},xt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!yt(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vt(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},jt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},At=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),It("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),It("OnDisconnect.set",this.path_),bt("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),It("OnDisconnect.setWithPriority",this.path_),bt("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ot("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),It("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),Nt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),kt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Pt=(tt=0,et=[],function(t){var e,n=t===tt;tt=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=kt.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===et[e];e--)et[e]=0;et[e]++}else for(e=0;e<12;e++)et[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=kt.charAt(et[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),Rt=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return I;var o=kt.charAt(kt.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},Dt=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=kt.charAt(kt.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},Lt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Mt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Lt(T,t),r=new Lt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Lt.MIN},t}(),Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return nt},set:function(t){nt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return x(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Lt.MIN},e.prototype.maxPost=function(){return new Lt(I,nt)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Lt(t,nt)},e.prototype.toString=function(){return".key"},e}(Mt),Ut=new Ft,Vt=function(t){return"number"==typeof t?"number:"+R(t):"string:"+t},qt=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===rt||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ht=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return it},set:function(t){it=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return $(e)?this:".priority"===q(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=q(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===H(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(B(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Vt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?R(this.value_):this.value_,this.lazyHash_=g(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Bt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Lt.MIN},e.prototype.maxPost=function(){return new Lt(I,new Ht("[PRIORITY-POST]",st))},e.prototype.makePost=function(t,e){var n=ot(t);return new Lt(e,new Ht("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Mt)),zt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Gt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Qt.EMPTY_NODE,this.right=null!=o?o:Qt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Qt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Qt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Wt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Gt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Qt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Gt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new zt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new zt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new zt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Wt,t}(),Kt=Math.log(2),$t=function(){function t(t){this.count=parseInt(Math.log(t+1)/Kt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Yt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Gt(s,o.node,Gt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Gt(s,o.node,Gt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Gt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Gt.BLACK):(a(h,Gt.BLACK),a(h,Gt.RED))}return o}(new $t(t.length));return new Qt(r||e,o)},Xt={},Zt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Xt&&Bt,"ChildrenNode.ts has not been loaded"),at=at||new t({".priority":Xt},{".priority":Bt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Qt?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==Ut,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Lt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Yt(s,e.getCompare()):Xt;var l=e.toString(),h=Object(i.a)({},this.indexSet_);h[l]=e;var f=Object(i.a)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,(function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Xt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Lt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Yt(a,s.getCompare())}return Xt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new Lt(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,(function(t){if(t===Xt)return t;var r=n.get(e.name);return r?t.remove(new Lt(e.name,r)):t})),this.indexSet_)},t}();function Jt(t,e){return x(t.name,e.name)}function te(t,e){return x(t,e)}var ee=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qt(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return ut||(ut=new t(new Qt(te),null,Zt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||ut},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?ut:e},t.prototype.getChild=function(t){var e=q(t);return null===e?this:this.getImmediateChild(e).getChild(B(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Lt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?ut:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=q(t);if(null===n)return e;Object(o.e)(".priority"!==q(t)||1===H(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(B(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Bt,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Vt(this.getPriority().val())+":"),this.forEachChild(Bt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":g(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Lt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Lt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Lt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Lt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Lt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ne?-1:0},t.prototype.withIndex=function(e){if(e===Ut||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Ut||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Bt),r=e.getIterator(Bt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Ut?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ne=new(function(t){function e(){return t.call(this,new Qt(te),ee.EMPTY_NODE,Zt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ee.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ee));function re(t,e){if(void 0===e&&(e=null),null===t)return ee.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Ht(t,re(e));if(t instanceof Array){var n=ee.EMPTY_NODE;return P(t,(function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=re(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(re(e))}var r=[],i=!1;if(P(t,(function(t,e){if("."!==t.substring(0,1)){var n=re(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Lt(t,n)))}})),0===r.length)return ee.EMPTY_NODE;var s=Yt(r,Jt,(function(t){return t.name}),te);if(i){var a=Yt(r,Bt.getCompare());return new ee(s,re(e),new Zt({".priority":a},{".priority":Bt}))}return new ee(s,re(e),Zt.Default)}Object.defineProperties(Lt,{MIN:{value:new Lt(T,ee.EMPTY_NODE)},MAX:{value:new Lt(I,ne)}}),Ft.__EMPTY_NODE=ee.EMPTY_NODE,Ht.__childrenNodeConstructor=ee,rt=ne,function(t){st=t}(ne),function(t){ot=t}(re);var ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?x(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Lt.MIN},e.prototype.maxPost=function(){return Lt.MAX},e.prototype.makePost=function(t,e){var n=re(t);return new Lt(e,n)},e.prototype.toString=function(){return".value"},e}(Mt)),oe=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!$(e)&&".priority"!==q(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?x(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=re(t),r=ee.EMPTY_NODE.updateChild(this.indexPath_,n);return new Lt(e,r)},e.prototype.maxPost=function(){var t=ee.EMPTY_NODE.updateChild(this.indexPath_,ne);return new Lt(I,t)},e.prototype.toString=function(){return W(this.indexPath_,0).join("/")},e}(Mt),se=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),St("DataSnapshot.child",1,e,!1);var n=new U(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Bt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),St("DataSnapshot.hasChild",1,t,!1);var e=new U(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return e(new t(i,n.ref_.child(r),Bt))}))},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),ae=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),ue=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ce=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ae("value",this,new se(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),le=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new ue(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new ae(t.type,this,new se(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every((function(t){return e.callbacks_[t]===n.callbacks_[t]}))}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}();function he(t){return{type:"value",snapshotNode:t}}function fe(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function de(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function pe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ge,ye=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(de(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(fe(e,n)):s.trackChildChange(pe(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Bt,(function(t,r){e.hasChild(t)||n.trackChildChange(de(t,r))})),e.isLeafNode()||e.forEachChild(Bt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(pe(e,r,i))}else n.trackChildChange(fe(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ee.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ve=function(){function t(e){this.indexedFilter_=new ye(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Lt(e,n))||(n=ee.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ee.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ee.EMPTY_NODE);var i=this;return e.forEachChild(Bt,(function(t,e){i.matches(new Lt(t,e))||(r=r.updateImmediateChild(t,ee.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),me=function(){function t(t){this.rangedFilter_=new ve(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Lt(e,n))||(n=ee.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ee.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ee.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ee.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ee.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new Lt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(pe(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(de(e,f));var g=u.updateImmediateChild(e,ee.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(fe(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=i&&(i.trackChildChange(de(l.name,l.node)),i.trackChildChange(fe(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,ee.EMPTY_NODE)):t},t}(),be=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Bt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:I},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Bt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function _e(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}function we(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}function Oe(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Ee(t,e,n){var r;return t.index_===Ut?("string"==typeof e&&(e=Rt(e)),r=Oe(t,e,n)):r=Oe(t,e,null==n?I:Rt(n)),r.startAfterSet_=!0,r}function Ce(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Se(t,e,n){var r;return t.index_===Ut?("string"==typeof e&&(e=Dt(e)),r=Ce(t,e,n)):r=Ce(t,e,null==n?T:Dt(n)),r.endBeforeSet_=!0,r}function Te(t,e){var n=t.copy();return n.index_=e,n}function Ie(t){var e,n={};return t.isDefault()||(t.index_===Bt?e="$priority":t.index_===ie?e="$value":t.index_===Ut?e="$key":(Object(o.e)(t.index_ instanceof oe,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.G)(e),t.startSet_&&(n.startAt=Object(o.G)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.G)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.G)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.G)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var xe=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(ge,"Reference.ts has not been loaded"),ge},set:function(t){ge=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ut){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==I)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Bt){if(null!=e&&!mt(e)||null!=n&&!mt(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof oe||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),Et("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new ce(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new le(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),Et("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new ce(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new le(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),Et("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function(t){u&&(u=!1,s.off(e,l),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,l,(function(t){s.off(e,l),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)})),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,_e(this.queryParams_,e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,we(this.queryParams_,e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');St("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new U(e);if($(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new oe(n),i=Te(this.queryParams_,r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=Te(this.queryParams_,Ut);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=Te(this.queryParams_,Bt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=Te(this.queryParams_,ie);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),bt("Query.startAt",1,e,this.path,!0),Ct("Query.startAt",2,n,!0);var r=Oe(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.startAfter=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAfter",0,2,arguments.length),bt("Query.startAfter",1,e,this.path,!1),Ct("Query.startAfter",2,n,!0);var r=Ee(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),bt("Query.endAt",1,e,this.path,!0),Ct("Query.endAt",2,n,!0);var r=Ce(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endBefore=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endBefore",0,2,arguments.length),bt("Query.endBefore",1,e,this.path,!1),Ct("Query.endBefore",2,n,!0);var r=Se(this.queryParams_,e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),bt("Query.equalTo",1,t,this.path,!1),Ct("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+G(this.path)},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return function(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Bt&&(e.i=t.index_.toString()),e}(this.queryParams_)},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=N(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=Z(this.path,e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),je=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),Ae=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=K(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),Ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?ke(t[".sv"],e,n):"object"==typeof t[".sv"]?Pe(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},ke=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},Pe=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},Re=function(t,e,n,r){return Le(e,new Ae(n,t),r)},De=function(t,e,n){return Le(t,new je(e),n)};function Le(t,e,n){var r,i=t.getPriority().val(),o=Ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Ht(a,re(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Ht(o))),u.forEachChild(Bt,(function(t,i){var o=Le(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var Me=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!$(t)&&this.children.size>0){var e=q(t);return t=B(t),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if($(e))this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=q(e);this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=B(e),i.remember(e,n)}},t.prototype.forget=function(t){if($(t))return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Bt,(function(t,e){n.remember(new U(t),e)})),this.forget(t)}if(this.children.size>0){var r=q(t);return t=B(t),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild((function(n,r){var i=new U(t.toString()+"/"+n);r.forEachTree(i,e)}))},t.prototype.forEachChild=function(t){this.children.forEach((function(e,n){t(n,e)}))},t}(),Fe=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ue(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Ve,qe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Fe.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if($(this.path)){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new U(e));return new t(V(),n,this.revert)}return Object(o.e)(q(this.path)===e,"operationForChild called for unrelated child."),new t(B(this.path),this.affectedTree,this.revert)},t}(),He=function(){function t(t,e){void 0===e&&(Ve||(Ve=new Qt(j)),e=Ve),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return P(e,(function(t,e){n=n.set(new U(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:V(),value:this.value};if($(t))return null;var n=q(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(B(t),e);return null!=i?{path:K(new U(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if($(e))return this;var n=q(e),r=this.children.get(n);return null!==r?r.subtree(B(e)):new t(null)},t.prototype.set=function(e,n){if($(e))return new t(n,this.children);var r=q(e),i=(this.children.get(r)||new t(null)).set(B(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if($(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=q(e),r=this.children.get(n);if(r){var i=r.remove(B(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if($(t))return this.value;var e=q(t),n=this.children.get(e);return n?n.get(B(t)):null},t.prototype.setTree=function(e,n){if($(e))return n;var r,i=q(e),o=(this.children.get(i)||new t(null)).setTree(B(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(V(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(K(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,V(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if($(t))return null;var i=q(t),o=this.children.get(i);return o?o.findOnPath_(B(t),K(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,V(),e)},t.prototype.foreachOnPath_=function(e,n,r){if($(e))return this;this.value&&r(n,this.value);var i=q(e),o=this.children.get(i);return o?o.foreachOnPath_(B(e),K(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(V(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(K(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Be=function(){function t(t,e){this.source=t,this.path=e,this.type=Fe.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V()):new t(this.source,B(this.path))},t}(),ze=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Fe.OVERWRITE}return t.prototype.operationForChild=function(e){return $(this.path)?new t(this.source,V(),this.snap.getImmediateChild(e)):new t(this.source,B(this.path),this.snap)},t}(),Ge=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Fe.MERGE}return t.prototype.operationForChild=function(e){if($(this.path)){var n=this.children.subtree(new U(e));return n.isEmpty()?null:n.value?new ze(this.source,V(),n.value):new t(this.source,V(),n)}return Object(o.e)(q(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,B(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),We=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if($(t))return this.isFullyInitialized()&&!this.filtered_;var e=q(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Qe=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new We(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new We(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t}(),Ke=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,pe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,de(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,fe(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,pe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),$e=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ye=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new We(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Xe=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Ze=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new Ke;if(n.type===Fe.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!$(c.path),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===Fe.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(e,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,l.path,l.children,r,i,a,u))}else if(n.type===Fe.ACK_USER_WRITE){var h=n;s=h.revert?this.revertUserWrite_(e,h.path,r,i,u):this.ackUserWrite_(e,h.path,h.affectedTree,r,i,u)}else{if(n.type!==Fe.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var f=u.getChanges();return t.maybeAddValueEvent_(e,s,f),new Xe(s,f)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(he(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if($(e))if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),l=n.calcCompleteEventChildren(c instanceof ee?c:ee.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var f=q(e);if(".priority"===f){Object(o.e)(1===H(e),"Can't have a priority with additional path components");var d=s.getNode();u=t.getServerCache().getNode();var p=n.calcEventCacheAfterServerOverwrite(e,d,u);a=null!=p?this.filter_.updatePriority(d,p):s.getNode()}else{var g=B(e),y=void 0;if(s.isCompleteForChild(f)){u=t.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);y=null!=v?s.getNode().getImmediateChild(f).updateChild(g,v):s.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());a=null!=y?this.filter_.updateChild(s.getNode(),f,y,g,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||$(e),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if($(e))a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),l,null)}else{var h=q(e);if(!u.isCompleteForPath(e)&&H(e)>1)return t;var f=B(e),d=u.getNode().getImmediateChild(h).updateChild(f,n);a=".priority"===h?c.updatePriority(u.getNode(),d):c.updateChild(u.getNode(),h,d,f,$e,null)}var p=t.updateServerSnap(a,u.isFullyInitialized()||$(e),c.filtersNodes()),g=new Ye(r,p,i);return this.generateEventCacheAfterServerEvent_(p,e,r,g,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ye(r,t,i);if($(e))a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=q(e);if(".priority"===l)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var h=B(e),f=u.getNode().getImmediateChild(l),d=void 0;if($(h))d=n;else{var p=c.getCompleteChild(l);d=null!=p?".priority"===z(h)&&p.getChild(Q(h)).isEmpty()?p:p.updateChild(h,n):ee.EMPTY_NODE}if(f.equals(d))s=t;else{var g=this.filter_.updateChild(u.getNode(),l,d,h,c,o);s=t.updateEventSnap(g,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach((function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))&&(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),r.foreach((function(r,c){var l=K(n,r);t.cacheHasChild_(e,q(l))||(u=a.applyUserOverwrite_(u,l,c,i,o,s))})),u},t.prototype.applyMerge_=function(t,e){return e.foreach((function(e,n){t=t.updateChild(e,n)})),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=$(e)?n:new He(null).setTree(e,n);var l=t.getServerCache().getNode();return u.children.inorderTraversal((function(e,n){if(l.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new U(e),h,r,i,o,s)}})),u.children.inorderTraversal((function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!l.hasChild(e)&&!u){var h=t.getServerCache().getNode().getImmediateChild(e),f=a.applyMerge_(h,n);c=a.applyServerOverwrite_(c,new U(e),f,r,i,o,s)}})),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if($(e)&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if($(e)){var u=new He(null);return a.getNode().forEachChild(Ut,(function(t,e){u=u.set(new U(t),e)})),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=new He(null);return n.foreach((function(t,n){var r=K(e,t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))})),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||$(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,$e,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ye(n,t,r),u=t.getEventCache().getNode(),c=void 0;if($(e)||".priority"===q(e)){var l=void 0;if(t.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();Object(o.e)(h instanceof ee,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(h)}c=this.filter_.updateFullNode(u,l=l,i)}else{var f=q(e),d=n.calcCompleteChild(f,t.getServerCache());null==d&&t.getServerCache().isCompleteForChild(f)&&(d=u.getImmediateChild(f)),(c=null!=d?this.filter_.updateChild(u,f,d,B(e),a,i):t.getEventCache().getNode().hasChild(f)?this.filter_.updateChild(u,f,ee.EMPTY_NODE,B(e),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(V()),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Je=function(){return function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}}();function tn(t,e,n,r,i,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.f)("Should only compare child_ events.");var r=new Lt(e.childName,e.snapshotNode),i=new Lt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}var en,nn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new ye(r.getIndex()),o=(n=r).loadsAllData()?new ye(n.getIndex()):n.hasLimit()?new me(n):new ve(n);this.processor_=new Ze(o);var s=e.getServerCache(),a=e.getEventCache(),u=i.updateFullNode(ee.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ee.EMPTY_NODE,a.getNode(),null),l=new We(u,s.isFullyInitialized(),i.filtersNodes()),h=new We(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=new Qe(h,l),this.eventGenerator_=new Je(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!$(t)&&!e.getImmediateChild(q(t)).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach((function(t){var i=t.createCancelEvent(e,r);i&&n.push(i)}))}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===Fe.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Bt,(function(t,e){n.push(fe(t,e))})),e.isFullyInitialized()&&n.push(he(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),tn(t,i,"child_removed",e,r,n),tn(t,i,"child_added",e,r,n),tn(t,i,"child_moved",o,r,n),tn(t,i,"child_changed",e,r,n),tn(t,i,"value",e,r,n),i}(this.eventGenerator_,t,e,n?[n]:this.eventRegistrations_)},t}(),rn=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(en,"Reference.ts has not been loaded"),en},set:function(t){Object(o.e)(!en,"__referenceConstructor has already been defined"),en=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var l=Object(i.h)(this.views.values()),h=l.next();!h.done;h=l.next())c=c.concat((u=h.value).applyOperation(t,e,n))}catch(f){r={error:f}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(r)throw r.error}}return c},t.prototype.getView=function(t,e,n,r){var i=t.queryIdentifier(),o=this.views.get(i);if(!o){var s=e.calcCompleteEventCache(r?n:null),a=!1;s?a=!0:n instanceof ee?(s=e.calcCompleteEventChildren(n),a=!1):(s=ee.EMPTY_NODE,a=!1);var u=new Qe(new We(s,a,!1),new We(n,r,!1));return new nn(t,u)}return o},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=this.getView(t,n,r,i);return this.views.has(t.queryIdentifier())||this.views.set(t.queryIdentifier(),o),o.addEventRegistration(e),o.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],l=this.hasCompleteView();if("default"===a)try{for(var h=Object(i.h)(this.views.entries()),f=h.next();!f.done;f=h.next()){var d,p=Object(i.e)(f.value,2),g=p[0];c=c.concat((d=p[1]).removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(g),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery()))}}catch(y){o={error:y}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}else(d=this.views.get(a))&&(c=c.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(this.views.delete(a),d.getQuery().getQueryParams().loadsAllData()||u.push(d.getQuery())));return l&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),on=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new He(null))},t}();function sn(t,e,n){if($(e))return new on(new He(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Y(i,e);return o=o.updateChild(s,n),new on(t.writeTree_.set(i,o))}var a=new He(n),u=t.writeTree_.setTree(e,a);return new on(u)}function an(t,e,n){var r=t;return P(n,(function(t,n){r=sn(r,K(e,t),n)})),r}function un(t,e){if($(e))return on.empty();var n=t.writeTree_.setTree(e,new He(null));return new on(n)}function cn(t,e){return null!=ln(t,e)}function ln(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Y(n.path,e)):null}function hn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Bt,(function(t,n){e.push(new Lt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Lt(t,n.value))})),e}function fn(t,e){if($(e))return t;var n=ln(t,e);return new on(null!=n?new He(n):t.writeTree_.subtree(e))}function dn(t){return t.writeTree_.isEmpty()}function pn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,s){".priority"===n?(Object(o.e)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):r=t(K(e,n),s,r)})),r.getChild(e).isEmpty()||null===i||(r=r.updateChild(K(e,".priority"),i)),r}(V(),t.writeTree_,e)}var gn=function(){function t(){this.visibleWrites_=on.empty(),this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new yn(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=sn(this.visibleWrites_,t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=an(this.visibleWrites_,t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex((function(e){return e.writeId===t}));Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:J(r.path,u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=un(this.visibleWrites_,r.path):P(r.children,(function(t){e.visibleWrites_=un(e.visibleWrites_,K(r.path,t))})),!0))},t.prototype.getCompleteWriteData=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=fn(this.visibleWrites_,e);return!i&&dn(o)?n:i||null!=n||cn(o,V())?pn(t.layerTree_(this.allWrites_,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(J(t.path,e)||J(e,t.path))}),e),n||ee.EMPTY_NODE):null}var s=ln(this.visibleWrites_,e);if(null!=s)return s;var a=fn(this.visibleWrites_,e);return dn(a)?n:null!=n||cn(a,V())?pn(a,n||ee.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=ee.EMPTY_NODE,r=ln(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Bt,(function(t,e){n=n.updateImmediateChild(t,e)})),n;if(e){var i=fn(this.visibleWrites_,t);return e.forEachChild(Bt,(function(t,e){var r=pn(fn(i,new U(t)),e);n=n.updateImmediateChild(t,r)})),hn(i).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n}return hn(fn(this.visibleWrites_,t)).forEach((function(t){n=n.updateImmediateChild(t.name,t.node)})),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=K(t,e);if(cn(this.visibleWrites_,i))return null;var s=fn(this.visibleWrites_,i);return dn(s)?r.getChild(e):pn(s,r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=K(t,e),i=ln(this.visibleWrites_,r);return null!=i?i:n.isCompleteForChild(e)?pn(fn(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return ln(this.visibleWrites_,t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=fn(this.visibleWrites_,t),u=ln(a,V());if(null!=u)s=u;else{if(null==e)return[];s=pn(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return J(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&J(K(t.path,n),e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,V()),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=on.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)J(n,a)?r=sn(r,u=Y(n,a),s.snap):J(a,n)&&(u=Y(a,n),r=sn(r,V(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(J(n,a))r=an(r,u=Y(n,a),s.children);else if(J(a,n))if($(u=Y(a,n)))r=an(r,V(),s.children);else{var c=Object(o.D)(s.children,q(u));if(c){var l=c.getChild(B(u));r=sn(r,V(),l)}}}}}return r},t}(),yn=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(K(this.treePath_,t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(K(this.treePath_,e),this.writeTree_)},t}(),vn=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=new He(null),this.pendingWriteTree_=new gn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ze({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=He.fromObject(e);return this.applyOperationToSyncPoints_(new Ge({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new He(null);return null!=n.snap?r=r.set(V(),!0):P(n.children,(function(t){r=r.set(new U(t),!0)})),this.applyOperationToSyncPoints_(new qe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))},t.prototype.applyServerMerge=function(t,e){var n=He.fromObject(e);return this.applyOperationToSyncPoints_(new Ge({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Be({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=new ze(Ue(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=Y(s,e),c=He.fromObject(n),l=new Ge(Ue(a),u,c);return this.applyTaggedOperation_(s,l)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=Y(o,e),u=new Be(Ue(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Y(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()}));var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(V())):(u=new rn,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=ee.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=e.getCompleteServerCache(V());n&&(i=i.updateImmediateChild(t,n))})));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var l=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=t.getNextQueryTag_();this.queryToTagMap.set(l,h),this.tagToQueryMap.set(h,l)}var f=this.pendingWriteTree_.childWrites(r),d=u.addEventRegistration(e,n,f,i,a);if(!c&&!s){var p=u.viewForQuery(e);d=d.concat(this.setupListener_(e,p))}return d},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var l=-1!==c.findIndex((function(t){return t.getQueryParams().loadsAllData()})),h=this.syncPointTree_.findOnPath(o,(function(t,e){return e.hasCompleteView()}));if(l&&!h){var f=this.syncPointTree_.subtree(o);if(!f.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(f),p=0;p<d.length;++p){var g=d[p],y=g.getQuery(),v=this.createListenerForView_(g);this.listenProvider_.startListening(t.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}!h&&c.length>0&&!r&&(l?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach((function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)}))),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,(function(e,n){var r=Y(e,t),i=n.getCompleteServerCache(r);if(i)return i}));return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.getServerValue=function(t){var e=t.path,n=null;this.syncPointTree_.foreachOnPath(e,(function(t,r){var i=Y(t,e);n=n||r.getCompleteServerCache(i)}));var r=this.syncPointTree_.get(e);r?n=n||r.getCompleteServerCache(V()):(r=new rn,this.syncPointTree_=this.syncPointTree_.set(e,r));var i=null!=n,o=i?new We(n,!0,!1):null,s=this.pendingWriteTree_.childWrites(t.path);return r.getView(t,s,i?o.getNode():ee.EMPTY_NODE,i).getCompleteNode()},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold((function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),P(n,(function(t,e){r=r.concat(e)})),r}))},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!$(t)&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map((function(t){return t.getQuery()})))),P(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];this.listenProvider_.stopListening(t.queryForListening_(h),this.tagForQuery_(h))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||ee.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new U(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(V()))},t.prototype.applyOperationHelper_=function(t,e,n,r){if($(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(V());null==n&&null!=i&&(n=i.getCompleteServerCache(V()));var o=[],s=q(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,l))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(V());null==n&&null!=o&&(n=o.getCompleteServerCache(V()));var s=[];return e.children.inorderTraversal((function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))})),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),mn=function(){function t(){this.rootNode_=ee.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),bn=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),_n=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new bn),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),wn=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&P(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),On=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new wn(t);var n=1e4+2e4*Math.random();F(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;P(e,(function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),F(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),En=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Cn(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Z(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Sn(t,e,n){Cn(t,n),In(t,(function(t){return Z(t,e)}))}function Tn(t,e,n){Cn(t,n),In(t,(function(t){return J(t,e)||J(e,t)}))}function In(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(xn(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function xn(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();v&&_("event: "+n.toString()),M(r)}}}var jn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),An=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(jn),Nn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(jn),kn=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&M((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Pn=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=_n.getCollection(e),this.urlFn=function(t){return e.connectionURL("long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new kn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Rn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===o)n.id=s,n.password=a;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=k(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Rn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),Dn="";function Ln(t){Dn=t}var Mn=null;"undefined"!=typeof MozWebSocket?Mn=MozWebSocket:"undefined"!=typeof WebSocket&&(Mn=WebSocket);var Fn=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=_n.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.hostname&&lt.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Dn+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new Mn(this.connURL,[],r)}else this.mySock=new Mn(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Mn&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=k(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Un=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[Pn,Fn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Fn&&Fn.isAvailable(),s=o&&!Fn.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Fn];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Vn=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Un(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=F((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=A("t",t),n=A("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=A("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?O("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),F((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):F((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),qn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Hn=function(t){function e(n,r,i,s,a,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),An.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Nn.getInstance().on("online",l.onOnline_,l),l}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):O("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(t){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(t)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(t){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,l=new Vn(s,a.repoInfo_,a.applicationId_,n,r,i,(function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")}),u))})).then(null,(function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),h())}))}},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return N(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new U(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Dn.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Nn.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(qn),Bn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Ie(t.getQueryParams());this.restRequest_(a+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Ie(t.getQueryParams()),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()}))},e}(qn),zn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),Gn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new zn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof U?e:new U(e),r=this,i=q(n);null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new zn),i=q(n=B(n));return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;P(this.node_.children,(function(r,i){e(new t(r,n,i))}))},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild((function(e){e.forEachDescendant(t,!0,n)})),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild((function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)}))},t.prototype.path=function(){return new U(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),Wn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({}),Qn=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new En,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Me,this.transactionQueueTree_=new Gn,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=_n.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new Bn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new Hn(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),this.statsReporter_=_n.getOrCreateReporter(this.repoInfo_,(function(){return new On(t.stats_,t.server_)})),this.infoData_=new mn,this.infoSyncTree_=new vn({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new vn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Tn(t.eventQueue_,e.path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new U(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new U(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,(function(t){return re(t)}));s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=re(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,(function(t){return re(t)}));s=this.serverSyncTree_.applyServerMerge(i,c)}else{var l=re(e);s=this.serverSyncTree_.applyServerOverwrite(i,l)}var h=i;s.length>0&&(h=this.rerunTransactions_(i)),Tn(this.eventQueue_,h,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;P(t,(function(t,n){e.updateInfo_(t,n)}))},t.prototype.updateInfo_=function(t,e){var n=new U("/.info/"+t),r=re(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);Tn(this.eventQueue_,n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this,n=this.serverSyncTree_.getServerValue(t);return null!=n?Promise.resolve(new se(n,t.getRef(),t.getQueryParams().getIndex())):this.server_.get(t).then((function(n){var r=re(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return Sn(e.eventQueue_,t.path,i),Promise.resolve(new se(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return e.log_("get for query "+Object(o.G)(t)+" failed: "+n),Promise.reject(new Error(n))}))},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=re(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=De(s,a,o),c=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);Cn(this.eventQueue_,l),this.server_.put(t.toString(),s.val(!0),(function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);Tn(i.eventQueue_,t,s),i.callOnCompleteCallback(r,e,n)}));var h=this.abortTransactions_(t);this.rerunTransactions_(h),Tn(this.eventQueue_,h,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(P(e,(function(e,n){i=!1,s[e]=Re(K(t,e),re(n),r.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);Cn(this.eventQueue_,u),this.server_.merge(t.toString(),e,(function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;Tn(r.eventQueue_,u,s),r.callOnCompleteCallback(n,e,i)})),P(e,(function(e){var n=r.abortTransactions_(K(t,e));r.rerunTransactions_(n)})),Tn(this.eventQueue_,t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Me;this.onDisconnect_.forEachTree(V(),(function(r,i){var o=Re(r,i,t.serverSyncTree_,e);n.remember(r,o)}));var r=[];n.forEachTree(V(),(function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)})),this.onDisconnect_=new Me,Tn(this.eventQueue_,V(),r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)}))},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=re(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),(function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)}))},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=re(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),(function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)}))},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return _("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,(function(i,o){"ok"===i&&P(e,(function(e,n){var i=re(n);r.onDisconnect_.remember(K(t,e),i)})),r.callOnCompleteCallback(n,i,o)}))},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),Sn(this.eventQueue_,t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===q(t.path)?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),Sn(this.eventQueue_,t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt("repo_interrupt")},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume("repo_interrupt")},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new wn(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce((function(t,e){return Math.max(e.length,t)}),0);P(e,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)}))}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&M((function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}}))},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new Jn(this))},enumerable:!1,configurable:!0}),t.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new Kn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:p(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new se(a.currentInputSnapshot,new Kn(this,a.path),Bt);a.onComplete(null,!1,l)}}else{_t("transaction failed: Data returned ",c,a.path),a.status=Wn.RUN;var h=this.transactionQueueTree_.subTree(t),f=h.getValue()||[];f.push(a),h.setValue(f);var d=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(d=Object(o.D)(c,".priority"),Object(o.e)(mt(d),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):d=(this.serverSyncTree_.calcCompleteEventCache(t)||ee.EMPTY_NODE).getPriority().val();var g=this.generateServerValues(),y=re(c,d),v=De(y,u,g);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var m=this.serverSyncTree_.applyUserOverwrite(t,v,a.currentWriteId,a.applyLocally);Tn(this.eventQueue_,t,m),this.sendReadyTransactions_()}},t.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||ee.EMPTY_NODE},t.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return t.status===Wn.RUN}))&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild((function(t){e.sendReadyTransactions_(t)}))},t.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map((function(t){return t.currentWriteId})),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===Wn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=Wn.SENT,c.retryCount++;var l=Y(t,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),f=t;this.server_.put(f.toString(),h,(function(r){n.log_("transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=Wn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new Kn(n,e[s].path),c=new se(a,u,Bt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),Tn(n.eventQueue_,t,i),s=0;s<o.length;s++)M(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===Wn.SENT_NEEDS_ABORT?Wn.NEEDS_ABORT:Wn.RUN;else for(C("transaction at "+f.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=Wn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}}),a)},t.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},t.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter((function(t){return t.status===Wn.RUN})).map((function(t){return t.currentWriteId})),s=0;s<t.length;s++){var a=t[s],u=Y(e,a.path),c=!1,l=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Wn.NEEDS_ABORT)c=!0,l=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Wn.RUN)if(a.retryCount>=25)c=!0,l="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var h=this.getLatestState_(a.path,i);a.currentInputSnapshot=h;var f=t[s].update(h.val());if(void 0!==f){_t("transaction failed: Data returned ",f,a.path);var d=re(f);"object"==typeof f&&null!=f&&Object(o.i)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=a.currentWriteId,g=this.generateServerValues(),y=De(d,h,g);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(p),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(p,!0))}else c=!0,l="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(Tn(this.eventQueue_,e,r),r=[],c&&(t[s].status=Wn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===l){var v=new Kn(this,t[s].path),m=new se(t[s].currentInputSnapshot,v,Bt);n.push(t[s].onComplete.bind(null,null,!1,m))}else n.push(t[s].onComplete.bind(null,new Error(l),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)M(n[s]);this.sendReadyTransactions_()}},t.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=q(t);null!==e&&null===n.getValue();)n=n.subTree(e),e=q(t=B(t));return n},t.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort((function(t,e){return t.order-e.order})),e},t.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild((function(t){n.aggregateTransactionQueuesForNode_(t,e)}))},t.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Wn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild((function(t){e.pruneCompletedTransactionsBelowNode_(t)}))},t.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor((function(t){e.abortTransactionsOnNode_(t)})),this.abortTransactionsOnNode_(r),r.forEachDescendant((function(t){e.abortTransactionsOnNode_(t)})),n},t.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===Wn.SENT_NEEDS_ABORT||(e[s].status===Wn.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=Wn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===Wn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,Tn(this.eventQueue_,t.path(),r),s=0;s<n.length;s++)M(n[s])}},t}(),Kn=function(t){function e(e,n){if(!(e instanceof Qn))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,new be,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),$(this.path)?null:z(this.path)},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof U||(null===q(this.path)?Tt("Reference.child",1,t,!1):St("Reference.child",1,t,!1)),new e(this.repo,K(this.path,t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=Q(this.path);return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),It("Reference.set",this.path),bt("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),It("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}wt("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),It("Reference.setWithPriority",this.path),bt("Reference.setWithPriority",1,t,this.path,!1),Ot("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),It("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),It("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),jt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch((function(){}));var i=function(t,n,i){t?r.reject(t):r.resolve(new Nt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),It("Reference.setPriority",this.path),Ot("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(K(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),It("Reference.push",this.path),bt("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=Pt(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch((function(){})),s},e.prototype.onDisconnect=function(){return It("Reference.onDisconnect",this.path),new At(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(xe);xe.__referenceConstructor=Kn,rn.__referenceConstructor=Kn;var $n,Yn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then((function(t){return n.auth_=t}))}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout((function(){return t(null)}),0),this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)})))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),Xn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),Zn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return $n||($n=new t),$n},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(h){t={error:h}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new ht(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Xn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=ft(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=ft(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new Xn:new Yn(t,e);return xt("Invalid Firebase Database URL",1,s),$(s.path)||E("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||E("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Qn(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),Jn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,(function(){return Object(i.d)(this,(function(t){return this.checkDeleted_("delete"),Zn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},t instanceof Qn||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Kn(this.repo_,V())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):Zn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof Kn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=ft(t,this.repo_.repoInfo_.nodeAdmin);xt(e,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&E("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),tr=Object.freeze({__proto__:null,forceLongPolling:function(){Fn.forceDisallow(),Pn.forceAllow()},forceWebSockets:function(){Pn.forceDisallow()},isWebSocketsAvailable:function(){return Fn.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ln(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",(function(){return r}),"PRIVATE")),{instance:Zn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),er=Hn;Hn.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Hn.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var nr=Object.freeze({__proto__:null,DataConnection:er,RealTimeConnection:Vn,hijackHash:function(t){var e=Hn.prototype.put;return Hn.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Hn.prototype.put=e}},ConnectionTarget:ht,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Zn.getInstance().forceRestClient(t)}}),rr=Jn.ServerValue;!function(e){Ln(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return Zn.getInstance().databaseFromApp(n,r,e)}),"PUBLIC").setServiceProps({Reference:Kn,Query:xe,Database:Jn,DataSnapshot:se,enableLogging:b,INTERNAL:tr,ServerValue:rr,TEST_ACCESS:nr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.4"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule((function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())})))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return o}));var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",(function(){return r.a})),r.a.registerVersion("firebase","8.2.9","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",(function(){return i}));const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",(function(){return r}))},SeVD:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){const e=n.next();if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",(function(){return r}))},VRyK:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return l}));var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",(function(){return r}))},Ylt2:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},ZUHj:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("51Dv"),i=n("SeVD"),o=n("HDdC");function s(t,e,n,s,a=new r.a(t,n,s)){if(!a.closed)return e instanceof o.a?e.subscribe(a):Object(i.a)(e)(a)}},bHdf:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",(function(){return r}))},fXoL:function(t,e,n){"use strict";n.d(e,"a",(function(){return ho})),n.d(e,"b",(function(){return xa})),n.d(e,"c",(function(){return Ea})),n.d(e,"d",(function(){return wa})),n.d(e,"e",(function(){return Oa})),n.d(e,"f",(function(){return mu})),n.d(e,"g",(function(){return uu})),n.d(e,"h",(function(){return Qi})),n.d(e,"i",(function(){return Ua})),n.d(e,"j",(function(){return us})),n.d(e,"k",(function(){return Na})),n.d(e,"l",(function(){return cs})),n.d(e,"m",(function(){return yn})),n.d(e,"n",(function(){return oa})),n.d(e,"o",(function(){return W})),n.d(e,"p",(function(){return l})),n.d(e,"q",(function(){return G})),n.d(e,"r",(function(){return lo})),n.d(e,"s",(function(){return xs})),n.d(e,"t",(function(){return js})),n.d(e,"u",(function(){return Aa})),n.d(e,"v",(function(){return st})),n.d(e,"w",(function(){return lu})),n.d(e,"x",(function(){return ot})),n.d(e,"y",(function(){return ru})),n.d(e,"z",(function(){return Ha})),n.d(e,"A",(function(){return h})),n.d(e,"B",(function(){return Ia})),n.d(e,"C",(function(){return Ta})),n.d(e,"D",(function(){return ds})),n.d(e,"E",(function(){return hs})),n.d(e,"F",(function(){return fs})),n.d(e,"G",(function(){return gs})),n.d(e,"H",(function(){return ir})),n.d(e,"I",(function(){return d})),n.d(e,"J",(function(){return du})),n.d(e,"K",(function(){return Ps})),n.d(e,"L",(function(){return Ya})),n.d(e,"M",(function(){return $i})),n.d(e,"N",(function(){return vs})),n.d(e,"O",(function(){return ys})),n.d(e,"P",(function(){return Ds})),n.d(e,"Q",(function(){return pt})),n.d(e,"R",(function(){return iu})),n.d(e,"S",(function(){return Rn})),n.d(e,"T",(function(){return A})),n.d(e,"U",(function(){return Pn})),n.d(e,"V",(function(){return yu})),n.d(e,"W",(function(){return Ja})),n.d(e,"X",(function(){return ja})),n.d(e,"Y",(function(){return Yi})),n.d(e,"Z",(function(){return Xs})),n.d(e,"ab",(function(){return nr})),n.d(e,"bb",(function(){return Un})),n.d(e,"cb",(function(){return Cn})),n.d(e,"db",(function(){return Tn})),n.d(e,"eb",(function(){return An})),n.d(e,"fb",(function(){return xn})),n.d(e,"gb",(function(){return In})),n.d(e,"hb",(function(){return jn})),n.d(e,"ib",(function(){return Qs})),n.d(e,"jb",(function(){return gu})),n.d(e,"kb",(function(){return Ks})),n.d(e,"lb",(function(){return $s})),n.d(e,"mb",(function(){return Sn})),n.d(e,"nb",(function(){return M})),n.d(e,"ob",(function(){return vo})),n.d(e,"pb",(function(){return Ao})),n.d(e,"qb",(function(){return jo})),n.d(e,"rb",(function(){return Ws})),n.d(e,"sb",(function(){return zt})),n.d(e,"tb",(function(){return I})),n.d(e,"ub",(function(){return En})),n.d(e,"vb",(function(){return Qo})),n.d(e,"wb",(function(){return Ft})),n.d(e,"xb",(function(){return os})),n.d(e,"yb",(function(){return Cr})),n.d(e,"zb",(function(){return _o})),n.d(e,"Ab",(function(){return Mo})),n.d(e,"Bb",(function(){return va})),n.d(e,"Cb",(function(){return mt})),n.d(e,"Db",(function(){return St})),n.d(e,"Eb",(function(){return v})),n.d(e,"Fb",(function(){return m})),n.d(e,"Gb",(function(){return Ot})),n.d(e,"Hb",(function(){return Tt})),n.d(e,"Ib",(function(){return Oo})),n.d(e,"Jb",(function(){return xo})),n.d(e,"Kb",(function(){return Io})),n.d(e,"Lb",(function(){return To})),n.d(e,"Mb",(function(){return fn})),n.d(e,"Nb",(function(){return Go})),n.d(e,"Ob",(function(){return et})),n.d(e,"Pb",(function(){return Eo})),n.d(e,"Qb",(function(){return _a})),n.d(e,"Rb",(function(){return No})),n.d(e,"Sb",(function(){return ma})),n.d(e,"Tb",(function(){return ra})),n.d(e,"Ub",(function(){return ia})),n.d(e,"Vb",(function(){return Co})),n.d(e,"Wb",(function(){return ya})),n.d(e,"Xb",(function(){return or})),n.d(e,"Yb",(function(){return Et})),n.d(e,"Zb",(function(){return wo})),n.d(e,"ac",(function(){return Ho})),n.d(e,"bc",(function(){return Bo})),n.d(e,"cc",(function(){return zo}));var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}function c(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty("__parameters__")?t.__parameters__:Object.defineProperty(t,"__parameters__",{value:[]}).__parameters__;for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const l=c("Inject",t=>({token:t})),h=c("Optional"),f=c("Self"),d=c("SkipSelf");var p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function y(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function m(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return _(t,t[O])||_(t,t[S])}function _(t,e){return e&&e.token===t?e:null}function w(t){return t&&(t.hasOwnProperty(E)||t.hasOwnProperty(T))?t[E]:null}const O=g({"\u0275prov":g}),E=g({"\u0275inj":g}),C=g({"\u0275provFallback":g}),S=g({ngInjectableDef:g}),T=g({ngInjectorDef:g});function I(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(I).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function x(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const j=g({__forward_ref__:g});function A(t){return t.__forward_ref__=A,t.toString=function(){return I(this())},t}function N(t){return k(t)?t():t}function k(t){return"function"==typeof t&&t.hasOwnProperty(j)&&t.__forward_ref__===A}const P="undefined"!=typeof globalThis&&globalThis,R="undefined"!=typeof window&&window,D="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,L="undefined"!=typeof global&&global,M=P||L||R||D,F=g({"\u0275cmp":g}),U=g({"\u0275dir":g}),V=g({"\u0275pipe":g}),q=g({"\u0275mod":g}),H=g({"\u0275loc":g}),B=g({"\u0275fac":g}),z=g({__NG_ELEMENT_ID__:g});class G{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=v({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const W=new G("INJECTOR",-1),Q={},K=/\n/gm,$=g({provide:String,useValue:g});let Y,X=void 0;function Z(t){const e=X;return X=t,e}function J(t){const e=Y;return Y=t,e}function tt(t,e=p.Default){if(void 0===X)throw new Error("inject() must be called from an injection context");return null===X?nt(t,void 0,e):X.get(t,e&p.Optional?null:void 0,e)}function et(t,e=p.Default){return(Y||tt)(N(t),e)}function nt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${I(t)}]`)}function rt(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=p.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof h||"Optional"===i.ngMetadataName||i===h?n|=p.Optional:i instanceof d||"SkipSelf"===i.ngMetadataName||i===d?n|=p.SkipSelf:i instanceof f||"Self"===i.ngMetadataName||i===f?n|=p.Self:t=i instanceof l||i===l?i.token:i}e.push(et(t,n))}else e.push(et(r))}return e}class it{get(t,e=Q){if(e===Q){const e=new Error(`NullInjectorError: No provider for ${I(t)}!`);throw e.name="NullInjectorError",e}return e}}class ot{}class st{}function at(t,e){t.forEach(t=>Array.isArray(t)?at(t,e):e(t))}function ut(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ct(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function lt(t,e,n){let r=ft(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function ht(t,e){const n=ft(t,e);if(n>=0)return t[1|n]}function ft(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var dt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),pt=function(t){return t[t.Emulated=0]="Emulated",t[t.Native=1]="Native",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const gt={},yt=[];let vt=0;function mt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===dt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||yt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||pt.Emulated,id:"c",styles:t.styles||yt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=vt++,n.inputs=Ct(t.inputs,e),n.outputs=Ct(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(bt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(_t):null,n})}function bt(t){return It(t)||function(t){return t[U]||null}(t)}function _t(t){return function(t){return t[V]||null}(t)}const wt={};function Ot(t){const e={type:t.type,bootstrap:t.bootstrap||yt,declarations:t.declarations||yt,imports:t.imports||yt,exports:t.exports||yt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{wt[t.id]=t.type}),e}function Et(t,e){return u(()=>{const n=jt(t,!0);n.declarations=e.declarations||yt,n.imports=e.imports||yt,n.exports=e.exports||yt})}function Ct(t,e){if(null==t)return gt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const St=mt;function Tt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function It(t){return t[F]||null}function xt(t,e){return t.hasOwnProperty(B)?t[B]:null}function jt(t,e){const n=t[q]||null;if(!n&&!0===e)throw new Error(`Type ${I(t)} does not have '\u0275mod' property.`);return n}function At(t){return Array.isArray(t)&&"object"==typeof t[1]}function Nt(t){return Array.isArray(t)&&!0===t[1]}function kt(t){return 0!=(8&t.flags)}function Pt(t){return 2==(2&t.flags)}function Rt(t){return 1==(1&t.flags)}function Dt(t){return null!==t.template}function Lt(t){return 0!=(512&t[2])}class Mt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Ft(){return Ut}function Ut(t){return t.type.prototype.ngOnChanges&&(t.setInput=qt),Vt}function Vt(){const t=Ht(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===gt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function qt(t,e,n,r){const i=Ht(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:gt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new Mt(u&&u.currentValue,e,s===gt),t[r]=e}function Ht(t){return t.__ngSimpleChanges__||null}Ft.ngInherit=!0;let Bt=void 0;function zt(t){Bt=t}function Gt(t){return!!t.listen}const Wt={createRenderer:(t,e)=>void 0!==Bt?Bt:"undefined"!=typeof document?document:void 0};function Qt(t){for(;Array.isArray(t);)t=t[0];return t}function Kt(t,e){return Qt(e[t+20])}function $t(t,e){return Qt(e[t.index])}function Yt(t,e){return t.data[e+20]}function Xt(t,e){const n=e[t];return At(n)?n:n[0]}function Zt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Jt(t){return 4==(4&t[2])}function te(t){return 128==(128&t[2])}function ee(t,e){return null===t||null==e?null:t[e]}function ne(t){t[18]=0}function re(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const ie={lFrame:we(null),bindingsEnabled:!0,checkNoChangesMode:!1};function oe(){return ie.bindingsEnabled}function se(){return ie.lFrame.lView}function ae(){return ie.lFrame.tView}function ue(){return ie.lFrame.previousOrParentTNode}function ce(t,e){ie.lFrame.previousOrParentTNode=t,ie.lFrame.isParent=e}function le(){return ie.lFrame.isParent}function he(){return ie.checkNoChangesMode}function fe(t){ie.checkNoChangesMode=t}function de(){return ie.lFrame.bindingIndex++}function pe(t,e){const n=ie.lFrame;n.bindingIndex=n.bindingRootIndex=t,ge(e)}function ge(t){ie.lFrame.currentDirectiveIndex=t}function ye(){return ie.lFrame.currentQueryIndex}function ve(t){ie.lFrame.currentQueryIndex=t}function me(t,e){const n=_e();ie.lFrame=n,n.previousOrParentTNode=e,n.lView=t}function be(t,e){const n=_e(),r=t[1];ie.lFrame=n,n.previousOrParentTNode=e,n.lView=t,n.tView=r,n.contextLView=t,n.bindingIndex=r.bindingStartIndex}function _e(){const t=ie.lFrame,e=null===t?null:t.child;return null===e?we(t):e}function we(t){const e={previousOrParentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:0,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null};return null!==t&&(t.child=e),e}function Oe(){const t=ie.lFrame;return ie.lFrame=t.parent,t.previousOrParentTNode=null,t.lView=null,t}const Ee=Oe;function Ce(){const t=Oe();t.isParent=!0,t.tView=null,t.selectedIndex=0,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Se(){return ie.lFrame.selectedIndex}function Te(t){ie.lFrame.selectedIndex=t}function Ie(){const t=ie.lFrame;return Yt(t.tView,t.selectedIndex)}function xe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function je(t,e,n){ke(t,e,3,n)}function Ae(t,e,n,r){(3&t[2])===n&&ke(t,e,n,r)}function Ne(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function ke(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Pe(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Pe(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}class Re{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function De(t,e,n){const r=Gt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];Me(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function Le(t){return 3===t||4===t||6===t}function Me(t){return 64===t.charCodeAt(0)}function Fe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ue(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ue(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ve(t){return-1!==t}function qe(t){return 32767&t}function He(t){return t>>16}function Be(t,e){let n=He(t),r=e;for(;n>0;)r=r[15],n--;return r}function ze(t){return"string"==typeof t?t:null==t?"":""+t}function Ge(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ze(t)}const We=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(M))();function Qe(t){return t instanceof Function?t():t}let Ke=!0;function $e(t){const e=Ke;return Ke=t,e}let Ye=0;function Xe(t,e){const n=Je(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ze(r.data,t),Ze(e,null),Ze(r.blueprint,null));const i=tn(t,e),o=t.injectorIndex;if(Ve(i)){const t=qe(i),n=Be(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ze(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Je(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null==e[t.injectorIndex+8]?-1:t.injectorIndex}function tn(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=e[6],r=1;for(;n&&-1===n.injectorIndex;)n=(e=e[15])?e[6]:null,r++;return n?n.injectorIndex|r<<16:-1}function en(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(z)&&(r=n[z]),null==r&&(r=n[z]=Ye++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function nn(t,e,n,r=p.Default,i){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(z)?t[z]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof i){me(e,t);try{const t=i();if(null!=t||r&p.Optional)return t;throw new Error(`No provider for ${Ge(n)}!`)}finally{Ee()}}else if("number"==typeof i){if(-1===i)return new ln(t,e);let o=null,s=Je(t,e),a=-1,u=r&p.Host?e[16][6]:null;for((-1===s||r&p.SkipSelf)&&(a=-1===s?tn(t,e):e[s+8],cn(r,!1)?(o=e[1],s=qe(a),e=Be(a,e)):s=-1);-1!==s;){a=e[s+8];const t=e[1];if(un(i,s,t.data)){const t=on(s,e,n,o,r,u);if(t!==rn)return t}cn(r,e[1].data[s+8]===u)&&un(i,s,e)?(o=t,s=qe(a),e=Be(a,e)):s=-1}}}if(r&p.Optional&&void 0===i&&(i=null),0==(r&(p.Self|p.Host))){const t=e[9],o=J(void 0);try{return t?t.get(n,i,r&p.Optional):nt(n,i,r&p.Optional)}finally{J(o)}}if(r&p.Optional)return i;throw new Error(`NodeInjector: NOT_FOUND [${Ge(n)}]`)}const rn={};function on(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=sn(a,s,n,null==r?Pt(a)&&Ke:r!=s&&3===a.type,i&p.Host&&o===a);return null!==u?an(e,s,u,a):rn}function sn(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&Dt(t)&&t.type===n)return u}return null}function an(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Re){const s=i;if(s.resolving)throw new Error("Circular dep for "+Ge(o[n]));const a=$e(s.canSeeViewProviders);let u;s.resolving=!0,s.injectImpl&&(u=J(s.injectImpl)),me(t,r);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=Ut(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{s.injectImpl&&J(u),$e(a),s.resolving=!1,Ee()}}return i}function un(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function cn(t,e){return!(t&p.Self||t&p.Host&&e)}class ln{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return nn(this._tNode,this._lView,t,void 0,e)}}function hn(t){const e=t;if(k(t))return()=>{const t=hn(N(e));return t?t():null};let n=xt(e);if(null===n){const t=w(e);n=t&&t.factory}return n||null}function fn(t){return u(()=>{const e=t.prototype.constructor,n=e[B]||hn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[B]||hn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function dn(t){return t.ngDebugContext}function pn(t){return t.ngOriginalError}function gn(t,...e){t.error(...e)}class yn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||gn}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?dn(t)?dn(t):this._findContext(pn(t)):null}_findOriginalError(t){let e=pn(t);for(;e&&pn(e);)e=pn(e);return e}}class vn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class mn extends vn{getTypeName(){return"HTML"}}class bn extends vn{getTypeName(){return"Style"}}class _n extends vn{getTypeName(){return"Script"}}class wn extends vn{getTypeName(){return"URL"}}class On extends vn{getTypeName(){return"ResourceURL"}}function En(t){return t instanceof vn?t.changingThisBreaksApplicationSecurity:t}function Cn(t,e){const n=Sn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Sn(t){return t instanceof vn&&t.getTypeName()||null}function Tn(t){return new mn(t)}function In(t){return new bn(t)}function xn(t){return new _n(t)}function jn(t){return new wn(t)}function An(t){return new On(t)}let Nn=!0,kn=!1;function Pn(){return kn=!0,Nn}function Rn(){if(kn)throw new Error("Cannot enable prod mode after platform setup.");Nn=!1}class Dn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(t,"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class Ln{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=t,e;const n=this.inertDocument.createElement("body");return n.innerHTML=t,this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Mn=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Fn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Un(t){return(t=String(t)).match(Mn)||t.match(Fn)?t:(Pn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Vn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function qn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Hn=Vn("area,br,col,hr,img,wbr"),Bn=Vn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zn=Vn("rp,rt"),Gn=qn(zn,Bn),Wn=qn(Hn,qn(Bn,Vn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),qn(zn,Vn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Gn),Qn=Vn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Kn=Vn("srcset"),$n=qn(Qn,Kn,Vn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Vn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Yn=Vn("script,style,template");class Xn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Wn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Yn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!$n.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Qn[o]&&(s=Un(s)),Kn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Un(t.trim())).join(", ")),this.buf.push(" ",e,'="',tr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Wn.hasOwnProperty(e)&&!Hn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(tr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const Zn=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jn=/([^\#-~ |!])/g;function tr(t){return t.replace(/&/g,"&amp;").replace(Zn,(function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"})).replace(Jn,(function(t){return"&#"+t.charCodeAt(0)+";"})).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let er;function nr(t,e){let n=null;try{er=er||function(t){return function(){try{return!!(new window.DOMParser).parseFromString("","text/html")}catch(t){return!1}}()?new Dn:new Ln(t)}(t);let r=e?String(e):"";n=er.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=er.getInertBodyElement(r)}while(r!==o);const s=new Xn,a=s.sanitizeChildren(rr(n)||n);return Pn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=rr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function rr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var ir=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function or(t){const e=function(){const t=se();return t&&t[12]}();return e?e.sanitize(ir.URL,t)||"":Cn(t,"URL")?En(t):Un(ze(t))}function sr(t,e){t.__ngContext__=e}function ar(t){throw new Error("Multiple components match node with tagname "+t.tagName)}function ur(){throw new Error("Cannot mix multi providers and regular providers")}function cr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}function lr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==cr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function hr(t){return 0===t.type&&"ng-template"!==t.tagName}function fr(t,e,n){return e===(0!==t.type||n?t.tagName:"ng-template")}function dr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(Le(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!fr(t,u,n)||""===u&&1===e.length){if(pr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!lr(t.attrs,c,n)){if(pr(r))return!1;s=!0}continue}const l=gr(8&r?"class":u,i,hr(t),n);if(-1===l){if(pr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==cr(e,c,0)||2&r&&c!==t){if(pr(r))return!1;s=!0}}}}else{if(!s&&!pr(r)&&!pr(u))return!1;if(s&&pr(u))continue;s=!1,r=u|1&r}}return pr(r)||s}function pr(t){return 0==(1&t)}function gr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function yr(t,e,n=!1){for(let r=0;r<e.length;r++)if(dr(t,e[r],n))return!0;return!1}function vr(t,e){return t?":not("+e.trim()+")":e}function mr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||pr(s)||(e+=vr(o,i),i=""),r=s,o=o||!pr(r);n++}return""!==i&&(e+=vr(o,i)),e}const br={};function _r(t){const e=t[3];return Nt(e)?e[3]:e}function wr(t){return Er(t[13])}function Or(t){return Er(t[4])}function Er(t){for(;null!==t&&!Nt(t);)t=t[4];return t}function Cr(t){Sr(ae(),se(),Se()+t,he())}function Sr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&je(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ae(e,r,0,n)}Te(n)}function Tr(t,e){return t<<17|e<<2}function Ir(t){return t>>17&32767}function xr(t){return 2|t}function jr(t){return(131068&t)>>2}function Ar(t,e){return-131069&t|e<<2}function Nr(t){return 1|t}function kr(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];ve(i),n.contentQueries(2,e[o],o)}}}function Pr(t,e,n){return Gt(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Rr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,ne(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Dr(t,e,n,r,i,o){const s=n+20,a=t.data[s]||function(t,e,n,r,i,o){const s=ue(),a=le(),u=a?s:s&&s.parent,c=t.data[n]=Gr(0,u&&u!==e?u:null,r,n,i,o);return null===t.firstChild&&(t.firstChild=c),s&&(!a||null!=s.child||null===c.parent&&2!==s.type?a||(s.next=c):s.child=c),c}(t,e,s,r,i,o);return ce(a,!0),a}function Lr(t,e,n){be(e,e[6]);try{const r=t.viewQuery;null!==r&&di(1,r,n);const i=t.template;null!==i&&Ur(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&kr(t,e),t.staticViewQueries&&di(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)ui(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,Ce()}}function Mr(t,e,n,r){const i=e[2];if(256==(256&i))return;be(e,e[6]);const o=he();try{ne(e),ie.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ur(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&je(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ae(e,n,0,null),Ne(e,0)}if(function(t){for(let e=wr(t);null!==e;e=Or(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&re(r,1),n[2]|=1024}}}(e),function(t){for(let e=wr(t);null!==e;e=Or(e))for(let t=10;t<e.length;t++){const n=e[t],r=n[1];te(n)&&Mr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&kr(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&je(e,n)}else{const n=t.contentHooks;null!==n&&Ae(e,n,1),Ne(e,1)}!function(t,e){try{const n=t.expandoInstructions;if(null!==n){let r=t.expandoStartIndex,i=-1,o=-1;for(let t=0;t<n.length;t++){const s=n[t];"number"==typeof s?s<=0?(o=0-s,Te(o),r+=9+n[++t],i=r):r+=s:(null!==s&&(pe(r,i),s(2,e[i])),i++)}}}finally{Te(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)ai(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&di(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&je(e,n)}else{const n=t.viewHooks;null!==n&&Ae(e,n,2),Ne(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,re(e[3],-1))}finally{Ce()}}function Fr(t,e,n,r){const i=e[10],o=!he(),s=Jt(e);try{o&&!s&&i.begin&&i.begin(),s&&Lr(t,e,r),Mr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ur(t,e,n,r,i){const o=Se();try{Te(-1),2&r&&e.length>20&&Sr(t,e,0,he()),n(r,i)}finally{Te(o)}}function Vr(t,e,n){oe()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Xe(n,e),sr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Dt(r);o&&ri(e,n,r);const u=an(e,t,a,n);sr(u,e),null!==s&&ii(0,a-i,u,r,0,s),o&&(Xt(n.index,e)[8]=u)}}(t,e,n,$t(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=t.expandoInstructions,s=t.firstCreatePass,a=n.index-20,u=ie.lFrame.currentDirectiveIndex;try{Te(a);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ge(n),null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs?Xr(r,i):s&&o.push(null)}}finally{Te(-1),ge(u)}}(t,e,n))}function qr(t,e,n=$t){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function Hr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Br(1,-1,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Br(t,e,n,r,i,o,s,a,u,c){const l=20+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:br);return n}(l,h);return f[1]={type:t,id:e,blueprint:f,template:n,queries:null,viewQuery:a,node:null,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,expandoInstructions:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:c,incompleteFirstPass:!1}}function zr(t,e,n,r){const i=gi(e);i.push(n),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}function Gr(t,e,n,r,i,o){return{type:n,index:r,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,tagName:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Wr(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Qr(t,e,n,r,i,o,s,a){const u=$t(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(vi(t,n,c,r,i),Pt(e)&&function(t,e){const n=Xt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3===e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.tagName||"",r):i,Gt(o)?o.setProperty(u,r,i):Me(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Kr(t,e,n,r){let i=!1;if(oe()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];yr(n,s.selectors,!1)&&(i||(i=[]),en(Xe(n,e),t,s.type),Dt(s)?(2&n.flags&&ar(n),Jr(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){let r=0;i=!0,ei(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}Zr(t,n,o.length);let a=!1,u=!1;for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Fe(n.mergedAttrs,c.hostAttrs),ni(t,e,c),ti(t.data.length-1,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!a&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index-20),a=!0),u||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index-20),u=!0),$r(t,c),r+=c.hostVars}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||hr(e)?null:oi(n,i);o.push(c),s=Wr(n,u,s),a=Wr(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n),Yr(t,e,r)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new Error(`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Fe(n.mergedAttrs,n.attrs),i}function $r(t,e){const n=t.expandoInstructions;n.push(e.hostBindings),0!==e.hostVars&&n.push(e.hostVars)}function Yr(t,e,n){for(let r=0;r<n;r++)e.push(br),t.blueprint.push(br),t.data.push(null)}function Xr(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Zr(t,e,n){const r=20-e.index,i=t.data.length-(1048575&e.providerIndexes);(t.expandoInstructions||(t.expandoInstructions=[])).push(r,i,n)}function Jr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function ti(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Dt(e)&&(n[""]=t)}}function ei(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function ni(t,e,n){t.data.push(n);const r=n.factory||(n.factory=xt(n.type)),i=new Re(r,Dt(n),null);t.blueprint.push(i),e.push(i)}function ri(t,e,n){const r=$t(e,t),i=Hr(n),o=t[10],s=ci(t,Rr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n)));t[e.index]=s}function ii(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function oi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function si(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function ai(t,e){const n=Xt(e,t);if(te(n)){const t=n[1];80&n[2]?Mr(t,n,t.template,n[8]):n[5]>0&&function t(e){for(let r=wr(e);null!==r;r=Or(r))for(let e=10;e<r.length;e++){const n=r[e];if(1024&n[2]){const t=n[1];Mr(t,n,t.template,n[8])}else n[5]>0&&t(n)}const n=e[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Xt(n[r],e);te(i)&&i[5]>0&&t(i)}}(n)}}function ui(t,e){const n=Xt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Lr(r,n,n[8])}function ci(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function li(t){for(;t;){t[2]|=64;const e=_r(t);if(Lt(t)&&!e)return t;t=e}return null}function hi(t,e,n){const r=e[10];r.begin&&r.begin();try{Mr(t,e,t.template,n)}catch(i){throw yi(e,i),i}finally{r.end&&r.end()}}function fi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Zt(n),i=r[1];Fr(i,r,i.template,n)}}(t[8])}function di(t,e,n){ve(0),e(t,n)}const pi=(()=>Promise.resolve(null))();function gi(t){return t[7]||(t[7]=[])}function yi(t,e){const n=t[9],r=n?n.get(yn,null):null;r&&r.handleError(e)}function vi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function mi(t,e){const n=e[3];return-1===t.index?Nt(n)?n:null:n}function bi(t,e){const n=mi(t,e);return n?Ai(e[11],n[7]):null}function _i(t,e,n,r,i){if(null!=r){let o,s=!1;Nt(r)?o=r:At(r)&&(s=!0,r=r[0]);const a=Qt(r);0===t&&null!==n?null==i?xi(e,n,a):Ii(e,n,a,i||null):1===t&&null!==n?Ii(e,n,a,i||null):2===t?function(t,e,n){const r=Ai(t,e);r&&function(t,e,n,r){Gt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Qt(n)&&_i(e,t,r,o,i);for(let s=10;s<n.length;s++){const i=n[s];Ri(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function wi(t,e,n,r){const i=bi(t.node,e);i&&Ri(t,e,e[11],n?1:2,i,r)}function Oi(t,e){const n=t[9],r=n.indexOf(e);1024&e[2]&&re(e[3],-1),n.splice(r,1)}function Ei(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&Oi(i,r),e>0&&(t[n-1][4]=r[4]);const o=ct(t,10+e);wi(r[1],r,!1,null);const s=o[19];null!==s&&s.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Ci(t,e){if(!(256&e[2])){const n=e[11];Gt(n)&&n.destroyNode&&Ri(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Ti(t[1],t);for(;e;){let n=null;if(At(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)At(e)&&Ti(e[1],e),e=Si(e,t);null===e&&(e=t),At(e)&&Ti(e[1],e),n=e&&e[4]}e=n}}(e)}}function Si(t,e){let n;return At(t)&&(n=t[6])&&2===n.type?mi(n,t):t[3]===e?null:t[3]}function Ti(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Re)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):Qt(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e);const n=e[6];n&&3===n.type&&Gt(e[11])&&e[11].destroy();const r=e[17];if(null!==r&&Nt(e[3])){r!==e[3]&&Oi(r,e);const n=e[19];null!==n&&n.detachView(t)}}}function Ii(t,e,n,r){Gt(t)?t.insertBefore(e,n,r):e.insertBefore(n,r,!0)}function xi(t,e,n){Gt(t)?t.appendChild(e,n):e.appendChild(n)}function ji(t,e,n,r){null!==r?Ii(t,e,n,r):xi(t,e,n)}function Ai(t,e){return Gt(t)?t.parentNode(e):e.parentNode}function Ni(t,e,n,r){const i=function(t,e,n){let r=e.parent;for(;null!=r&&(4===r.type||5===r.type);)r=(e=r).parent;if(null==r){const t=n[6];return 2===t.type?bi(t,n):n[0]}if(e&&5===e.type&&4&e.flags)return $t(e,n).parentNode;if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n!==pt.ShadowDom&&n!==pt.Native)return null}return $t(r,n)}(t,r,e);if(null!=i){const t=e[11],o=function(t,e){if(2===t.type){const n=mi(t,e);return null===n?null:ki(n.indexOf(e,10)-10,n)}return 4===t.type||5===t.type?$t(t,e):null}(r.parent||e[6],e);if(Array.isArray(n))for(let e=0;e<n.length;e++)ji(t,i,n[e],o);else ji(t,i,n,o)}}function ki(t,e){const n=10+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return function t(e,n){if(null!==n){const r=n.type;if(3===r)return $t(n,e);if(0===r)return ki(-1,e[n.index]);if(4===r||5===r){const r=n.child;if(null!==r)return t(e,r);{const t=e[n.index];return Nt(t)?ki(-1,t):Qt(t)}}{const r=e[16],i=r[6],o=_r(r),s=i.projection[n.projection];return null!=s?t(o,s):t(e,n.next)}}return null}(t,r)}return e[7]}function Pi(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;s&&0===e&&(a&&sr(Qt(a),r),n.flags|=4),64!=(64&n.flags)&&(4===u||5===u?(Pi(t,e,n.child,r,i,o,!1),_i(e,t,i,a,o)):1===u?Di(t,e,r,n,i,o):_i(e,t,i,a,o)),n=s?n.projectionNext:n.next}}function Ri(t,e,n,r,i,o){Pi(n,r,t.node.child,e,i,o,!1)}function Di(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)_i(e,t,i,a[u],o);else Pi(t,e,a,s[3],i,o,!0)}function Li(t,e,n){Gt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Mi(t,e,n){Gt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}class Fi{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView;return null==t[0]?function t(e,n,r,i,o=!1){for(;null!==r;){const s=n[r.index];if(null!==s&&i.push(Qt(s)),Nt(s))for(let e=10;e<s.length;e++){const n=s[e],r=n[1].firstChild;null!==r&&t(n[1],n,r,i)}const a=r.type;if(4===a||5===a)t(e,n,r.child,i);else if(1===a){const e=n[16],o=e[6].projection[r.projection];if(Array.isArray(o))i.push(...o);else{const n=_r(e);t(n[1],n,o,i,!0)}}r=o?r.projectionNext:r.next}return i}(t[1],t,t[6].child,[]):[]}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Ci(this._lView[1],this._lView)}onDestroy(t){zr(this._lView[1],this._lView,null,t)}markForCheck(){li(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){hi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){fe(!0);try{hi(t,e,n)}finally{fe(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Ri(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Ui extends Fi{constructor(t){super(t),this._view=t}detectChanges(){fi(this._view)}checkNoChanges(){!function(t){fe(!0);try{fi(t)}finally{fe(!1)}}(this._view)}get context(){return null}}let Vi,qi,Hi;function Bi(t,e,n){return Vi||(Vi=class extends t{}),new Vi($t(e,n))}function zi(t,e,n,r){return qi||(qi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Rr(this._declarationView,e,t,16,null,e.node);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Lr(e,n,t),new Fi(n)}}),0===n.type?new qi(r,n,Bi(e,n,r)):null}function Gi(t,e,n,r){let i;Hi||(Hi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Bi(e,this._hostTNode,this._hostView)}get injector(){return new ln(this._hostTNode,this._hostView)}get parentInjector(){const t=tn(this._hostTNode,this._hostView),e=Be(t,this._hostView),n=function(t,e,n){if(n.parent&&-1!==n.parent.injectorIndex){const t=n.parent.injectorIndex;let e=n.parent;for(;null!=e.parent&&t==e.parent.injectorIndex;)e=e.parent;return e}let r=He(t),i=e,o=e[6];for(;r>1;)i=i[15],o=i[6],r--;return o}(t,this._hostView,this._hostTNode);return Ve(t)&&null!=n?new ln(n,e):new ln(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(ot,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),Nt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Hi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e);return function(t,e,n,r){const i=10+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-10?(e[4]=n[i],ut(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,this._lContainer,i),wi(r,n,!0,ki(i,this._lContainer)),t.attachToViewContainerRef(this),ut(this._lContainer[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ei(this._lContainer,e);n&&(ct(this._lContainer[8],e),Ci(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Ei(this._lContainer,e);return n&&null!=ct(this._lContainer[8],e)?new Fi(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(Nt(o))i=o;else{let t;if(4===n.type)t=Qt(o);else if(t=r[11].createComment(""),Lt(r)){const e=r[11],i=$t(n,r);Ii(e,Ai(e,i),t,function(t,e){return Gt(t)?t.nextSibling(e):e.nextSibling}(e,i))}else Ni(r[1],r,t,n);r[n.index]=i=si(o,r,t,n),ci(r,i)}return new Hi(i,n,r)}function Wi(t=!1){return function(t,e,n){if(!n&&Pt(t)){const n=Xt(t.index,e);return new Fi(n,n)}return 3===t.type||0===t.type||4===t.type||5===t.type?new Fi(e[16],e):null}(ue(),se(),t)}let Qi=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ki(),t})();const Ki=Wi,$i=Function,Yi=new G("Set Injector scope."),Xi={},Zi={},Ji=[];let to=void 0;function eo(){return void 0===to&&(to=new it),to}function no(t,e=null,n=null,r){return new ro(t,n,e||eo(),r)}class ro{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&at(e,n=>this.processProvider(n,t,e)),at([t],t=>this.processInjectorType(t,[],i)),this.records.set(W,so(void 0,this));const o=this.records.get(Yi);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:I(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=Q,n=p.Default){this.assertNotDestroyed();const r=Z(this);try{if(!(n&p.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof G)&&b(t);e=n&&this.injectableDefInScope(n)?so(io(t),Xi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&p.Self?eo():this.parent).get(t,e=n&p.Optional&&e===Q?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(I(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e.__source&&i.unshift(e.__source),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=I(e);if(Array.isArray(e))i=e.map(I).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):I(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(K,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Z(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(I(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=N(t)))return!1;let r=w(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=w(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{at(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];at(r,t=>this.processProvider(t,n,r||Ji))}}this.injectorDefTypes.add(o),this.records.set(o,so(r.factory,Xi));const a=r.providers;if(null!=a&&!s){const e=t;at(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=uo(t=N(t))?t:N(t&&t.provide);const i=function(t,e,n){return ao(t)?so(void 0,t.useValue):so(oo(t,e,n),Xi)}(t,e,n);if(uo(t)||!0!==t.multi){const t=this.records.get(r);t&&void 0!==t.multi&&ur()}else{let e=this.records.get(r);e?void 0===e.multi&&ur():(e=so(void 0,Xi,!0),e.factory=()=>rt(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Zi?function(t){throw new Error("Cannot instantiate cyclic dependency! "+t)}(I(t)):e.value===Xi&&(e.value=Zi,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function io(t){const e=b(t),n=null!==e?e.factory:xt(t);if(null!==n)return n;const r=w(t);if(null!==r)return r.factory;if(t instanceof G)throw new Error(`Token ${I(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${I(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[S]||t[C]&&t[C]());if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function oo(t,e,n){let r=void 0;if(uo(t)){const e=N(t);return xt(e)||io(e)}if(ao(t))r=()=>N(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...rt(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>et(N(t.useExisting));else{const i=N(t&&(t.useClass||t.provide));if(i||function(t,e,n){let r="";throw t&&e&&(r=` - only instances of Provider and Type are allowed, got: [${e.map(t=>t==n?"?"+n+"?":"...").join(", ")}]`),new Error(`Invalid provider for the NgModule '${I(t)}'`+r)}(e,n,t),!function(t){return!!t.deps}(t))return xt(i)||io(i);r=()=>new i(...rt(t.deps))}var i;return r}function so(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ao(t){return null!==t&&"object"==typeof t&&$ in t}function uo(t){return"function"==typeof t}const co=function(t,e,n){return function(t,e=null,n=null,r){const i=no(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let lo=(()=>{class t{static create(t,e){return Array.isArray(t)?co(t,e,""):co(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=Q,t.NULL=new it,t.\u0275prov=v({token:t,providedIn:"any",factory:()=>et(W)}),t.__NG_ELEMENT_ID__=-1,t})();const ho=new G("AnalyzeForEntryComponents");function fo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=x(i,t):2==o&&(r=x(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}let po=null;function go(){if(!po){const t=M.Symbol;if(t&&t.iterator)po=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(po=n)}}}return po}class yo{constructor(t){this.wrapped=t}static wrap(t){return new yo(t)}static unwrap(t){return yo.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof yo}}function vo(t){return!!mo(t)&&(Array.isArray(t)||!(t instanceof Map)&&go()in t)}function mo(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function bo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function _o(t,e,n,r){const i=se();return bo(i,de(),e)&&(ae(),function(t,e,n,r,i,o){const s=$t(t,e),a=e[11];if(null==r)Gt(a)?a.removeAttribute(s,n,o):s.removeAttribute(n);else{const e=null==i?ze(r):i(r,t.tagName||"",n);Gt(a)?a.setAttribute(s,n,e,o):o?s.setAttributeNS(o,n,e):s.setAttribute(n,e)}}(Ie(),i,t,e,n,r)),_o}function wo(t,e,n,r,i,o,s,a){const u=se(),c=ae(),l=t+20,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Dr(e,n[6],t,0,s||null,ee(c,a));Kr(e,n,l,ee(c,u)),xe(e,l);const h=l.tViews=Br(2,-1,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c),f=Gr(0,null,2,-1,null,null);return f.injectorIndex=l.injectorIndex,h.node=f,null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(t,c,u,e,n,r,i,o,s):c.data[l];ce(h,!1);const f=u[11].createComment("");Ni(c,u,f,h),sr(f,u),ci(u,u[l]=si(f,u,f,h)),Rt(h)&&Vr(c,u,h),null!=s&&qr(u,h,a)}function Oo(t,e=p.Default){const n=se();return null==n?et(t,e):nn(ue(),n,N(t),e)}function Eo(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(Le(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ue(),t)}function Co(t,e,n){const r=se();return bo(r,de(),e)&&Qr(ae(),Ie(),r,t,e,r[11],n,!1),Co}function So(t,e,n,r,i){const o=i?"class":"style";vi(t,n,e.inputs[o],o,r)}function To(t,e,n,r){const i=se(),o=ae(),s=20+t,a=i[11],u=i[s]=Pr(e,a,ie.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ee(a,o),c=Dr(e,n[6],t,3,i,u);return Kr(e,n,c,ee(a,s)),null!==c.attrs&&fo(c,c.attrs,!1),null!==c.mergedAttrs&&fo(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(t,o,i,0,e,n,r):o.data[s];ce(c,!0);const l=c.mergedAttrs;null!==l&&De(a,u,l);const h=c.classes;null!==h&&Mi(a,u,h);const f=c.styles;null!==f&&Li(a,u,f),Ni(o,i,u,c),0===ie.lFrame.elementDepthCount&&sr(u,i),ie.lFrame.elementDepthCount++,Rt(c)&&(Vr(o,i,c),function(t,e,n){if(kt(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&qr(i,c)}function Io(){let t=ue();le()?ie.lFrame.isParent=!1:(t=t.parent,ce(t,!1));const e=t;ie.lFrame.elementDepthCount--;const n=ae();n.firstCreatePass&&(xe(n,t),kt(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&So(n,e,se(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&So(n,e,se(),e.stylesWithoutHost,!1)}function xo(t,e,n,r){To(t,e,n,r),Io()}function jo(t){return!!t&&"function"==typeof t.then}function Ao(t){return!!t&&"function"==typeof t.subscribe}function No(t,e,n=!1,r){const i=se(),o=ae(),s=ue();return function(t,e,n,r,i,o,s=!1,a){const u=Rt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),l=gi(e);let h=!0;if(3===r.type){const f=$t(r,e),d=a?a(f):gt,p=d.target||f,g=l.length,y=a?t=>a(Qt(t[r.index])).target:r.index;if(Gt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=Po(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,y,g,g+1)}}else o=Po(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,y,g,s)}const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),No}function ko(t,e,n){try{return!1!==e(n)}catch(r){return yi(t,r),!1}}function Po(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?Xt(t.index,e):e;0==(32&e[2])&&li(s);let a=ko(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=ko(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}const Ro=[];function Do(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?Ir(o):jr(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Lo(t[a],e)&&(u=!0,t[a+1]=r?Nr(n):xr(n)),a=r?Ir(n):jr(n)}u&&(t[n+1]=r?xr(o):Nr(o))}function Lo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ft(t,e)>=0}function Mo(t,e){return function(t,e,n,r){const i=se(),o=ae(),s=function(t){const e=ie.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+2,n}();o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const r=i[Se()+20],o=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(r)&&null===e&&!o&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=ie.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=Uo(n=Fo(null,t,e,n,!0),e.attrs,!0),o=null);else{const r=e.directiveStylingLast;if(-1===r||t[r]!==i)if(n=Fo(i,t,e,n,!0),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==jr(r))return t[Ir(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Fo(null,t,e,n[1],!0),n=Uo(n,e.attrs,!0),function(t,e,n,r){t[Ir(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=Uo(r,t[o].hostAttrs,!0);return Uo(r,e.attrs,!0)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,r,e),function(t,e,n,r,i,o){let s=e.classBindings,a=Ir(s),u=jr(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ft(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=Ir(t[a+1]);t[r+1]=Tr(e,a),0!==e&&(t[e+1]=Ar(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Tr(a,0),0!==a&&(t[a+1]=Ar(t[a+1],r)),a=r;else t[r+1]=Tr(u,0),0===a?a=r:t[u+1]=Ar(t[u+1],r),u=r;l&&(t[r+1]=xr(t[r+1])),Do(t,c,r,!0),Do(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&ft(o,e)>=0&&(n[r+1]=Nr(n[r+1]))}(e,c,t,r),s=Tr(a,u),e.classBindings=s}(i,r,e,n,o)}}(o,t,s),e!==br&&bo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(3!==e.type)return;const u=t.data,c=u[a+1];qo(1==(1&c)?Vo(u,e,n,i,jr(c),!0):void 0)||(qo(o)||function(t){return 2==(2&t)}(c)&&(o=Vo(u,null,n,i,a,!0)),function(t,e,n,r,i){const o=Gt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Kt(Se(),n),i,o))}(o,o.data[Se()+20],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=I(En(t))),t}(e),0,s)}(t,e),Mo}function Fo(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=Uo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Uo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),lt(t,s,!!n||e[++o]))}return void 0===t?null:t}function Vo(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===br&&(l=c?Ro:void 0);let h=c?ht(l,r):u===r?l:void 0;if(o&&!qo(h)&&(h=ht(e,r)),qo(h)&&(a=h,s))return a;const f=t[i+1];i=s?Ir(f):jr(f)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=ht(t,r))}return a}function qo(t){return void 0!==t}function Ho(t,e=""){const n=se(),r=ae(),i=t+20,o=r.firstCreatePass?Dr(r,n[6],t,3,null,null):r.data[i],s=n[i]=function(t,e){return Gt(e)?e.createText(t):e.createTextNode(t)}(e,n[11]);Ni(r,n,s,o),ce(o,!1)}function Bo(t){return zo("",t,""),Bo}function zo(t,e,n){const r=se(),i=function(t,e,n,r){return bo(t,de(),n)?e+ze(n)+r:br}(r,t,e,n);return i!==br&&function(t,e,n){const r=Kt(e,t),i=t[11];Gt(i)?i.setValue(r,n):r.textContent=n}(r,Se(),i),zo}function Go(t,e,n){const r=se();return bo(r,de(),e)&&Qr(ae(),Ie(),r,t,e,r[11],n,!0),Go}function Wo(t,e){const n=Zt(t)[1],r=n.data.length-1;xe(n,{directiveStart:r,directiveEnd:r+1})}function Qo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Dt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=Ko(t.inputs),e.declaredInputs=Ko(t.declaredInputs),e.outputs=Ko(t.outputs);const n=i.hostBindings;n&&Xo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&$o(t,o),s&&Yo(t,s),y(t.inputs,i.inputs),y(t.declaredInputs,i.declaredInputs),y(t.outputs,i.outputs),Dt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Qo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Fe(i.hostAttrs,n=Fe(n,i.hostAttrs))}}(r)}function Ko(t){return t===gt?{}:t===yt?[]:t}function $o(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Yo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function Xo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}function Zo(t,e,n,r,i){if(t=N(t),Array.isArray(t))for(let o=0;o<t.length;o++)Zo(t[o],e,n,r,i);else{const o=ae(),s=se();let a=uo(t)?t:N(t.provide),u=oo(t);const c=ue(),l=1048575&c.providerIndexes,h=c.directiveStart,f=c.providerIndexes>>20;if(uo(t)||!t.multi){const r=new Re(u,i,Oo),d=es(a,e,i?l:l+f,h);-1===d?(en(Xe(c,s),o,a),Jo(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[d]=r,s[d]=r)}else{const d=es(a,e,l+f,h),p=es(a,e,l,l+f),g=d>=0&&n[d],y=p>=0&&n[p];if(i&&!y||!i&&!g){en(Xe(c,s),o,a);const l=function(t,e,n,r,i){const o=new Re(t,n,Oo);return o.multi=[],o.index=e,o.componentProviders=0,ts(o,i,r&&!n),o}(i?rs:ns,n.length,i,r,u);!i&&y&&(n[p].providerFactory=l),Jo(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Jo(o,t,d>-1?d:p,ts(n[i?p:d],u,!i&&r));!i&&r&&y&&n[p].componentProviders++}}}function Jo(t,e,n,r){const i=uo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ts(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function es(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function ns(t,e,n,r){return is(this.multi,[])}function rs(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=an(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),is(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],is(i,o);return o}function is(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function os(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=ae();if(r.firstCreatePass){const i=Dt(t);Zo(n,r.data,r.blueprint,i,!0),Zo(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class ss{}class as{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${I(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let us=(()=>{class t{}return t.NULL=new as,t})(),cs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>ls(t),t})();const ls=function(t){return Bi(t,ue(),se())};class hs{}var fs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let ds=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ps(),t})();const ps=function(){const t=se(),e=Xt(ue().index,t);return function(t){const e=t[11];if(Gt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(At(e)?e:t)};let gs=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>null}),t})();class ys{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const vs=new ys("10.0.14");class ms{constructor(){}supports(t){return vo(t)}create(t){return new _s(t)}}const bs=(t,e)=>e;class _s{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||bs}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Cs(n,r,i)?e:n,s=Cs(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!vo(t))throw new Error(`Error trying to diff '${I(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[go()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t,e;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=e)t.previousIndex=t.currentIndex,e=t._nextMoved;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new ws(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Es),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Es),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ws{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Os{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Es{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Os,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cs(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class Ss{constructor(){}supports(t){return t instanceof Map||mo(t)}create(){return new Ts}}class Ts{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||mo(t)))throw new Error(`Error trying to diff '${I(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Is(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Is{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let xs=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new ms])}),t})(),js=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new Ss])}),t})();const As=[new Ss],Ns=new xs([new ms]),ks=new js(As);let Ps=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Rs(t,cs),t})();const Rs=function(t,e){return zi(t,e,ue(),se())};let Ds=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ls(t,cs),t})();const Ls=function(t,e){return Gi(t,e,ue(),se())},Ms={};class Fs extends us{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=It(t);return new qs(e,this.ngModule)}}function Us(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Vs=new G("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>We});class qs extends ss{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(mr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Us(this.componentDef.inputs)}get outputs(){return Us(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ms,i);return o!==Ms||r===Ms?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(hs,Wt),s=i.get(gs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Gt(t))return t.selectRootElement(e,n===pt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Pr(u,o.createRenderer(null,this.componentDef),function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:We,clean:pi,playerHandler:null,flags:0},f=Br(0,-1,null,1,0,null,null,null,null,null),d=Rr(null,f,h,l,null,null,o,a,s,i);let p,g;be(d,null);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Dr(s,null,0,3,null,null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(fo(a,u,!0),null!==t&&(De(i,t,u),null!==a.classes&&Mi(i,t,a.classes),null!==a.styles&&Li(i,t,a.styles)));const c=r.createRenderer(t,e),l=Rr(n,Hr(e),null,e.onPush?64:16,n[20],a,r,c,void 0);return s.firstCreatePass&&(en(Xe(a,n),s,e.type),Jr(s,a),ei(a,n.length,1)),ci(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)De(a,c,["ng-version",vs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!pr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&De(a,c,t),e&&e.length>0&&Mi(a,c,e.join(" "))}if(g=Yt(f,0),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ue();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Zr(t,r,1),ni(t,e,n));const i=an(e,t,e.length-1,r);sr(i,e);const o=$t(r,e);return o&&sr(o,e),i}(o,n,e);r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries&&e.contentQueries(1,s,n.length-1);const a=ue();if(o.firstCreatePass&&(null!==e.hostBindings||null!==e.hostAttrs)){Te(a.index-20);const t=n[1];$r(t,e),Yr(t,n,e.hostVars),Xr(e,s)}return s}(t,this.componentDef,d,h,[Wo]),Lr(f,d,null)}finally{Ce()}const y=new Hs(this.componentType,p,Bi(cs,g,d),d,g);return f.node.child=g,y}}class Hs extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Ui(r),function(t,e,n,r){let i=t.node;null==i&&(t.node=i=Gr(0,null,2,-1,null,null)),r[6]=i}(r[1],0,0,r),this.componentType=t}get injector(){return new ln(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const Bs=void 0;var zs=["en",[["a","p"],["AM","PM"],Bs],[["AM","PM"],Bs,Bs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bs,"{1} 'at' {0}",Bs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Gs={};function Ws(t,e,n){"string"!=typeof e&&(n=e,e=t[Xs.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Gs[e]=t,n&&(Gs[e][Xs.ExtraData]=n)}function Qs(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Ys(e);if(n)return n;const r=e.split("-")[0];if(n=Ys(r),n)return n;if("en"===r)return zs;throw new Error(`Missing locale data for the locale "${t}".`)}function Ks(t){return Qs(t)[Xs.CurrencyCode]||null}function $s(t){return Qs(t)[Xs.PluralCase]}function Ys(t){return t in Gs||(Gs[t]=M.ng&&M.ng.common&&M.ng.common.locales&&M.ng.common.locales[t]),Gs[t]}var Xs=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});let Zs="en-US";function Js(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Zs=t.toLowerCase().replace(/_/g,"-"))}const ta=new Map;class ea extends ot{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fs(this);const n=jt(t),r=t[H]||null;r&&Js(r),this._bootstrapComponents=Qe(n.bootstrap),this._r3Injector=no(t,e,[{provide:ot,useValue:this},{provide:us,useValue:this.componentFactoryResolver}],I(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=lo.THROW_IF_NOT_FOUND,n=p.Default){return t===lo||t===ot||t===W?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class na extends st{constructor(t){super(),this.moduleType=t,null!==jt(t)&&function t(e){if(null!==e.\u0275mod.id){const t=e.\u0275mod.id;(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${I(e)} vs ${I(e.name)}`)})(t,ta.get(t),e),ta.set(t,e)}let n=e.\u0275mod.imports;n instanceof Function&&(n=n()),n&&n.forEach(e=>t(e))}(t)}create(t){return new ea(this.moduleType,t)}}function ra(t,e){const n=ae();let r;const i=t+20;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new Error(`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=xt(r.type)),s=J(Oo),a=$e(!1),u=o();return $e(a),J(s),function(t,e,n,r){const i=n+20;i>=t.data.length&&(t.data[i]=null,t.blueprint[i]=null),e[i]=r}(n,se(),t,u),u}function ia(t,e,n,r){const i=se(),o=function(t,e){return t[e+20]}(i,t);return function(t,e){return yo.isWrapped(e)&&(e=yo.unwrap(e),t[ie.lFrame.bindingIndex]=br),e}(i,function(t,e){return t[1].data[e+20].pure}(i,t)?function(t,e,n,r,i,o,s){const a=e+n;return function(t,e,n,r){const i=bo(t,e,n);return bo(t,e+1,r)||i}(t,a,i,o)?function(t,e,n){return t[e]=n}(t,a+2,s?r.call(s,i,o):r(i,o)):function(t,e){const n=t[e];return n===br?void 0:n}(t,a+2)}(i,function(){const t=ie.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),e,o.transform,n,r,o):o.transform(n,r))}const oa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function sa(){return this._results[go()]()}class aa{constructor(){this.dirty=!0,this._results=[],this.changes=new oa,this.length=0;const t=go(),e=aa.prototype;e[t]||(e[t]=sa)}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t){this._results=function t(e,n){void 0===n&&(n=e);for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?(n===e&&(n=e.slice(0,r)),t(i,n)):n!==e&&n.push(i)}return n}(t),this.dirty=!1,this.length=this._results.length,this.last=this._results[this.length-1],this.first=this._results[0]}notifyOnChanges(){this.changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ua{constructor(t){this.queryList=t,this.matches=null}clone(){return new ua(this.queryList)}setDirty(){this.queryList.setDirty()}}class ca{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new ca(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==ba(t,e).matches&&this.queries[e].setDirty()}}class la{constructor(t,e,n,r=null){this.predicate=t,this.descendants=e,this.isStatic=n,this.read=r}}class ha{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new ha(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class fa{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new fa(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&!1===this.metadata.descendants){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&4===n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,da(e,i)),this.matchTNodeWithReadOption(t,e,sn(e,t,i,!1,!1))}else n===Ps?0===e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,sn(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===cs||r===Ds||r===Ps&&0===e.type)this.addMatch(e.index,-2);else{const n=sn(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function da(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function pa(t,e,n,r){return-1===n?function(t,e){return 3===t.type||4===t.type?Bi(cs,t,e):0===t.type?zi(Ps,cs,t,e):null}(e,t):-2===n?function(t,e,n){return n===cs?Bi(cs,e,t):n===Ps?zi(Ps,cs,e,t):n===Ds?Gi(Ds,cs,e,t):void 0}(t,e,r):an(t,t[1],n,e)}function ga(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:pa(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function ya(t){const e=se(),n=ae(),r=ye();ve(r+1);const i=ba(n,r);if(t.dirty&&Jt(e)===i.metadata.isStatic){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?function t(e,n,r,i){const o=e.queries.getByIndex(r),s=o.matches;if(null!==s){const a=ga(e,n,o,r);for(let e=0;e<s.length;e+=2){const r=s[e];if(r>0)i.push(a[e/2]);else{const o=s[e+1],a=n[-r];for(let e=10;e<a.length;e++){const n=a[e];n[17]===n[3]&&t(n[1],n,o,i)}if(null!==a[9]){const e=a[9];for(let n=0;n<e.length;n++){const r=e[n];t(r[1],r,o,i)}}}}}return i}(n,e,r,[]):ga(n,e,i,r);t.reset(o),t.notifyOnChanges()}return!0}return!1}function va(t,e,n,r){!function(t,e,n,r,i,o,s,a){t.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new ha),t.queries.track(new fa(e,n))}(t,new la(n,r,!1,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(t.contentQueries.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(t,a)),function(t,e){const n=new aa;zr(t,e,n,n.destroy),null===e[19]&&(e[19]=new ca),e[19].queries.push(new ua(n))}(t,e)}(ae(),se(),e,n,r,0,ue(),t)}function ma(){return t=se(),e=ye(),t[19].queries[e].queryList;var t,e}function ba(t,e){return t.queries.getByIndex(e)}function _a(t=p.Default){const e=Wi(!0);if(null!=e||t&p.Optional)return e;throw new Error("No provider for ChangeDetectorRef!")}const wa=new G("Application Initializer");let Oa=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();jo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(et(wa,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Ea=new G("AppId"),Ca={provide:Ea,useFactory:function(){return`${Sa()}${Sa()}${Sa()}`},deps:[]};function Sa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ta=new G("Platform Initializer"),Ia=new G("Platform ID"),xa=new G("appBootstrapListener");let ja=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Aa=new G("LocaleId"),Na=new G("DefaultCurrencyCode");class ka{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Pa=function(t){return new na(t)},Ra=Pa,Da=function(t){return Promise.resolve(Pa(t))},La=function(t){const e=Pa(t),n=Qe(jt(t).declarations).reduce((t,e)=>{const n=It(e);return n&&t.push(new qs(n)),t},[]);return new ka(e,n)},Ma=La,Fa=function(t){return Promise.resolve(La(t))};let Ua=(()=>{class t{constructor(){this.compileModuleSync=Ra,this.compileModuleAsync=Da,this.compileModuleAndAllComponentsSync=Ma,this.compileModuleAndAllComponentsAsync=Fa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Va=(()=>Promise.resolve(0))();function qa(t){"undefined"==typeof Zone?Va.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ha{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new oa(!1),this.onMicrotaskEmpty=new oa(!1),this.onStable=new oa(!1),this.onError=new oa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched(),this._nesting=0,this._outer=this._inner=Zone.current,Zone.wtfZoneSpec&&(this._inner=this._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(this._inner=this._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(this._inner=this._inner.fork(Zone.longStackTraceZoneSpec)),this.shouldCoalesceEventChangeDetection=e,this.lastRequestAnimationFrameId=-1,this.nativeRequestAnimationFrame=function(){let t=M.requestAnimationFrame,e=M.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(M,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Wa(t),Ga(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Wa(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Qa(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),Ka(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Qa(t),e.invoke(r,i,o,s,a)}finally{Ka(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Wa(t),Ga(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(this)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ha.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ha.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,za,Ba,Ba);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Ba(){}const za={};function Ga(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Wa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Qa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ka(t){t._nesting--,Ga(t)}class $a{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new oa,this.onMicrotaskEmpty=new oa,this.onStable=new oa,this.onError=new oa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Ya=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ha.assertNotInAngularZone(),qa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())qa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(et(Ha))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),Xa=(()=>{class t{constructor(){this._applications=new Map,eu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return eu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class Za{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ja(t){eu=t}let tu,eu=new Za;const nu=new G("AllowMultipleToken");class ru{constructor(t,e){this.name=t,this.token=e}}function iu(t,e,n=[]){const r="Platform: "+e,i=new G(r);return(e=[])=>{let o=ou();if(!o||o.injector.get(nu,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Yi,useValue:"platform"});!function(t){if(tu&&!tu.destroyed&&!tu.injector.get(nu,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");tu=t.get(su);const e=t.get(Ta,null);e&&e.forEach(t=>t())}(lo.create({providers:t,name:r}))}return function(t){const e=ou();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ou(){return tu&&!tu.destroyed?tu:null}let su=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new $a:("zone.js"===t?void 0:t)||new Ha({enableLongStackTrace:Pn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Ha,useValue:n}];return n.run(()=>{const e=lo.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(yn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>cu(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return jo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Oa);return t.runInitializers(),t.donePromise.then(()=>(Js(i.injector.get(Aa,"en-US")||"en-US"),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=au({},e);return function(t,e,n){const r=new na(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(uu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${I(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(et(lo))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function au(t,e){return Array.isArray(e)?e.reduce(au,t):Object.assign(Object.assign({},t),e)}let uu=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=Pn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),l=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ha.assertNotInAngularZone(),qa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ha.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,l.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof ss?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(ot),i=n.create(lo.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Ya,null);return o&&i.injector.get(Xa).registerApplication(i.location.nativeElement,o),this._loadComponent(i),Pn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;cu(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(xa,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),cu(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(et(Ha),et(ja),et(lo),et(yn),et(us),et(Oa))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function cu(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class lu{}class hu{}const fu={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let du=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||fu}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>pu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>pu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(et(Ua),et(hu,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function pu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const gu=function(t){return null},yu=iu(null,"core",[{provide:Ia,useValue:"unknown"},{provide:su,deps:[lo]},{provide:Xa,deps:[]},{provide:ja,deps:[]}]),vu=[{provide:uu,useClass:uu,deps:[Ha,ja,lo,yn,us,Oa]},{provide:Vs,deps:[Ha],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Oa,useClass:Oa,deps:[[new h,wa]]},{provide:Ua,useClass:Ua,deps:[]},Ca,{provide:xs,useFactory:function(){return Ns},deps:[]},{provide:js,useFactory:function(){return ks},deps:[]},{provide:Aa,useFactory:function(t){return Js(t=t||"undefined"!=typeof $localize&&$localize.locale||"en-US"),t},deps:[[new l(Aa),new h,new d]]},{provide:Na,useValue:"USD"}];let mu=(()=>{class t{constructor(t){}}return t.\u0275mod=Ot({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(et(uu))},providers:vu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},l7GE:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");class i extends r.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}},lJxs:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",(function(){return r}))},ngJS:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return l}));var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return d}));var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return E})),n.d(e,"d",(function(){return M})),n.d(e,"e",(function(){return i})),n.d(e,"f",(function(){return o})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"i",(function(){return k})),n.d(e,"j",(function(){return F})),n.d(e,"k",(function(){return l})),n.d(e,"l",(function(){return h})),n.d(e,"m",(function(){return H})),n.d(e,"n",(function(){return d})),n.d(e,"o",(function(){return N})),n.d(e,"p",(function(){return y})),n.d(e,"q",(function(){return v})),n.d(e,"r",(function(){return b})),n.d(e,"s",(function(){return R})),n.d(e,"t",(function(){return _})),n.d(e,"u",(function(){return p})),n.d(e,"v",(function(){return g})),n.d(e,"w",(function(){return O})),n.d(e,"x",(function(){return m})),n.d(e,"y",(function(){return w})),n.d(e,"z",(function(){return A})),n.d(e,"A",(function(){return I})),n.d(e,"B",(function(){return D})),n.d(e,"C",(function(){return L})),n.d(e,"D",(function(){return P})),n.d(e,"E",(function(){return W})),n.d(e,"F",(function(){return G})),n.d(e,"G",(function(){return x})),n.d(e,"H",(function(){return q})),n.d(e,"I",(function(){return B})),n.d(e,"J",(function(){return z}));var r=n("uXP2"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var f=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function d(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(d())}function g(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function m(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return d().indexOf("Electron/")>=0}function _(){var t=d();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return d().indexOf("MSAppHost/")>=0}function O(){return!1}var E=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?S(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new E(i,a,r);return u},t}();function S(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var T=/\{\$([^}]+)}/g;function I(t){return JSON.parse(t)}function x(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=I(c(o[0])||""),n=I(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},A=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},N=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function R(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function D(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function L(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var M=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function F(t,e){var n=new U(t,e);return n.subscribe.bind(n)}var U=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function V(){}var q=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function H(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function B(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(H(t,e,r)+"must be a valid function.")}function z(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(H(t,e,r)+"must be a valid context object.")}var G=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},W=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i)},quSY:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_unsubscribe:a,_subscriptions:c}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(a))try{a.call(this)}catch(l){e=l instanceof s?u(l.errors):[l]}if(Object(r.a)(c)){let t=-1,n=c.length;for(;++t<n;){const n=c[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(u(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return b})),n.d(e,"c",(function(){return m})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return C})),n.d(e,"g",(function(){return w})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return y})),n.d(e,"j",(function(){return O}));var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.a){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule((function(e){r.runGuarded(()=>{t.apply(this,[e])})}),e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],y=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),v=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},m=new u.q("angularfire2.app.options"),b=new u.q("angularfire2.app.nameOrConfig"),_=new u.O("6.1.4");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const S={provide:class{},useFactory:w,deps:[m,u.z,[new u.A,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",_.full,t.toString()),c.a.registerVersion("angular",u.N.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:m,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275mod=u.Gb({type:t}),t.\u0275inj=u.Fb({factory:function(e){return new(e||t)(u.Ob(u.B))},providers:[S]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",(function(){return y}));var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function y(t,e=0){return function(n){return n.lift(new v(t,e))}}class v{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},uXP2:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return h}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function h(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},vkgz:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class l extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new f(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const h=(()=>{const t=l.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class f extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function d(){return new r.a}function p(){return t=>{return a()((e=d,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,h);return r.source=t,r.subjectFactory=n,r})(t));var e}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",(function(){return r}))},zIRd:function(t,e,n){"use strict";var r,i,o=n("uXP2"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(c.join(" "))}o(new a.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.2.9",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||"[DEFAULT]",!Object(s.i)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return d.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.l)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var b=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",(function(t){return new y(t)}),"PRIVATE")),t.registerVersion(h,"0.6.15",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyAR0B8gHHGunkPi-QFLEhYoOT9SRqhaxys",authDomain:"fastmed-c2511.firebaseapp.com",projectId:"fastmed-c2511",storageBucket:"fastmed-c2511.appspot.com",messagingSenderId:"452216551733",appId:"1:452216551733:web:a9461f3ec481d298d7347c",measurementId:"G-TV79WY5G6H"};let o=null;function s(){return o}const a=new r.q("DocumentToken");let u=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:c,token:t,providedIn:"platform"}),t})();function c(){return Object(r.Ob)(h)}const l=new r.q("Location Initialized");let h=(()=>{class t extends u{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=s().getLocation(),this._history=s().getHistory()}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){s().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){f()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){f()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(a))},t.\u0275prov=Object(r.Eb)({factory:d,token:t,providedIn:"platform"}),t})();function f(){return!!window.history.pushState}function d(){return new h(Object(r.Ob)(a))}function p(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function g(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function y(t){return t&&"?"!==t[0]?"?"+t:t}let v=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Eb)({factory:m,token:t,providedIn:"root"}),t})();function m(t){const e=Object(r.Ob)(a).location;return new _(Object(r.Ob)(u),e&&e.origin||"")}const b=new r.q("appBaseHref");let _=(()=>{class t extends v{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return p(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(u),r.Ob(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends v{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=p(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(u),r.Ob(b,8))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),O=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=g(C(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+y(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,C(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+y(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(v),r.Ob(u))},t.normalizeQueryParams=y,t.joinWithSlash=p,t.stripTrailingSlash=g,t.\u0275prov=Object(r.Eb)({factory:E,token:t,providedIn:"root"}),t})();function E(){return new O(Object(r.Ob)(v),Object(r.Ob)(u))}function C(t){return t.replace(/\/index.html$/,"")}const S={ADP:[void 0,void 0,0],AFN:[void 0,void 0,0],ALL:[void 0,void 0,0],AMD:[void 0,void 0,2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09f3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,"\u0440.",2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xa5","\xa5"],COP:[void 0,"$",2],CRC:[void 0,"\u20a1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010d",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xa3"],ESP:[void 0,"\u20a7",0],EUR:["\u20ac"],FJD:[void 0,"$"],FKP:[void 0,"\xa3"],GBP:["\xa3"],GEL:[void 0,"\u20be"],GIP:[void 0,"\xa3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20aa"],INR:["\u20b9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xa5",void 0,0],KHR:[void 0,"\u17db"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20a9",0],KRW:["\u20a9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20b8"],LAK:[void 0,"\u20ad",0],LBP:[void 0,"L\xa3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20ae",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20a6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:[void 0,"\u20b1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20b2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20bd"],RUR:[void 0,"\u0440."],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xa3"],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xa3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xa3",0],THB:[void 0,"\u0e3f"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20ba"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20b4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20ab",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["CFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xa4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]};var T=function(t){return t[t.Decimal=0]="Decimal",t[t.Percent=1]="Percent",t[t.Currency=2]="Currency",t[t.Scientific=3]="Scientific",t}({}),I=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({}),x=function(t){return t[t.Decimal=0]="Decimal",t[t.Group=1]="Group",t[t.List=2]="List",t[t.PercentSign=3]="PercentSign",t[t.PlusSign=4]="PlusSign",t[t.MinusSign=5]="MinusSign",t[t.Exponential=6]="Exponential",t[t.SuperscriptingExponent=7]="SuperscriptingExponent",t[t.PerMille=8]="PerMille",t[t[1/0]=9]="Infinity",t[t.NaN=10]="NaN",t[t.TimeSeparator=11]="TimeSeparator",t[t.CurrencyDecimal=12]="CurrencyDecimal",t[t.CurrencyGroup=13]="CurrencyGroup",t}({});function j(t,e){const n=Object(r.ib)(t),i=n[r.Z.NumberSymbols][e];if(void 0===i){if(e===x.CurrencyDecimal)return n[r.Z.NumberSymbols][x.Decimal];if(e===x.CurrencyGroup)return n[r.Z.NumberSymbols][x.Group]}return i}const A=r.lb,N=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function k(t){const e=parseInt(t);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+t);return e}class P{}let R=(()=>{class t extends P{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(A(e||this.locale)(t)){case I.Zero:return"zero";case I.One:return"one";case I.Two:return"two";case I.Few:return"few";case I.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.u))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class D{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let L=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.U)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new D(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new M(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new M(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.P),r.Ib(r.K),r.Ib(r.s))},t.\u0275dir=r.Db({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class M{constructor(t,e){this.record=t,this.view=e}}let F=(()=>{class t{constructor(t,e="USD"){this._locale=t,this._defaultCurrencyCode=e}transform(e,n,i="symbol",o,s){if(function(t){return null==t||""===t||t!=t}(e))return null;s=s||this._locale,"boolean"==typeof i&&(console&&console.warn&&console.warn('Warning: the currency pipe has been changed in Angular v5. The symbolDisplay option (third parameter) is now a string instead of a boolean. The accepted values are "code", "symbol" or "symbol-narrow".'),i=i?"symbol":"code");let a=n||this._defaultCurrencyCode;"code"!==i&&(a="symbol"===i||"symbol-narrow"===i?function(t,e,n="en"){const i=function(t){return Object(r.ib)(t)[r.Z.Currencies]}(n)[t]||S[t]||[],o=i[1];return"narrow"===e&&"string"==typeof o?o:i[0]||t}(a,"symbol"===i?"wide":"narrow",s):i);try{return function(t,e,n,i,o){const s=function(t,e="-"){const n={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=t.split(";"),i=r[0],o=r[1],s=-1!==i.indexOf(".")?i.split("."):[i.substring(0,i.lastIndexOf("0")+1),i.substring(i.lastIndexOf("0")+1)],a=s[0],u=s[1]||"";n.posPre=a.substr(0,a.indexOf("#"));for(let l=0;l<u.length;l++){const t=u.charAt(l);"0"===t?n.minFrac=n.maxFrac=l+1:"#"===t?n.maxFrac=l+1:n.posSuf+=t}const c=a.split(",");if(n.gSize=c[1]?c[1].length:0,n.lgSize=c[2]||c[1]?(c[2]||c[1]).length:0,o){const t=i.length-n.posPre.length-n.posSuf.length,e=o.indexOf("#");n.negPre=o.substr(0,e).replace(/'/g,""),n.negSuf=o.substr(e+t).replace(/'/g,"")}else n.negPre=e+n.posPre,n.negSuf=n.posSuf;return n}(function(t,e){return Object(r.ib)(t)[r.Z.NumberFormats][e]}(e,T.Currency),j(e,x.MinusSign));return s.minFrac=function(t){let e;const n=S[t];return n&&(e=n[2]),"number"==typeof e?e:2}(i),s.maxFrac=s.minFrac,function(t,e,n,r,i,o,s=!1){let a="",u=!1;if(isFinite(t)){let c=function(t){let e,n,r,i,o,s=Math.abs(t)+"",a=0;for((n=s.indexOf("."))>-1&&(s=s.replace(".","")),(r=s.search(/e/i))>0?(n<0&&(n=r),n+=+s.slice(r+1),s=s.substring(0,r)):n<0&&(n=s.length),r=0;"0"===s.charAt(r);r++);if(r===(o=s.length))e=[0],n=1;else{for(o--;"0"===s.charAt(o);)o--;for(n-=r,e=[],i=0;r<=o;r++,i++)e[i]=Number(s.charAt(r))}return n>22&&(e=e.splice(0,21),a=n-1,n=1),{digits:e,exponent:a,integerLen:n}}(t);s&&(c=function(t){if(0===t.digits[0])return t;const e=t.digits.length-t.integerLen;return t.exponent?t.exponent+=2:(0===e?t.digits.push(0,0):1===e&&t.digits.push(0),t.integerLen+=2),t}(c));let l=e.minInt,h=e.minFrac,f=e.maxFrac;if(o){const t=o.match(N);if(null===t)throw new Error(o+" is not a valid digit info");const e=t[1],n=t[3],r=t[5];null!=e&&(l=k(e)),null!=n&&(h=k(n)),null!=r?f=k(r):null!=n&&h>f&&(f=h)}!function(t,e,n){if(e>n)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${n}).`);let r=t.digits,i=r.length-t.integerLen;const o=Math.min(Math.max(e,i),n);let s=o+t.integerLen,a=r[s];if(s>0){r.splice(Math.max(t.integerLen,s));for(let t=s;t<r.length;t++)r[t]=0}else{i=Math.max(0,i),t.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let t=1;t<s;t++)r[t]=0}if(a>=5)if(s-1<0){for(let e=0;e>s;e--)r.unshift(0),t.integerLen++;r.unshift(1),t.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let u=0!==o;const c=e+t.integerLen,l=r.reduceRight((function(t,e,n,r){return r[n]=(e+=t)<10?e:e-10,u&&(0===r[n]&&n>=c?r.pop():u=!1),e>=10?1:0}),0);l&&(r.unshift(l),t.integerLen++)}(c,h,f);let d=c.digits,p=c.integerLen;const g=c.exponent;let y=[];for(u=d.every(t=>!t);p<l;p++)d.unshift(0);for(;p<0;p++)d.unshift(0);p>0?y=d.splice(p,d.length):(y=d,d=[0]);const v=[];for(d.length>=e.lgSize&&v.unshift(d.splice(-e.lgSize,d.length).join(""));d.length>e.gSize;)v.unshift(d.splice(-e.gSize,d.length).join(""));d.length&&v.unshift(d.join("")),a=v.join(j(n,r)),y.length&&(a+=j(n,i)+y.join("")),g&&(a+=j(n,x.Exponential)+"+"+g)}else a=j(n,x.Infinity);return a=t<0&&!u?e.negPre+a+e.negSuf:e.posPre+a+e.posSuf,a}(t,s,e,x.CurrencyGroup,x.CurrencyDecimal,o).replace("\xa4",n).replace("\xa4","").trim()}(function(t){if("string"==typeof t&&!isNaN(Number(t)-parseFloat(t)))return Number(t);if("number"!=typeof t)throw new Error(t+" is not a number");return t}(e),s,a,n,o)}catch(u){throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.tb)(t)}'`)}(t,u.message)}}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.u),r.Ib(r.k))},t.\u0275pipe=r.Hb({name:"currency",type:t,pure:!0}),t})(),U=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[{provide:P,useClass:R}]}),t})();function V(t){return"server"===t}let q=(()=>{class t{}return t.\u0275prov=Object(r.Eb)({token:t,providedIn:"root",factory:()=>new H(Object(r.Ob)(a),window,Object(r.Ob)(r.m))}),t})();class H{constructor(t,e,n){this.document=t,this.window=e,this.errorHandler=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.scrollX,this.window.scrollY]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(this.supportsScrolling()){const e=this.document.getElementById(t)||this.document.getElementsByName(t)[0];e&&this.scrollToElement(e)}}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.window||!this.window.scrollTo)return!1;const t=B(this.window.history)||B(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window.scrollTo}catch(t){return!1}}}function B(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class z extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new z,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=W||(W=document.querySelector("base"),W)?W.getAttribute("href"):null;return null==e?null:(n=e,G||(G=document.createElement("a")),G.setAttribute("href",n),"/"===G.pathname.charAt(0)?G.pathname:"/"+G.pathname);var n}resetBaseElement(){W=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let G,W=null;const Q=new r.q("TRANSITION_ID"),K=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[Q,a,r.r],multi:!0}];class ${static init(){Object(r.W)(new $)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach((function(t){t.whenStable(o)}))})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const Y=new r.q("EventManagerPlugins");let X=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Y),r.Ob(r.z))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let J=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),tt=(()=>{class t extends J{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},nt=/%COMP%/g;function rt(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?rt(t,i,n):(i=i.replace(nt,t),n.push(i))}return n}function it(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let ot=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new st(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.Q.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new at(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case r.Q.Native:case r.Q.ShadowDom:return new ut(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=rt(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(X),r.Ob(tt),r.Ob(r.c))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();class st{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(et[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=et[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=et[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.F.DashCase?t.style.setProperty(e,n,i&r.F.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.F.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,it(n)):this.eventManager.addEventListener(t,e,it(n))}}class at extends st{constructor(t,e,n,r){super(t),this.component=n;const i=rt(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(nt,r+"-"+n.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(nt,t)}(r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ut extends st{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.component=i,this.shadowRoot=i.encapsulation===r.Q.ShadowDom?n.attachShadow({mode:"open"}):n.createShadowRoot(),this.sharedStylesHost.addHost(this.shadowRoot);const o=rt(i.id,i.styles,[]);for(let r=0;r<o.length;r++){const t=document.createElement("style");t.textContent=o[r],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ct=(()=>{class t extends Z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const lt=["alt","control","meta","shift"],ht={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},dt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let pt=(()=>{class t extends Z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(lt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ft.hasOwnProperty(e)&&(e=ft[e]))}return ht[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),lt.forEach(r=>{r!=n&&(0,dt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(a))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const gt=[{provide:r.B,useValue:"browser"},{provide:r.C,useValue:function(){z.makeCurrent(),$.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.sb)(document),document},deps:[]}],yt=Object(r.R)(r.V,"browser",gt),vt=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:Y,useClass:ct,multi:!0,deps:[a,r.z,r.B]},{provide:Y,useClass:pt,multi:!0,deps:[a]},[],{provide:ot,useClass:ot,deps:[X,tt,r.c]},{provide:r.E,useExisting:ot},{provide:J,useExisting:tt},{provide:tt,useClass:tt,deps:[a]},{provide:r.L,useClass:r.L,deps:[r.z]},{provide:X,useClass:X,deps:[Y,r.z]},[]];let mt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:Q,useExisting:r.c},K]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Ob(t,12))},providers:vt,imports:[U,r.f]}),t})();"undefined"!=typeof window&&window;var bt=n("spgP"),_t=n("D0XW"),wt=n("HDdC"),Ot=n("LRne"),Et=n("VRyK"),Ct=n("lJxs"),St=n("w1tV"),Tt=n("l7GE"),It=n("51Dv"),xt=n("ZUHj"),jt=n("Cfvw");function At(t,e){return"function"==typeof e?n=>n.pipe(At((n,r)=>Object(jt.a)(t(n,r)).pipe(Object(Ct.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Nt(t))}class Nt{constructor(t){this.project=t}call(t,e){return e.subscribe(new kt(t,this.project))}}class kt extends Tt.a{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e,t,n)}_innerSub(t,e,n){const r=this.innerSubscription;r&&r.unsubscribe();const i=new It.a(this,e,n),o=this.destination;o.add(i),this.innerSubscription=Object(xt.a)(this,t,void 0,void 0,i),this.innerSubscription!==i&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=null}notifyComplete(t){this.destination.remove(t),this.innerSubscription=null,this.isStopped&&super._complete()}notifyNext(t,e,n,r,i){this.destination.next(e)}}var Pt=n("7o/Q");function Rt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Dt(t,e,n))}}class Dt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Lt(t,this.accumulator,this.seed,this.hasSeed))}}class Lt extends Pt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Mt(t,e){return n=>n.lift(new Ft(t,e))}class Ft{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ut(t,this.compare,this.keySelector))}}class Ut extends Pt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}class Vt{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new qt(t,this.observables,this.project))}}class qt extends Tt.a{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++){let t=e[i];this.add(Object(xt.a)(this,t,t,i))}}notifyNext(t,e,n,r,i){this.values[n]=e;const o=this.toRespond;if(o.length>0){const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Ht{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Bt(t,this.predicate))}}class Bt extends Pt.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}n("6Uf2");var zt=n("XNiG"),Gt=n("pxpQ"),Wt=n("qgXg"),Qt=n("quSY"),Kt=n("9ppp"),$t=n("Ylt2");class Yt extends zt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift(),super.next(t)}nextTimeWindow(t){this._events.push(new Xt(this._getNow(),t)),this._trimBufferThenGetEvents(),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new Kt.a;if(this.isStopped||this.hasError?o=Qt.a.EMPTY:(this.observers.push(t),o=new $t.a(this,t)),r&&t.add(t=new Gt.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Wt.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class Xt{constructor(t,e){this.time=t,this.value=e}}function Zt(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){s++,i&&!a||(a=!1,i=new Yt(t,e,r),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}));const l=i.subscribe(this);this.add(()=>{s--,l.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const Jt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function te(t,e){return function(n){return n.lift(new ee(t,e))}}class ee{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new ne(t,this.predicate,this.thisArg))}}class ne extends Pt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}const re=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var ie=n("EY2u");function oe(t){return e=>0===t?Object(ie.b)():e.lift(new se(t))}class se{constructor(t){if(this.total=t,this.total<0)throw new re}call(t,e){return e.subscribe(new ae(t,this.total))}}class ae extends Pt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function ue(t=null){return e=>e.lift(new ce(t))}class ce{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new le(t,this.defaultValue))}}class le extends Pt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function he(t=pe){return e=>e.lift(new fe(t))}class fe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new de(t,this.errorFactory))}}class de extends Pt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(fy){t=fy}this.destination.error(t)}}}function pe(){return new Jt}var ge=n("SpAZ");function ye(t,e){const n=arguments.length>=2;return r=>r.pipe(t?te((e,n)=>t(e,n,r)):ge.a,oe(1),n?ue(e):he(()=>new Jt))}function ve(t,e){return e?At(()=>t,e):At(()=>t)}var me=n("tf+s");const be=new r.q("angularfire2.auth.use-emulator"),_e=new r.q("angularfire2.auth.settings"),we=new r.q("angularfire2.auth.tenant-id"),Oe=new r.q("angularfire2.auth.langugage-code"),Ee=new r.q("angularfire2.auth.use-device-language"),Ce=new r.q("angularfire.auth.persistence");let Se=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new bt.d(i),f=Object(bt.h)(h),d=new zt.a,p=Object(Ot.a)(void 0).pipe(Object(Gt.b)(h.outsideAngular),At(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Ct.a)(()=>Object(bt.g)(t,i,e)),Object(Ct.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(bt.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Zt({bufferSize:1,refCount:!1}));if(V(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(Ot.a)(null);else{p.pipe(ye()).subscribe();const t=p.pipe(At(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Zt({bufferSize:1,refCount:!1})),e=t=>new wt.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(At(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(At(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(ve(n),Object(me.a)(h.outsideAngular),Object(Gt.b)(h.insideAngular)),this.user=t.pipe(ve(r),Object(me.a)(h.outsideAngular),Object(Gt.b)(h.insideAngular)),this.idToken=this.user.pipe(At(t=>t?Object(jt.a)(t.getIdToken()):Object(Ot.a)(null))),this.idTokenResult=this.user.pipe(At(t=>t?Object(jt.a)(t.getIdTokenResult()):Object(Ot.a)(null))),this.credential=Object(Et.a)(t,d,this.authState.pipe(te(t=>!t))).pipe(Object(Ct.a)(t=>(null==t?void 0:t.user)?t:null),Object(me.a)(h.outsideAngular),Object(Gt.b)(h.insideAngular))}return Object(bt.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(bt.c),r.Ob(bt.b,8),r.Ob(r.B),r.Ob(r.z),r.Ob(be,8),r.Ob(_e,8),r.Ob(we,8),r.Ob(Oe,8),r.Ob(Ee,8),r.Ob(Ce,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Ob)(bt.c),Object(r.Ob)(bt.b,8),Object(r.Ob)(r.B),Object(r.Ob)(r.z),Object(r.Ob)(be,8),Object(r.Ob)(_e,8),Object(r.Ob)(we,8),Object(r.Ob)(Oe,8),Object(r.Ob)(Ee,8),Object(r.Ob)(Ce,8))},token:t,providedIn:"any"}),t})(),Te=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Se]}),t})();var Ie=n("Jgta");function xe(t){return null==t}function je(t){return"function"==typeof t.set}function Ae(t,e){return je(e)?e:t.ref(e)}function Ne(t,e){if("string"==typeof t)return e.stringCase();if(je(t))return e.firebaseCase();if(function(t){return"function"==typeof t.exportVal}(t))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function ke(t,e,n="on",r=_t.a){return new wt.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(Ct.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(St.a)())}function Pe(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Re(t,e){const{payload:n,prevKey:r,key:i}=e,o=Pe(t,i),s=function(t,e){if(xe(e))return 0;{const n=Pe(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function De(t){return(xe(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Le(t,e,n){return function(t,e,n){return ke(t,"value","once",n).pipe(At(r=>{const i=[Object(Ot.a)(r)];return e.forEach(e=>i.push(ke(t,e,"on",n))),Object(Et.a)(...i).pipe(Rt(Re,[]))}),Mt())}(t,e=De(e),n)}function Me(t,e,n){const r=(e=De(e)).map(e=>ke(t,e,"on",n));return Object(Et.a)(...r)}function Fe(t,e){return function(n,r){return Ne(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Ue(t,e){return function(){return ke(t,"value","on",e)}}const Ve=new r.q("angularfire2.realtimeDatabaseURL"),qe=new r.q("angularfire2.database.use-emulator");let He=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new bt.d(i),this.keepUnstableUntilFirst=Object(bt.h)(this.schedulers);const a=o,u=Object(bt.g)(t,i,e);!Ie.a.auth&&s&&Object(bt.j)(),this.database=Object(bt.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Ae(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Fe(r,"update"),set:Fe(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Ne(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Le(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Me(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return ke(t,"value","on",e).pipe(Object(Ct.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new Vt(t,n))}}(e),Object(Ct.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Ht(r))),Object(Ct.a)(t=>t.actions));var r}(t,Me(t,e).pipe(Rt((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Le(t,r,n).pipe(Object(Ct.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Ae(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Ue(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ue(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(Ct.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(bt.c),r.Ob(bt.b,8),r.Ob(Ve,8),r.Ob(r.B),r.Ob(r.z),r.Ob(qe,8),r.Ob(be,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Ob)(bt.c),Object(r.Ob)(bt.b,8),Object(r.Ob)(Ve,8),Object(r.Ob)(r.B),Object(r.Ob)(r.z),Object(r.Ob)(qe,8),Object(r.Ob)(be,8))},token:t,providedIn:"any"}),t})(),Be=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[He]}),t})();var ze=n("bHdf");function Ge(){return Object(ze.a)(1)}function We(...t){return Ge()(Object(Ot.a)(...t))}var Qe=n("z+Ro");function Ke(...t){const e=t[t.length-1];return Object(Qe.a)(e)?(t.pop(),n=>We(t,n,e)):e=>We(t,e)}function $e(){return t=>t.lift(new Ye)}class Ye{call(t,e){return e.subscribe(new Xe(t))}}class Xe extends Pt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}var Ze=n("zIRd"),Je=n("q/0M"),tn=n("qOnz"),en=function(t,e){return(en=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function nn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var rn,on="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},sn=sn||{},an=on||self;function un(){}function cn(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ln(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var hn="closure_uid_"+(1e9*Math.random()>>>0),fn=0;function dn(t,e,n){return t.call.apply(t.bind,arguments)}function pn(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function gn(t,e,n){return(gn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?dn:pn).apply(null,arguments)}function yn(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function vn(){return Date.now()}function mn(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function bn(){this.j=this.j,this.i=this.i}bn.prototype.j=!1,bn.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,hn)&&t[hn]||(t[hn]=++fn)}(this)},bn.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _n=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},wn=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function On(t){return Array.prototype.concat.apply([],arguments)}function En(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Cn(t){return/^[\s\xa0]*$/.test(t)}var Sn,Tn=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function In(t,e){return-1!=t.indexOf(e)}function xn(t,e){return t<e?-1:t>e?1:0}t:{var jn=an.navigator;if(jn){var An=jn.userAgent;if(An){Sn=An;break t}}Sn=""}function Nn(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function kn(t){var e={};for(var n in t)e[n]=t[n];return e}var Pn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rn(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Pn.length;o++)n=Pn[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Dn(t){return Dn[" "](t),t}Dn[" "]=un;var Ln,Mn,Fn=In(Sn,"Opera"),Un=In(Sn,"Trident")||In(Sn,"MSIE"),Vn=In(Sn,"Edge"),qn=Vn||Un,Hn=In(Sn,"Gecko")&&!(In(Sn.toLowerCase(),"webkit")&&!In(Sn,"Edge"))&&!(In(Sn,"Trident")||In(Sn,"MSIE"))&&!In(Sn,"Edge"),Bn=In(Sn.toLowerCase(),"webkit")&&!In(Sn,"Edge");function zn(){var t=an.document;return t?t.documentMode:void 0}t:{var Gn="",Wn=(Mn=Sn,Hn?/rv:([^\);]+)(\)|;)/.exec(Mn):Vn?/Edge\/([\d\.]+)/.exec(Mn):Un?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Mn):Bn?/WebKit\/(\S+)/.exec(Mn):Fn?/(?:Version)[ \/]?(\S+)/.exec(Mn):void 0);if(Wn&&(Gn=Wn?Wn[1]:""),Un){var Qn=zn();if(null!=Qn&&Qn>parseFloat(Gn)){Ln=String(Qn);break t}}Ln=Gn}var Kn={};function $n(t){return function(t,e){var n=Kn;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Tn(String(Ln)).split("."),r=Tn(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=xn(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||xn(0==s[2].length,0==a[2].length)||xn(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}var Yn=an.document&&Un&&(zn()||parseInt(Ln,10))||void 0,Xn=!Un||9<=Number(Yn),Zn=Un&&!$n("9"),Jn=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{an.addEventListener("test",un,e),an.removeEventListener("test",un,e)}catch(n){}return t}();function tr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function er(t,e){if(tr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Hn){t:{try{Dn(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:nr[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}tr.prototype.b=function(){this.defaultPrevented=!0},mn(er,tr);var nr={2:"touch",3:"pen",4:"mouse"};er.prototype.b=function(){er.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Zn)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var rr="closure_listenable_"+(1e6*Math.random()|0),ir=0;function or(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++ir,this.Y=this.Z=!1}function sr(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ar(t){this.src=t,this.a={},this.b=0}function ur(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_n(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(sr(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function cr(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ar.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=cr(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new or(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var lr="closure_lm_"+(1e6*Math.random()|0),hr={};function fr(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}return r=_r(r),e&&e[rr]?e.wa(n,r,ln(i)?!!i.capture:!!i,o):dr(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)fr(t,e[o],n,r,i);return null}return n=_r(n),t&&t[rr]?t.va(e,n,ln(r)?!!r.capture:!!r,i):dr(t,e,n,!1,r,i)}function dr(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ln(i)?!!i.capture:!!i;if(s&&!Xn)return null;var a=mr(t);if(a||(t[lr]=a=new ar(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=vr,e=Xn?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Jn||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gr(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pr(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[rr])ur(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gr(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=mr(e))?(ur(n,t),0==n.b&&(n.src=null,e[lr]=null)):sr(t)}}}function gr(t){return t in hr?hr[t]:hr[t]="on"+t}function yr(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&pr(t),n.call(r,e)}function vr(t,e){if(t.Y)return!0;if(!Xn){if(!e)t:{e=["window","event"];for(var n=an,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return yr(t,e=new er(e,this))}return yr(t,new er(e,this))}function mr(t){return(t=t[lr])instanceof ar?t:null}var br="__closure_events_fn_"+(1e9*Math.random()>>>0);function _r(t){return"function"==typeof t?t:(t[br]||(t[br]=function(e){return t.handleEvent(e)}),t[br])}function wr(){bn.call(this),this.c=new ar(this),this.J=this,this.C=null}function Or(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new tr(e,t);else if(e instanceof tr)e.target=e.target||t;else{var i=e;Rn(e=new tr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=Er(s,r,!0,e)&&i}if(i=Er(s=e.a=t,r,!0,e)&&i,i=Er(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Er(s=e.a=n[o],r,!1,e)&&i}function Er(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ur(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}mn(wr,bn),wr.prototype[rr]=!0,(rn=wr.prototype).addEventListener=function(t,e,n,r){fr(this,t,e,n,r)},rn.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=ln(i)?!!i.capture:!!i,r=_r(r),e&&e[rr]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=cr(s=e.a[n],r,i,o))&&(sr(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):e&&(e=mr(e))&&(n=e.a[n.toString()],e=-1,n&&(e=cr(n,r,i,o)),(r=-1<e?n[e]:null)&&pr(r))}(this,t,e,n,r)},rn.G=function(){if(wr.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)sr(n[r]);delete e.a[t],e.b--}}this.C=null},rn.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},rn.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Cr=an.JSON.stringify;function Sr(){this.b=this.a=null}var Tr,Ir=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())((function(){return new jr}),(function(t){t.reset()}));function xr(){var t=Pr,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function jr(){this.next=this.b=this.a=null}function Ar(t){an.setTimeout((function(){throw t}),0)}function Nr(t,e){Tr||function(){var t=an.Promise.resolve(void 0);Tr=function(){t.then(Rr)}}(),kr||(Tr(),kr=!0),Pr.add(t,e)}Sr.prototype.add=function(t,e){var n=Ir.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},jr.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},jr.prototype.reset=function(){this.next=this.b=this.a=null};var kr=!1,Pr=new Sr;function Rr(){for(var t;t=xr();){try{t.a.call(t.b)}catch(n){Ar(n)}var e=Ir;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}kr=!1}function Dr(t,e){wr.call(this),this.b=t||1,this.a=e||an,this.f=gn(this.Za,this),this.g=vn()}function Lr(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Mr(t,e,n){if("function"==typeof t)n&&(t=gn(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=gn(t.handleEvent,t)}return 2147483647<Number(e)?-1:an.setTimeout(t,e||0)}function Fr(t){t.a=Mr((function(){t.a=null,t.c&&(t.c=!1,Fr(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}mn(Dr,wr),(rn=Dr.prototype).aa=!1,rn.M=null,rn.Za=function(){if(this.aa){var t=vn()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Or(this,"tick"),this.aa&&(Lr(this),this.start()))}},rn.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=vn())},rn.G=function(){Dr.X.G.call(this),Lr(this),delete this.a};var Ur=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}en(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Fr(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(an.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(bn);function Vr(t){bn.call(this),this.b=t,this.a={}}mn(Vr,bn);var qr=[];function Hr(t,e,n,r){Array.isArray(n)||(n&&(qr[0]=n.toString()),n=qr);for(var i=0;i<n.length;i++){var o=fr(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Br(t){Nn(t.a,(function(t,e){this.a.hasOwnProperty(e)&&pr(t)}),t),t.a={}}function zr(){this.a=!0}function Gr(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Cr(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Vr.prototype.G=function(){Vr.X.G.call(this),Br(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zr.prototype.info=function(){};var Wr={},Qr=null;function Kr(){return Qr=Qr||new wr}function $r(t){tr.call(this,Wr.Fa,t)}function Yr(t){var e=Kr();Or(e,new $r(e,t))}function Xr(t,e){tr.call(this,Wr.STAT_EVENT,t),this.stat=e}function Zr(t){var e=Kr();Or(e,new Xr(e,t))}function Jr(t){tr.call(this,Wr.Ga,t)}function ti(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return an.setTimeout((function(){t()}),e)}Wr.Fa="serverreachability",mn($r,tr),Wr.STAT_EVENT="statevent",mn(Xr,tr),Wr.Ga="timingevent",mn(Jr,tr);var ei={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ni={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function ri(){}function ii(){}ri.prototype.a=null;var oi,si={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ai(){tr.call(this,"d")}function ui(){tr.call(this,"c")}function ci(){}function li(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Vr(this),this.P=hi,this.R=new Dr(t=qn?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}mn(ai,tr),mn(ui,tr),mn(ci,ri),oi=new ci;var hi=45e3,fi={},di={};function pi(t,e,n){t.H=1,t.i=Li(Ai(e)),t.j=n,t.I=!0,gi(t,null)}function gi(t,e){t.u=vn(),mi(t),t.l=Ai(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),$i(n.b,"t",r),t.D=0,t.a=zo(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ur(gn(t.Ca,t,t.a),t.O)),Hr(t.J,t.a,"readystatechange",t.Xa),e=t.B?kn(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Yr(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function yi(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=vi(t,n);if(i==di){4==e&&(t.h=4,Zr(14),r=!1),Gr(t.c,t.f,null,"[Incomplete Response]");break}if(i==fi){t.h=4,Zr(15),Gr(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Gr(t.c,t.f,i,null),Ei(t,i)}4==e&&0==n.length&&(t.h=1,Zr(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lo(e),e.F=!0,Zr(11))):(Gr(t.c,t.f,n,"[Invalid Chunked Response]"),Oi(t),wi(t))}function vi(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?di:(n=Number(e.substring(n,r)),isNaN(n)?fi:(r+=1)+n>e.length?di:(e=e.substr(r,n),t.D=r+n,e))}function mi(t){t.T=vn()+t.P,bi(t,t.P)}function bi(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ti(gn(t.Va,t),e)}function _i(t){t.o&&(an.clearTimeout(t.o),t.o=null)}function wi(t){0==t.g.v||t.A||Uo(t.g,t)}function Oi(t){_i(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Lr(t.R),Br(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Ei(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||no(n.b,t)))if(n.I=t.N,!t.C&&no(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Sg){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Fo(n),Io(n)}Do(n),Zr(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ti(gn(n.Sa,n),6e3));if(1>=eo(n.b)&&n.ea){try{n.ea()}catch(Sg){}n.ea=void 0}}else qo(n,11)}else if((t.C||n.a==t)&&Fo(n),!Cn(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(In(l,"spdy")||In(l,"quic")||In(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(ro(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Di(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=vn()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=Bo(u,u.C?u.ga:null,u.fa),d.C){io(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(_i(p),mi(p)),u.a=d}else Ro(u);0<n.g.length&&Ao(n)}else"stop"!=i[0]&&"close"!=i[0]||qo(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?qo(n,7):To(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Yr(4)}catch(Sg){}}function Ci(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(cn(t)||"string"==typeof t)wn(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(cn(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(cn(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Si(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Si)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ti(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Ii(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Ii(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Ii(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(rn=li.prototype).setTimeout=function(t){this.P=t},rn.Xa=function(t){t=t.target;var e=this.F;e&&3==Oo(t)?e.f():this.Ca(t)},rn.Ca=function(t){try{if(t==this.a)t:{var e=Oo(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!qn&&!this.a.$())){this.A||4!=e||7==n||Yr(8==n||0>=r?3:2),_i(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Cn(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Zr(12),Oi(this),wi(this);break t}Gr(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ei(this,u)}this.I?(yi(this,e,o),qn&&this.b&&3==e&&(Hr(this.J,this.R,"tick",this.Wa),this.R.start())):(Gr(this.c,this.f,o,null),Ei(this,o)),4==e&&Oi(this),this.b&&!this.A&&(4==e?Uo(this.g,this):(this.b=!1,mi(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Zr(12)):(this.h=0,Zr(13)),Oi(this),wi(this)}}}catch(c){}},rn.Wa=function(){if(this.a){var t=Oo(this.a),e=this.a.$();this.D<e.length&&(_i(this),yi(this,t,e),this.b&&4!=t&&mi(this))}},rn.cancel=function(){this.A=!0,Oi(this)},rn.Va=function(){this.o=null;var t=vn();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Yr(3),Zr(17)),Oi(this),this.h=2,wi(this)):bi(this,this.T-t)},(rn=Si.prototype).K=function(){Ti(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},rn.L=function(){return Ti(this),this.a.concat()},rn.get=function(t,e){return Ii(this.b,t)?this.b[t]:e},rn.set=function(t,e){Ii(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},rn.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xi=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ji(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ji){this.a=void 0!==e?e:t.a,Ni(this,t.f),this.j=t.j,ki(this,t.c),Pi(this,t.h),this.g=t.g,e=t.b;var n=new Gi;n.c=e.c,e.a&&(n.a=new Si(e.a),n.b=e.b),Ri(this,n),this.i=t.i}else t&&(n=String(t).match(xi))?(this.a=!!e,Ni(this,n[1]||"",!0),this.j=Mi(n[2]||""),ki(this,n[3]||"",!0),Pi(this,n[4]),this.g=Mi(n[5]||"",!0),Ri(this,n[6]||"",!0),this.i=Mi(n[7]||"")):(this.a=!!e,this.b=new Gi(null,this.a))}function Ai(t){return new ji(t)}function Ni(t,e,n){t.f=n?Mi(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ki(t,e,n){t.c=n?Mi(e,!0):e}function Pi(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Ri(t,e,n){e instanceof Gi?(t.b=e,function(t,e){e&&!t.f&&(Wi(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Qi(this,e),$i(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Fi(e,Bi)),t.b=new Gi(e,t.a))}function Di(t,e,n){t.b.set(e,n)}function Li(t){return Di(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^vn()).toString(36)),t}function Mi(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fi(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ui),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ui(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ji.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fi(e,Vi,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Fi(e,Vi,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fi(n,"/"==n.charAt(0)?Hi:qi,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Fi(n,zi)),t.join("")};var Vi=/[#\/\?@]/g,qi=/[#\?:]/g,Hi=/[#\?]/g,Bi=/[#\?@]/g,zi=/#/g;function Gi(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Wi(t){t.a||(t.a=new Si,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qi(t,e){Wi(t),e=Yi(t,e),Ii(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ii((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ti(t)))}function Ki(t,e){return Wi(t),e=Yi(t,e),Ii(t.a.b,e)}function $i(t,e,n){Qi(t,e),0<n.length&&(t.c=null,t.a.set(Yi(t,e),En(n)),t.b+=n.length)}function Yi(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(rn=Gi.prototype).add=function(t,e){Wi(this),this.c=null,t=Yi(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},rn.forEach=function(t,e){Wi(this),this.a.forEach((function(n,r){wn(n,(function(n){t.call(e,n,r,this)}),this)}),this)},rn.L=function(){Wi(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},rn.K=function(t){Wi(this);var e=[];if("string"==typeof t)Ki(this,t)&&(e=On(e,this.a.get(Yi(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=On(e,t[n])}return e},rn.set=function(t,e){return Wi(this),this.c=null,Ki(this,t=Yi(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},rn.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},rn.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Xi=function(){return function(t,e){this.b=t,this.a=e}}();function Zi(t){this.g=t||Ji,t=an.PerformanceNavigationTiming?0<(t=an.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(an.ia&&an.ia.ya&&an.ia.ya()&&an.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Ji=10;function to(t){return!!t.b||!!t.a&&t.a.size>=t.f}function eo(t){return t.b?1:t.a?t.a.size:0}function no(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ro(t,e){t.a?t.a.add(e):t.b=e}function io(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function oo(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=nn(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return En(t.c)}function so(){}function ao(){this.a=new so}function uo(t,e,n){var r=n||"";try{Ci(t,(function(t,n){var i=t;ln(t)&&(i=Cr(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(fy){throw e.push(r+"type="+encodeURIComponent("_badmap")),fy}}function co(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Zi.prototype.cancel=function(){var t,e;if(this.c=oo(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=nn(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},so.prototype.stringify=function(t){return an.JSON.stringify(t,void 0)},so.prototype.parse=function(t){return an.JSON.parse(t,void 0)};var lo=an.JSON.parse;function ho(t){wr.call(this),this.headers=new Si,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=fo,this.D=this.F=!1}mn(ho,wr);var fo="",po=/^https?$/i,go=["POST","PUT"];function yo(t){return"content-type"==t.toLowerCase()}function vo(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,mo(t),_o(t)}function mo(t){t.u||(t.u=!0,Or(t,"complete"),Or(t,"error"))}function bo(t){if(t.b&&void 0!==sn&&(!t.s[1]||4!=Oo(t)||2!=t.W()))if(t.l&&4==Oo(t))Mr(t.za,0,t);else if(Or(t,"readystatechange"),4==Oo(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(xi)[1]||null;if(!o&&an.self&&an.self.location){var s=an.self.location.protocol;o=s.substr(0,s.length-1)}i=!po.test(o?o.toLowerCase():"")}e=i}if(e)Or(t,"complete"),Or(t,"success");else{t.h=6;try{var a=2<Oo(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",mo(t)}}finally{_o(t)}}}function _o(t,e){if(t.a){wo(t);var n=t.a,r=t.s[0]?un:null;t.a=null,t.s=null,e||Or(t,"ready");try{n.onreadystatechange=r}catch(fy){}}}function wo(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(an.clearTimeout(t.m),t.m=null)}function Oo(t){return t.a?t.a.readyState:0}function Eo(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Nn(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Di(t,e,n))}function Co(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function So(t){this.pa=0,this.g=[],this.c=new zr,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Co("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Co("baseRetryDelayMs",5e3,t),this.Ra=Co("retryDelaySeedMs",1e4,t),this.Ma=Co("forwardChannelMaxRetries",2,t),this.ma=Co("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Zi(t&&t.concurrentRequestLimit),this.ka=new ao,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function To(t){if(xo(t),3==t.v){var e=t.R++,n=Ai(t.B);Di(n,"SID",t.J),Di(n,"RID",e),Di(n,"TYPE","terminate"),ko(t,n),(e=new li(t,t.c,e,void 0)).H=2,e.i=Li(Ai(n)),n=!1,an.navigator&&an.navigator.sendBeacon&&(n=an.navigator.sendBeacon(e.i.toString(),"")),!n&&an.Image&&((new Image).src=e.i,n=!0),n||(e.a=zo(e.g,null),e.a.ba(e.i)),e.u=vn(),mi(e)}Ho(t)}function Io(t){t.a&&(Lo(t),t.a.cancel(),t.a=null)}function xo(t){Io(t),t.j&&(an.clearTimeout(t.j),t.j=null),Fo(t),t.b.cancel(),t.h&&("number"==typeof t.h&&an.clearTimeout(t.h),t.h=null)}function jo(t,e){t.g.push(new Xi(t.Oa++,e)),3==t.v&&Ao(t)}function Ao(t){to(t.b)||t.h||(t.h=!0,Nr(t.Ba,t),t.u=0)}function No(t,e){var n;n=e?e.f:t.R++;var r=Ai(t.B);Di(r,"SID",t.J),Di(r,"RID",n),Di(r,"AID",t.P),ko(t,r),t.i&&t.l&&Eo(r,t.i,t.l),n=new li(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Po(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ro(t.b,n),pi(n,r,e)}function ko(t,e){t.f&&Ci({},(function(t,n){Di(e,n,t)}))}function Po(t,e,n){n=Math.min(t.g.length,n);var r=t.f?gn(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{uo(l,s,"req"+c+"_")}catch(Ts){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ro(t){t.a||t.j||(t.T=1,Nr(t.Aa,t),t.o=0)}function Do(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=ti(gn(t.Aa,t),Vo(t,t.o)),t.o++,0))}function Lo(t){null!=t.s&&(an.clearTimeout(t.s),t.s=null)}function Mo(t){t.a=new li(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ai(t.la);Di(e,"RID","rpc"),Di(e,"SID",t.J),Di(e,"CI",t.H?"0":"1"),Di(e,"AID",t.P),ko(t,e),Di(e,"TYPE","xmlhttp"),t.i&&t.l&&Eo(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Li(Ai(e)),n.j=null,n.I=!0,gi(n,t)}function Fo(t){null!=t.m&&(an.clearTimeout(t.m),t.m=null)}function Uo(t,e){var n=null;if(t.a==e){Fo(t),Lo(t),t.a=null;var r=2}else{if(!no(t.b,e))return;n=e.s,io(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=vn()-e.u;var i=t.u;Or(r=Kr(),new Jr(r,n,e,i)),Ao(t)}else Ro(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(eo(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=ti(gn(t.Ba,t,e),Vo(t,t.u)),t.u++,0)))}(t,e)||2==r&&Do(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:qo(t,5);break;case 4:qo(t,10);break;case 3:qo(t,6);break;default:qo(t,2)}}function Vo(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function qo(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=gn(t.Ya,t);n||(n=new ji("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||Ni(n,"https"),Li(n)),function(t,e){var n=new zr;if(an.Image){var r=new Image;r.onload=yn(co,n,r,"TestLoadImage: loaded",!0,e),r.onerror=yn(co,n,r,"TestLoadImage: error",!1,e),r.onabort=yn(co,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=yn(co,n,r,"TestLoadImage: timeout",!1,e),an.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zr(2);t.v=0,t.f&&t.f.ra(e),Ho(t),xo(t)}function Ho(t){t.v=0,t.I=-1,t.f&&(0==oo(t.b).length&&0==t.g.length||(t.b.c.length=0,En(t.g),t.g.length=0),t.f.qa())}function Bo(t,e,n){var r=function(t){return t instanceof ji?Ai(t):new ji(t,void 0)}(n);if(""!=r.c)e&&ki(r,e+"."+r.c),Pi(r,r.h);else{var i=an.location;r=function(t,e,n,r){var i=new ji(null,void 0);return t&&Ni(i,t),e&&ki(i,e),n&&Pi(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Nn(t.V,(function(t,e){Di(r,e,t)})),n=t.na,(e=t.A)&&n&&Di(r,e,n),Di(r,"VER",t.ha),ko(t,r),r}function zo(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ho(t.Na)).F=t.C,e}function Go(){}function Wo(){if(Un&&!(10<=Number(Yn)))throw Error("Environmental error: no available transport.")}function Qo(t,e){wr.call(this),this.a=new So(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Cn(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Cn(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Yo(this)}function Ko(t){ai.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function $o(){ui.call(this),this.status=1}function Yo(t){this.a=t}(rn=ho.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:oi),this.a.onreadystatechange=gn(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void vo(this,o)}t=n||"";var i=new Si(this.headers);r&&Ci(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=yo,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=an.FormData&&t instanceof an.FormData,!(0<=_n(go,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{wo(this),0<this.o&&((this.D=function(t){return Un&&$n(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=gn(this.xa,this)):this.m=Mr(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){vo(this,o)}},rn.xa=function(){void 0!==sn&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Or(this,"timeout"),this.abort(8))},rn.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Or(this,"complete"),Or(this,"abort"),_o(this))},rn.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),_o(this,!0)),ho.X.G.call(this)},rn.za=function(){this.j||(this.A||this.l||this.g?bo(this):this.Ua())},rn.Ua=function(){bo(this)},rn.W=function(){try{return 2<Oo(this)?this.a.status:-1}catch(Mn){return-1}},rn.$=function(){try{return this.a?this.a.responseText:""}catch(Mn){return""}},rn.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),lo(e)}},rn.ua=function(){return this.h},rn.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(rn=So.prototype).ha=8,rn.v=1,rn.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new li(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Rn(r=kn(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Po(this,n,e),Di(i=Ai(this.B),"RID",t),Di(i,"CVER",22),this.A&&Di(i,"X-HTTP-Session-Id",this.A),ko(this,i),this.i&&r&&Eo(i,this.i,r),ro(this.b,n),this.Ia&&Di(i,"TYPE","init"),this.da?(Di(i,"$req",e),Di(i,"SID","null"),n.U=!0,pi(n,i,null)):pi(n,i,e),this.v=2}}else 3==this.v&&(t?No(this,t):0==this.g.length||to(this.b)||No(this))},rn.Aa=function(){if(this.j=null,Mo(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ti(gn(this.Ta,this),t)}},rn.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Zr(10),Io(this),Mo(this))},rn.Sa=function(){null!=this.m&&(this.m=null,Io(this),Do(this),Zr(19))},rn.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Zr(2)):(this.c.info("Failed to ping google.com"),Zr(1))},(rn=Go.prototype).ta=function(){},rn.sa=function(){},rn.ra=function(){},rn.qa=function(){},rn.Ja=function(){},Wo.prototype.a=function(t,e){return new Qo(t,e)},mn(Qo,wr),Qo.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Zr(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Bo(t,null,t.fa),Ao(t)},Qo.prototype.close=function(){To(this.a)},Qo.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,jo(this.a,e)}else this.l?((e={}).__data__=Cr(t),jo(this.a,e)):jo(this.a,t)},Qo.prototype.G=function(){this.a.f=null,delete this.f,To(this.a),delete this.a,Qo.X.G.call(this)},mn(Ko,ai),mn($o,ui),mn(Yo,Go),Yo.prototype.ta=function(){Or(this.a,"a")},Yo.prototype.sa=function(t){Or(this.a,new Ko(t))},Yo.prototype.ra=function(t){Or(this.a,new $o(t))},Yo.prototype.qa=function(){Or(this.a,"b")},Wo.prototype.createWebChannel=Wo.prototype.a,Qo.prototype.send=Qo.prototype.h,Qo.prototype.open=Qo.prototype.g,Qo.prototype.close=Qo.prototype.close,ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,ni.COMPLETE="complete",ii.EventType=si,si.OPEN="a",si.CLOSE="b",si.ERROR="c",si.MESSAGE="d",wr.prototype.listen=wr.prototype.va,ho.prototype.listenOnce=ho.prototype.wa,ho.prototype.getLastError=ho.prototype.Qa,ho.prototype.getLastErrorCode=ho.prototype.ua,ho.prototype.getStatus=ho.prototype.W,ho.prototype.getResponseJson=ho.prototype.Pa,ho.prototype.getResponseText=ho.prototype.$,ho.prototype.send=ho.prototype.ba;var Xo=ei,Zo=ni,Jo=Wr,ts=ii,es=ho,ns=n("uXP2"),rs=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},is=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),os=new Je.b("@firebase/firestore");function ss(){return os.logLevel}function as(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(os.logLevel<=Je.a.DEBUG){var r=e.map(ls);os.debug.apply(os,Object(ns.g)(["Firestore (8.2.9): "+t],r))}}function us(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(os.logLevel<=Je.a.ERROR){var r=e.map(ls);os.error.apply(os,Object(ns.g)(["Firestore (8.2.9): "+t],r))}}function cs(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(os.logLevel<=Je.a.WARN){var r=e.map(ls);os.warn.apply(os,Object(ns.g)(["Firestore (8.2.9): "+t],r))}}function ls(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(fy){return t}}function hs(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.2.9) INTERNAL ASSERTION FAILED: "+t;throw us(e),new Error(e)}function fs(t,e){t||hs()}function ds(t,e){return t}function ps(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var gs=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=ps(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ys(t,e){return t<e?-1:t>e?1:0}function vs(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ms(t){return t+"\0"}var bs=function(){function t(t){this.h=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.h)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},t.prototype.l=function(){return 2*this.h.length},t.prototype._=function(t){return ys(this.h,t.h)},t.prototype.isEqual=function(t){return this.h===t.h},t}();bs.T=new bs("");var _s={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ws=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(ns.c)(e,t),e}(Error),Os=function(){function t(t){this.I=t}return t.fromBase64String=function(e){try{return new t(bs.fromBase64String(e))}catch(e){throw new ws(_s.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(bs.fromUint8Array(e))},t.prototype.toBase64=function(){return this.I.toBase64()},t.prototype.toUint8Array=function(){return this.I.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.I.isEqual(t.I)},t}(),Es=function(){function t(t){this.uid=t}return t.prototype.m=function(){return null!=this.uid},t.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Es.UNAUTHENTICATED=new Es(null),Es.R=new Es("google-credentials-uid"),Es.P=new Es("first-party-uid");var Cs=function(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t},Ss=function(){function t(){this.V=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.p=function(){},t.prototype.v=function(t){this.V=t,t(Es.UNAUTHENTICATED)},t.prototype.S=function(){this.V=null},t}(),Ts=function(){function t(t){var e=this;this.D=null,this.currentUser=Es.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then((function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.N,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.N!==e?(as("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(fs("string"==typeof n.accessToken),new Cs(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.p=function(){this.forceRefresh=!0},t.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},t.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},t.prototype.$=function(){var t=this.auth&&this.auth.getUid();return fs(null===t||"string"==typeof t),new Es(t)},t}(),Is=function(){function t(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=Es.P}return Object.defineProperty(t.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),xs=function(){function t(t,e){this.F=t,this.O=e}return t.prototype.getToken=function(){return Promise.resolve(new Is(this.F,this.O))},t.prototype.v=function(t){t(Es.P)},t.prototype.S=function(){},t.prototype.p=function(){},t}(),js=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}return t.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},t}();js.q=-1;var As=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ws(_s.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ws(_s.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ws(_s.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ws(_s.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.U=function(t){return this.seconds===t.seconds?ys(this.nanoseconds,t.nanoseconds):ys(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ns=function(){function t(t){this.timestamp=t}return t.K=function(e){return new t(e)},t.min=function(){return new t(new As(0,0))},t.prototype._=function(t){return this.timestamp.U(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.j=function(){return this.timestamp},t}(),ks=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&hs(),void 0===n?n=t.length-e:n>t.length-e&&hs(),this.segments=t,this.offset=e,this.G=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.H(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.J(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.Y=function(t){return this.J(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},t.prototype.Z=function(){return this.segments[this.offset]},t.prototype.tt=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.et=function(){return 0===this.length},t.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},t.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Ps=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.prototype.rt=function(){return this.it().join("/")},e.prototype.toString=function(){return this.rt()},e.ot=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ws(_s.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.ct=function(){return new e([])},e}(ks),Rs=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ds=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.J=function(t,n,r){return new e(t,n,r)},e.at=function(t){return Rs.test(t)},e.prototype.rt=function(){return this.it().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.at(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.rt()},e.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},e.ht=function(){return new e(["__name__"])},e.lt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ws(_s.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ws(_s.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ws(_s.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ws(_s.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.ct=function(){return new e([])},e}(ks),Ls=function(){function t(t){this.path=t}return t._t=function(e){return new t(Ps.ot(e))},t.ft=function(e){return new t(Ps.ot(e).Y(5))},t.prototype.dt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Ps.H(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.H=function(t,e){return Ps.H(t.path,e.path)},t.wt=function(t){return t.length%2==0},t.Et=function(e){return new t(new Ps(e.slice()))},t}();function Ms(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Fs(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Us(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Vs=function(){function t(t){this.fields=t,t.sort(Ds.H)}return t.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},t.prototype.isEqual=function(t){return vs(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),qs=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Hs(t){if(fs(!!t),"string"==typeof t){var e=0,n=qs.exec(t);if(fs(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Bs(t.seconds),nanos:Bs(t.nanos)}}function Bs(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function zs(t){return"string"==typeof t?bs.fromBase64String(t):bs.fromUint8Array(t)}function Gs(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ws(t){var e=Hs(t.mapValue.fields.__local_write_time__.timestampValue);return new As(e.seconds,e.nanos)}function Qs(t){return null==t}function Ks(t){return 0===t&&1/t==-1/0}function $s(t){return"number"==typeof t&&Number.isInteger(t)&&!Ks(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Gs(t)?4:10:hs()}function Xs(t,e){var n=Ys(t);if(n!==Ys(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ws(t).isEqual(Ws(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Hs(t.timestampValue),r=Hs(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return zs(t.bytesValue).isEqual(zs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Bs(t.geoPointValue.latitude)===Bs(e.geoPointValue.latitude)&&Bs(t.geoPointValue.longitude)===Bs(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bs(t.integerValue)===Bs(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Bs(t.doubleValue),r=Bs(e.doubleValue);return n===r?Ks(n)===Ks(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return vs(t.arrayValue.values||[],e.arrayValue.values||[],Xs);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Ms(n)!==Ms(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Xs(n[i],r[i])))return!1;return!0}(t,e);default:return hs()}}function Zs(t,e){return void 0!==(t.values||[]).find((function(t){return Xs(t,e)}))}function Js(t,e){var n=Ys(t),r=Ys(e);if(n!==r)return ys(n,r);switch(n){case 0:return 0;case 1:return ys(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Bs(t.integerValue||t.doubleValue),r=Bs(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ta(t.timestampValue,e.timestampValue);case 4:return ta(Ws(t),Ws(e));case 5:return ys(t.stringValue,e.stringValue);case 6:return function(t,e){var n=zs(t),r=zs(e);return n._(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ys(n[i],r[i]);if(0!==o)return o}return ys(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ys(Bs(t.latitude),Bs(e.latitude));return 0!==n?n:ys(Bs(t.longitude),Bs(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Js(n[i],r[i]);if(o)return o}return ys(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ys(r[s],o[s]);if(0!==a)return a;var u=Js(n[r[s]],i[o[s]]);if(0!==u)return u}return ys(r.length,o.length)}(t.mapValue,e.mapValue);default:throw hs()}}function ta(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ys(t,e);var n=Hs(t),r=Hs(e),i=ys(n.seconds,r.seconds);return 0!==i?i:ys(n.nanos,r.nanos)}function ea(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=Hs(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?zs(e.bytesValue).toBase64():"referenceValue"in e?Ls.ft(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var s=o[i];r?r=!1:n+=",",n+=s+":"+t(e.fields[s])}return n+"}"}(e.mapValue):hs();var n}(t)}function na(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function ra(t){return!!t&&"integerValue"in t}function ia(t){return!!t&&"arrayValue"in t}function oa(t){return!!t&&"nullValue"in t}function sa(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function aa(t){return!!t&&"mapValue"in t}var ua=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!aa(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},t.prototype.isEqual=function(t){return Xs(this.proto,t.proto)},t}(),ca=function(){function t(t){void 0===t&&(t=ua.empty()),this.It=t,this.At=new Map}return t.prototype.set=function(t,e){return this.Rt(t,e),this},t.prototype.delete=function(t){return this.Rt(t,null),this},t.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Ys(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.tt(),e)},t.prototype.Pt=function(){var t=this.yt(Ds.ct(),this.At);return null!=t?new ua(t):this.It},t.prototype.yt=function(t,e){var n=this,r=!1,i=this.It.field(t),o=aa(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var s=n.yt(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function la(t){var e=[];return Fs(t.fields||{},(function(t,n){var r=new Ds([t]);if(aa(n)){var i=la(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)})),new Vs(e)}var ha=function(t,e){this.key=t,this.version=e},fa=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).gt=r,o.Vt=!!i.Vt,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(ns.c)(e,t),e.prototype.field=function(t){return this.gt.field(t)},e.prototype.data=function(){return this.gt},e.prototype.bt=function(){return this.gt.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(ha),da=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(ns.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ha),pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ha),ga=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function ya(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ga(t,e,n,r,i,o,s)}function va(t){var e=ds(t);if(null===e.vt){var n=e.path.rt();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.rt()+t.op.toString()+ea(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.rt()+t.dir}(t)})).join(","),Qs(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Aa(e.startAt)),e.endAt&&(n+="|ub:",n+=Aa(e.endAt)),e.vt=n}return e.vt}function ma(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ka(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Xs(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ra(t.startAt,e.startAt)&&Ra(t.endAt,e.endAt)}function ba(t){return Ls.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var _a=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(ns.c)(e,t),e.create=function(t,n,r){return t.ut()?"in"===n||"not-in"===n?this.St(t,n,r):new wa(t,n,r):"array-contains"===n?new Sa(t,r):"in"===n?new Ta(t,r):"not-in"===n?new Ia(t,r):"array-contains-any"===n?new xa(t,r):new e(t,n,r)},e.St=function(t,e,n){return"in"===e?new Oa(t,n):new Ea(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Dt(Js(e,this.value)):null!==e&&Ys(this.value)===Ys(e)&&this.Dt(Js(e,this.value))},e.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return hs()}},e.prototype.Ct=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),wa=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ls.ft(r.referenceValue),i}return Object(ns.c)(e,t),e.prototype.matches=function(t){var e=Ls.H(t.key,this.key);return this.Dt(e)},e}(_a),Oa=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Ca(0,n),r}return Object(ns.c)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(_a),Ea=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Ca(0,n),r}return Object(ns.c)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(_a);function Ca(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Ls.ft(t.referenceValue)}))}var Sa=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(ns.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return ia(e)&&Zs(e.arrayValue,this.value)},e}(_a),Ta=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(ns.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Zs(this.value.arrayValue,e)},e}(_a),Ia=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(ns.c)(e,t),e.prototype.matches=function(t){if(Zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Zs(this.value.arrayValue,e)},e}(_a),xa=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(ns.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!ia(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Zs(e.value.arrayValue,t)}))},e}(_a),ja=function(t,e){this.position=t,this.before=e};function Aa(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return ea(t)})).join(",")}var Na=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ka(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Pa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.ut()?Ls.H(Ls.ft(s.referenceValue),n.key):Js(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ra(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Xs(t.position[n],e.position[n]))return!1;return!0}var Da=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null};function La(t,e,n,r,i,o,s,a){return new Da(t,e,n,r,i,o,s,a)}function Ma(t){return new Da(t)}function Fa(t){return!Qs(t.limit)&&"F"===t.limitType}function Ua(t){return!Qs(t.limit)&&"L"===t.limitType}function Va(t){return t.xt.length>0?t.xt[0].field:null}function qa(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function Ha(t){return null!==t.collectionGroup}function Ba(t){var e=ds(t);if(null===e.Nt){e.Nt=[];var n=qa(e),r=Va(e);if(null!==n&&null===r)n.ut()||e.Nt.push(new Na(n)),e.Nt.push(new Na(Ds.ht(),"asc"));else{for(var i=!1,o=0,s=e.xt;o<s.length;o++){var a=s[o];e.Nt.push(a),a.field.ut()&&(i=!0)}if(!i){var u=e.xt.length>0?e.xt[e.xt.length-1].dir:"asc";e.Nt.push(new Na(Ds.ht(),u))}}}return e.Nt}function za(t){var e=ds(t);if(!e.$t)if("F"===e.limitType)e.$t=ya(e.path,e.collectionGroup,Ba(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ba(e);r<i.length;r++){var o=i[r];n.push(new Na(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new ja(e.endAt.position,!e.endAt.before):null,a=e.startAt?new ja(e.startAt.position,!e.startAt.before):null;e.$t=ya(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.$t}function Ga(t,e,n){return new Da(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Wa(t,e){return ma(za(t),za(e))&&t.limitType===e.limitType}function Qa(t){return va(za(t))+"|lt:"+t.limitType}function Ka(t){return"Query(target="+function(t){var e=t.path.rt();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.rt()+" "+e.op+" "+ea(e.value);var e})).join(", ")+"]"),Qs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.rt()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Aa(t.startAt)),t.endAt&&(e+=", endAt: "+Aa(t.endAt)),"Target("+e+")"}(za(t))+"; limitType="+t.limitType+")"}function $a(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.dt(t.collectionGroup)&&t.path.nt(n):Ls.wt(t.path)?t.path.isEqual(n):t.path.st(n)}(t,e)&&function(t,e){for(var n=0,r=t.xt;n<r.length;n++){var i=r[n];if(!i.field.ut()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Pa(t.startAt,Ba(t),e)||t.endAt&&Pa(t.endAt,Ba(t),e))}(t,e)}function Ya(t){return function(e,n){for(var r=!1,i=0,o=Ba(t);i<o.length;i++){var s=o[i],a=Xa(s,e,n);if(0!==a)return a;r=r||s.field.ut()}return 0}}function Xa(t,e,n){var r=t.field.ut()?Ls.H(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Js(r,i):hs()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return hs()}}var Za=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ns.min()),void 0===o&&(o=Ns.min()),void 0===s&&(s=bs.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.kt=function(e){return new t(this.target,this.targetId,this.Ft,e,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.Mt=function(e,n){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Lt=function(e){return new t(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,e,this.resumeToken)},t}();function Ja(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ks(e)?"-0":e}}function tu(t){return{integerValue:""+t}}function eu(t,e){return $s(e)?tu(e):Ja(t,e)}var nu=function(){this.qt=void 0};function ru(t,e,n){return t instanceof su?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof au?uu(t,e):t instanceof cu?lu(t,e):function(t,e){var n=ou(t,e),r=fu(n)+fu(t.Ut);return ra(n)&&ra(t.Ut)?tu(r):Ja(t.Qt,r)}(t,e)}function iu(t,e,n){return t instanceof au?uu(t,e):t instanceof cu?lu(t,e):n}function ou(t,e){return t instanceof hu?ra(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e}(nu),au=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ns.c)(e,t),e}(nu);function uu(t,e){for(var n=du(e),r=function(t){n.some((function(e){return Xs(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var cu=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(ns.c)(e,t),e}(nu);function lu(t,e){for(var n=du(e),r=function(t){n=n.filter((function(e){return!Xs(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var hu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.Ut=n,r}return Object(ns.c)(e,t),e}(nu);function fu(t){return Bs(t.integerValue||t.doubleValue)}function du(t){return ia(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var pu=function(t,e){this.field=t,this.transform=e},gu=function(t,e){this.version=t,this.transformResults=e},yu=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.Kt=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function vu(t,e){return void 0!==t.updateTime?e instanceof fa&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof fa}var mu=function(){};function bu(t,e,n){return t instanceof Cu?function(t,e,n){var r=t.value;if(n.transformResults){var i=Iu(t.fieldTransforms,e,n.transformResults);r=ju(t.fieldTransforms,r,i)}return new fa(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Su?function(t,e,n){if(!vu(t.jt,e))return new pa(t.key,n.version);var r=Tu(t,e,n.transformResults?Iu(t.fieldTransforms,e,n.transformResults):[]);return new fa(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new da(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function _u(t,e,n){return t instanceof Cu?function(t,e,n){if(!vu(t.jt,e))return e;var r=t.value,i=xu(t.fieldTransforms,n,e);r=ju(t.fieldTransforms,r,i);var o=Eu(e);return new fa(t.key,o,r,{Vt:!0})}(t,e,n):t instanceof Su?function(t,e,n){if(!vu(t.jt,e))return e;var r=Eu(e),i=Tu(t,e,xu(t.fieldTransforms,n,e));return new fa(t.key,r,i,{Vt:!0})}(t,e,n):function(t,e){return vu(t.jt,e)?new da(t.key,Ns.min()):e}(t,e)}function wu(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof fa?e.field(o.field):void 0,a=ou(o.transform,s||null);null!=a&&(n=null==n?(new ca).set(o.field,a):n.set(o.field,a))}return n?n.Pt():null}(t.fieldTransforms,e)}function Ou(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&vs(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof au&&e instanceof au||t instanceof cu&&e instanceof cu?vs(t.elements,e.elements,Xs):t instanceof hu&&e instanceof hu?Xs(t.Ut,e.Ut):t instanceof su&&e instanceof su}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt))}function Eu(t){return t instanceof fa?t.version:Ns.min()}var Cu=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.jt=r,o.fieldTransforms=i,o.type=0,o}return Object(ns.c)(e,t),e}(mu),Su=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.Gt=r,s.jt=i,s.fieldTransforms=o,s.type=1,s}return Object(ns.c)(e,t),e}(mu);function Tu(t,e,n){var r;return r=function(t,e){var n=new ca(e);return t.Gt.fields.forEach((function(e){if(!e.et()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Pt()}(t,r=e instanceof fa?e.data():ua.empty()),ju(t.fieldTransforms,r,n)}function Iu(t,e,n){var r=[];fs(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof fa&&(a=e.field(o.field)),r.push(iu(s,a,n[i]))}return r}function xu(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof fa&&(u=n.field(s.field)),r.push(ru(a,u,e))}return r}function ju(t,e,n){for(var r=new ca(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.Pt()}var Au,Nu,ku=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=2,r.fieldTransforms=[],r}return Object(ns.c)(e,t),e}(mu),Pu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.jt=n,r.type=3,r.fieldTransforms=[],r}return Object(ns.c)(e,t),e}(mu),Ru=function(t){this.count=t};function Du(t){switch(t){case _s.OK:return hs();case _s.CANCELLED:case _s.UNKNOWN:case _s.DEADLINE_EXCEEDED:case _s.RESOURCE_EXHAUSTED:case _s.INTERNAL:case _s.UNAVAILABLE:case _s.UNAUTHENTICATED:return!1;case _s.INVALID_ARGUMENT:case _s.NOT_FOUND:case _s.ALREADY_EXISTS:case _s.PERMISSION_DENIED:case _s.FAILED_PRECONDITION:case _s.ABORTED:case _s.OUT_OF_RANGE:case _s.UNIMPLEMENTED:case _s.DATA_LOSS:return!0;default:return hs()}}function Lu(t){if(void 0===t)return us("GRPC error has no .code"),_s.UNKNOWN;switch(t){case Au.OK:return _s.OK;case Au.CANCELLED:return _s.CANCELLED;case Au.UNKNOWN:return _s.UNKNOWN;case Au.DEADLINE_EXCEEDED:return _s.DEADLINE_EXCEEDED;case Au.RESOURCE_EXHAUSTED:return _s.RESOURCE_EXHAUSTED;case Au.INTERNAL:return _s.INTERNAL;case Au.UNAVAILABLE:return _s.UNAVAILABLE;case Au.UNAUTHENTICATED:return _s.UNAUTHENTICATED;case Au.INVALID_ARGUMENT:return _s.INVALID_ARGUMENT;case Au.NOT_FOUND:return _s.NOT_FOUND;case Au.ALREADY_EXISTS:return _s.ALREADY_EXISTS;case Au.PERMISSION_DENIED:return _s.PERMISSION_DENIED;case Au.FAILED_PRECONDITION:return _s.FAILED_PRECONDITION;case Au.ABORTED:return _s.ABORTED;case Au.OUT_OF_RANGE:return _s.OUT_OF_RANGE;case Au.UNIMPLEMENTED:return _s.UNIMPLEMENTED;case Au.DATA_LOSS:return _s.DATA_LOSS;default:return hs()}}(Nu=Au||(Au={}))[Nu.OK=0]="OK",Nu[Nu.CANCELLED=1]="CANCELLED",Nu[Nu.UNKNOWN=2]="UNKNOWN",Nu[Nu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Nu[Nu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Nu[Nu.NOT_FOUND=5]="NOT_FOUND",Nu[Nu.ALREADY_EXISTS=6]="ALREADY_EXISTS",Nu[Nu.PERMISSION_DENIED=7]="PERMISSION_DENIED",Nu[Nu.UNAUTHENTICATED=16]="UNAUTHENTICATED",Nu[Nu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Nu[Nu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Nu[Nu.ABORTED=10]="ABORTED",Nu[Nu.OUT_OF_RANGE=11]="OUT_OF_RANGE",Nu[Nu.UNIMPLEMENTED=12]="UNIMPLEMENTED",Nu[Nu.INTERNAL=13]="INTERNAL",Nu[Nu.UNAVAILABLE=14]="UNAVAILABLE",Nu[Nu.DATA_LOSS=15]="DATA_LOSS";var Mu=function(){function t(t,e){this.H=t,this.root=e||Uu.EMPTY}return t.prototype.zt=function(e,n){return new t(this.H,this.root.zt(e,n,this.H).copy(null,null,Uu.Ht,null,null))},t.prototype.remove=function(e){return new t(this.H,this.root.remove(e,this.H).copy(null,null,Uu.Ht,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.et=function(){return this.root.et()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.Jt=function(){return this.root.Jt()},t.prototype.Yt=function(){return this.root.Yt()},t.prototype.Xt=function(t){return this.root.Xt(t)},t.prototype.forEach=function(t){this.Xt((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.Xt((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.Zt=function(t){return this.root.Zt(t)},t.prototype.te=function(){return new Fu(this.root,null,this.H,!1)},t.prototype.ee=function(t){return new Fu(this.root,t,this.H,!1)},t.prototype.ne=function(){return new Fu(this.root,null,this.H,!0)},t.prototype.se=function(t){return new Fu(this.root,t,this.H,!0)},t}(),Fu=function(){function t(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}return t.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},t.prototype.ce=function(){return this.re.length>0},t.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},t}(),Uu=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.et=function(){return!1},t.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},t.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},t.prototype.min=function(){return this.left.et()?this:this.left.min()},t.prototype.Jt=function(){return this.min().key},t.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},t.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},t.prototype.he=function(){if(this.left.et())return t.EMPTY;var e=this;return e.left.le()||e.left.left.le()||(e=e._e()),(e=e.copy(null,null,null,e.left.he(),null)).ue()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.et()||i.left.le()||i.left.left.le()||(i=i._e()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.le()&&(i=i.fe()),i.right.et()||i.right.le()||i.right.left.le()||(i=i.de()),0===n(e,i.key)){if(i.right.et())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.he())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.ue()},t.prototype.le=function(){return this.color},t.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},t.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},t.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},t.prototype.we=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.fe=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},t.prototype.Ie=function(){if(this.le()&&this.left.le())throw hs();if(this.right.le())throw hs();var t=this.left.Ie();if(t!==this.right.Ie())throw hs();return t+(this.le()?0:1)},t}();Uu.EMPTY=null,Uu.RED=!0,Uu.Ht=!1,Uu.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw hs()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw hs()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.zt=function(t,e,n){return new Uu(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.et=function(){return!0},t.prototype.Xt=function(t){return!1},t.prototype.Zt=function(t){return!1},t.prototype.Jt=function(){return null},t.prototype.Yt=function(){return null},t.prototype.le=function(){return!1},t.prototype.Te=function(){return!0},t.prototype.Ie=function(){return 0},t}());var Vu=function(){function t(t){this.H=t,this.data=new Mu(this.H)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.Jt()},t.prototype.last=function(){return this.data.Yt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Xt((function(e,n){return t(e),!1}))},t.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(this.H(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Ae=function(t,e){var n;for(n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},t.prototype.Re=function(t){var e=this.data.ee(t);return e.ce()?e.oe().key:null},t.prototype.te=function(){return new qu(this.data.te())},t.prototype.ee=function(t){return new qu(this.data.ee(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.et=function(){return this.data.et()},t.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.te(),r=e.data.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(0!==this.H(i,o))return!1}return!0},t.prototype.it=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.H);return n.data=e,n},t}(),qu=function(){function t(t){this.ye=t}return t.prototype.oe=function(){return this.ye.oe().key},t.prototype.ce=function(){return this.ye.ce()},t}(),Hu=new Mu(Ls.H);function Bu(){return Hu}function zu(){return Bu()}var Gu=new Mu(Ls.H);function Wu(){return Gu}var Qu=new Mu(Ls.H);function Ku(){return Qu}var $u=new Vu(Ls.H);function Yu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=$u,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Xu=new Vu(ys);function Zu(){return Xu}var Ju=function(){function t(t){this.H=t?function(e,n){return t(e,n)||Ls.H(e.key,n.key)}:function(t,e){return Ls.H(t.key,e.key)},this.ge=Wu(),this.Ve=new Mu(this.H)}return t.pe=function(e){return new t(e.H)},t.prototype.has=function(t){return null!=this.ge.get(t)},t.prototype.get=function(t){return this.ge.get(t)},t.prototype.first=function(){return this.Ve.Jt()},t.prototype.last=function(){return this.Ve.Yt()},t.prototype.et=function(){return this.Ve.et()},t.prototype.indexOf=function(t){var e=this.ge.get(t);return e?this.Ve.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Ve.Xt((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Ve.te(),r=e.Ve.te();n.ce();){var i=n.oe().key,o=r.oe().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.H=this.H,r.ge=e,r.Ve=n,r},t}(),tc=function(){function t(){this.be=new Mu(Ls.H)}return t.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);n?0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):hs():this.be=this.be.zt(e,t)},t.prototype.ve=function(){var t=[];return this.be.Xt((function(e,n){t.push(n)})),t},t}(),ec=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}return t.Ne=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ju.pe(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Wa(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),nc=function(){function t(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}return t.Me=function(e,n){var r=new Map;return r.set(e,rc.Le(e,n)),new t(Ns.min(),r,Zu(),Bu(),Yu())},t}(),rc=function(){function t(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}return t.Le=function(e,n){return new t(bs.T,n,Yu(),Yu(),Yu())},t}(),ic=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},oc=function(t,e){this.targetId=t,this.je=e},sc=function(t,e,n,r){void 0===n&&(n=bs.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},ac=function(){function t(){this.Ge=0,this.ze=lc(),this.He=bs.T,this.Je=!1,this.Ye=!0}return Object.defineProperty(t.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),t.prototype.tn=function(t){t.l()>0&&(this.Ye=!0,this.He=t)},t.prototype.en=function(){var t=Yu(),e=Yu(),n=Yu();return this.ze.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:hs()}})),new rc(this.He,this.Je,t,e,n)},t.prototype.nn=function(){this.Ye=!1,this.ze=lc()},t.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},t.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},t.prototype.on=function(){this.Ge+=1},t.prototype.cn=function(){this.Ge-=1},t.prototype.an=function(){this.Ye=!0,this.Je=!0},t}(),uc=function(){function t(t){this.un=t,this.hn=new Map,this.ln=Bu(),this._n=cc(),this.fn=new Vu(ys)}return t.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof fa?this.wn(r,t.We):t.We instanceof da&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.En(r=o[i],t.key,t.We)},t.prototype.Tn=function(t){var e=this;this.In(t,(function(n){var r=e.mn(n);switch(t.state){case 0:e.An(n)&&r.tn(t.resumeToken);break;case 1:r.cn(),r.Xe||r.nn(),r.tn(t.resumeToken);break;case 2:r.cn(),r.Xe||e.removeTarget(n);break;case 3:e.An(n)&&(r.an(),r.tn(t.resumeToken));break;case 4:e.An(n)&&(e.Rn(n),r.tn(t.resumeToken));break;default:hs()}}))},t.prototype.In=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.hn.forEach((function(t,r){n.An(r)&&e(r)}))},t.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,r=this.yn(e);if(r){var i=r.target;if(ba(i))if(0===n){var o=new Ls(i.path);this.En(e,o,new da(o,Ns.min()))}else fs(1===n);else this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e))}},t.prototype.Vn=function(t){var e=this,n=new Map;this.hn.forEach((function(r,i){var o=e.yn(i);if(o){if(r.Be&&ba(o.target)){var s=new Ls(o.target.path);null!==e.ln.get(s)||e.pn(i,s)||e.En(i,s,new da(s,t))}r.Ze&&(n.set(i,r.en()),r.nn())}}));var r=Yu();this._n.forEach((function(t,n){var i=!0;n.Ae((function(t){var n=e.yn(t);return!n||2===n.Ft||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new nc(t,n,this.fn,this.ln,r);return this.ln=Bu(),this._n=cc(),this.fn=new Vu(ys),i},t.prototype.wn=function(t,e){if(this.An(t)){var n=this.pn(t,e.key)?2:0;this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t))}},t.prototype.En=function(t,e,n){if(this.An(t)){var r=this.mn(t);this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n))}},t.prototype.removeTarget=function(t){this.hn.delete(t)},t.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},t.prototype.on=function(t){this.mn(t).on()},t.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new ac,this.hn.set(t,e)),e},t.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new Vu(ys),this._n=this._n.zt(t,e)),e},t.prototype.An=function(t){var e=null!==this.yn(t);return e||as("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},t.prototype.Rn=function(t){var e=this;this.hn.set(t,new ac),this.un.vn(t).forEach((function(n){e.En(t,n,null)}))},t.prototype.pn=function(t,e){return this.un.vn(t).has(e)},t}();function cc(){return new Mu(Ls.H)}function lc(){return new Mu(Ls.H)}var hc={asc:"ASCENDING",desc:"DESCENDING"},fc={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dc=function(t,e){this.t=t,this.Bt=e};function pc(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gc(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function yc(t,e){return pc(t,e.j())}function vc(t){return fs(!!t),Ns.K(function(t){var e=Hs(t);return new As(e.seconds,e.nanos)}(t))}function mc(t,e){return function(t){return new Ps(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).rt()}function bc(t){var e=Ps.ot(t);return fs(Hc(e)),e}function _c(t,e){return mc(t.t,e.path)}function wc(t,e){var n=bc(e);if(n.get(1)!==t.t.projectId)throw new ws(_s.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new ws(_s.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Ls(Sc(n))}function Oc(t,e){return mc(t.t,e)}function Ec(t){var e=bc(t);return 4===e.length?Ps.ct():Sc(e)}function Cc(t){return new Ps(["projects",t.t.projectId,"databases",t.t.database]).rt()}function Sc(t){return fs(t.length>4&&"documents"===t.get(4)),t.Y(5)}function Tc(t,e,n){return{name:_c(t,e),fields:n.proto.mapValue.fields}}function Ic(t,e,n){var r=wc(t,e.name),i=vc(e.updateTime),o=new ua({mapValue:{fields:e.fields}});return new fa(r,i,o,{hasCommittedMutations:!!n})}function xc(t,e){var n;if(e instanceof Cu)n={update:Tc(t,e.key,e.value)};else if(e instanceof ku)n={delete:_c(t,e.key)};else if(e instanceof Su)n={update:Tc(t,e.key,e.data),updateMask:qc(e.Gt)};else{if(!(e instanceof Pu))return hs();n={verify:_c(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof su)return{fieldPath:e.field.rt(),setToServerValue:"REQUEST_TIME"};if(n instanceof au)return{fieldPath:e.field.rt(),appendMissingElements:{values:n.elements}};if(n instanceof cu)return{fieldPath:e.field.rt(),removeAllFromArray:{values:n.elements}};if(n instanceof hu)return{fieldPath:e.field.rt(),increment:n.Ut};throw hs()}(0,t)}))),e.jt.Wt||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:yc(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:hs()}(t,e.jt)),n}function jc(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?yu.updateTime(vc(t.updateTime)):void 0!==t.exists?yu.exists(t.exists):yu.Kt()}(e.currentDocument):yu.Kt(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?(fs("REQUEST_TIME"===e.setToServerValue),n=new su):"appendMissingElements"in e?n=new au(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new cu(e.removeAllFromArray.values||[]):"increment"in e?n=new hu(t,e.increment):hs();var r=Ds.lt(e.fieldPath);return new pu(r,n)}(t,e)})):[];if(e.update){var i=wc(t,e.update.name),o=new ua({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new Vs((t.fieldPaths||[]).map((function(t){return Ds.lt(t)})))}(e.updateMask);return new Su(i,o,s,n,r)}return new Cu(i,o,n,r)}if(e.delete){var a=wc(t,e.delete);return new ku(a,n)}if(e.verify){var u=wc(t,e.verify);return new Pu(u,n)}return hs()}function Ac(t,e){return{documents:[Oc(t,e.path)]}}function Nc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Oc(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Oc(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(sa(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NAN"}};if(oa(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(sa(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NAN"}};if(oa(t.value))return{unaryFilter:{field:Mc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mc(t.field),op:Lc(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:Mc(t.field),direction:Dc(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.Bt||Qs(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Pc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Pc(e.endAt)),n}function kc(t){var e=Ec(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){fs(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=function t(e){return e?void 0!==e.unaryFilter?[Vc(e)]:void 0!==e.fieldFilter?[Uc(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):hs():[]}(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Na(Fc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Qs(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=Rc(n.startAt));var l=null;return n.endAt&&(l=Rc(n.endAt)),La(e,i,a,s,u,"F",c,l)}function Pc(t){return{before:t.before,values:t.position}}function Rc(t){return new ja(t.values||[],!!t.before)}function Dc(t){return hc[t]}function Lc(t){return fc[t]}function Mc(t){return{fieldPath:t.rt()}}function Fc(t){return Ds.lt(t.fieldPath)}function Uc(t){return _a.create(Fc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return hs()}}(t.fieldFilter.op),t.fieldFilter.value)}function Vc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Fc(t.unaryFilter.field);return _a.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Fc(t.unaryFilter.field);return _a.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Fc(t.unaryFilter.field);return _a.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Fc(t.unaryFilter.field);return _a.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return hs()}}function qc(t){var e=[];return t.fields.forEach((function(t){return e.push(t.rt())})),{fieldPaths:e}}function Hc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Bc=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},zc=function(){function t(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t((function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)}),(function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Nn&&hs(),this.Nn=!0,this.xn?this.error?this.$n(n,this.error):this.Fn(e,this.result):new t((function(t,i){r.Dn=function(n){r.Fn(e,n).next(t,i)},r.Cn=function(e){r.$n(n,e).next(t,i)}}))},t.prototype.On=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.kn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Fn=function(e,n){return e?this.kn((function(){return e(n)})):t.resolve(n)},t.prototype.$n=function(e,n){return e?this.kn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.Mn=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.Ln=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.Mn(r)},t}(),Gc=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Bn=new Bc,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){e.error?n.Bn.reject(new Kc(t,e.error)):n.Bn.resolve()},this.transaction.onerror=function(e){var r=Jc(e.target.error);n.Bn.reject(new Kc(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Kc(n,e)}},Object.defineProperty(t.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(as("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Yc(e)},t}(),Wc=function(){function t(e,n,r){this.name=e,this.version=n,this.Un=r,12.2===t.Qn(Object(tn.n)())&&us("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return as("SimpleDb","Removing database:",t),Xc(window.indexedDB.deleteDatabase(t)).On()},t.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(t.Wn())return!0;var e=Object(tn.n)(),n=t.Qn(e),r=0<n&&n<10,i=t.jn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},t.zn=function(t,e){return t.store(e)},t.Qn=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.jn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Hn=function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(as("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Kc(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ws(_s.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Kc(t,n))},i.onupgradeneeded=function(t){as("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Un.Jn(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){as("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return n.Yn(t)}),this.db)]}}))}))},t.prototype.Xn=function(t){this.Yn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(ns.d)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(ns.d)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Hn(t)];case 2:return a.db=h.sent(),e=Gc.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),zc.reject(t)})).On(),u={},s.catch((function(){})),[4,e.qn];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return as("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Qc=function(){function t(t){this.Zn=t,this.ts=!1,this.es=null}return Object.defineProperty(t.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.ts=!0},t.prototype.ss=function(t){this.es=t},t.prototype.delete=function(){return Xc(this.Zn.delete())},t}(),Kc=function(t){function e(e,n){var r=this;return(r=t.call(this,_s.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(ns.c)(e,t),e}(ws);function $c(t){return"IndexedDbTransactionError"===t.name}var Yc=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(as("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(as("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Xc(n)},t.prototype.add=function(t){return as("SimpleDb","ADD",this.store.name,t,t),Xc(this.store.add(t))},t.prototype.get=function(t){var e=this;return Xc(this.store.get(t)).next((function(n){return void 0===n&&(n=null),as("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return as("SimpleDb","DELETE",this.store.name,t),Xc(this.store.delete(t))},t.prototype.count=function(){return as("SimpleDb","COUNT",this.store.name),Xc(this.store.count())},t.prototype.rs=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.os(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.cs=function(t,e){as("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.us=!1;var r=this.cursor(n);return this.os(r,(function(t,e,n){return n.delete()}))},t.prototype.hs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.os(r,e)},t.prototype.ls=function(t){var e=this.cursor({});return new zc((function(n,r){e.onerror=function(t){var e=Jc(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.os=function(t,e){var n=[];return new zc((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Qc(i),s=e(i.primaryKey,i.value,o);if(s instanceof zc){var a=s.catch((function(t){return o.done(),zc.reject(t)}));n.push(a)}o.xn?r():null===o.ns?i.continue():i.continue(o.ns)}else r()}})).next((function(){return zc.Mn(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Xc(t){return new zc((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Jc(t.target.error);n(e)}}))}var Zc=!1;function Jc(t){var e=Wc.Qn(Object(tn.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ws("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Zc||(Zc=!0,setTimeout((function(){throw r}),0)),r}}return t}var tl=function(){function t(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Bc,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch((function(t){}))}return t.Ts=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.Is=setTimeout((function(){return e.As()}),t)},t.prototype.Rs=function(){return this.As()},t.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new ws(_s.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.As=function(){var t=this;this._s.Ps((function(){return null!==t.Is?(t.clearTimeout(),t.op().then((function(e){return t.Es.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},t}();function el(t,e){if(us("AsyncQueue",e+": "+t),$c(t))return new ws(_s.UNAVAILABLE,e+": "+t);throw t}var nl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",rl=function(){function t(){this.ys=[]}return t.prototype.gs=function(t){this.ys.push(t)},t.prototype.Vs=function(){this.ys.forEach((function(t){return t()}))},t}();function il(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=sl(e)),e=ol(t.get(n),e);return sl(e)}function ol(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function sl(t){return t+"\x01\x01"}function al(t){var e=t.length;if(fs(e>=2),2===e)return fs("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Ps.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&hs(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:hs()}o=s+2}return new Ps(r)}var ul=function(t,e){this.seconds=t,this.nanoseconds=e},cl=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};cl.store="owner",cl.key="owner";var ll=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ll.store="mutationQueues",ll.keyPath="userId";var hl=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};hl.store="mutations",hl.keyPath="batchId",hl.userMutationsIndex="userMutationsIndex",hl.userMutationsKeyPath=["userId","batchId"];var fl=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,il(e)]},t.key=function(t,e,n){return[t,il(e),n]},t}();fl.store="documentMutations",fl.PLACEHOLDER=new fl;var dl=function(t,e){this.path=t,this.readTime=e},pl=function(t,e){this.path=t,this.version=e},gl=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gl.store="remoteDocuments",gl.readTimeIndex="readTimeIndex",gl.readTimeIndexPath="readTime",gl.collectionReadTimeIndex="collectionReadTimeIndex",gl.collectionReadTimeIndexPath=["parentPath","readTime"];var yl=function(t){this.byteSize=t};yl.store="remoteDocumentGlobal",yl.key="remoteDocumentGlobalKey";var vl=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};vl.store="targets",vl.keyPath="targetId",vl.queryTargetsIndexName="queryTargetsIndex",vl.queryTargetsKeyPath=["canonicalId","targetId"];var ml=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ml.store="targetDocuments",ml.keyPath=["targetId","path"],ml.documentTargetsIndex="documentTargetsIndex",ml.documentTargetsKeyPath=["path","targetId"];var bl=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};bl.key="targetGlobalKey",bl.store="targetGlobal";var _l=function(t,e){this.collectionId=t,this.parent=e};_l.store="collectionParents",_l.keyPath=["collectionId","parent"];var wl=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};wl.store="clientMetadata",wl.keyPath="clientId";var Ol=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Ol.store="bundles",Ol.keyPath="bundleId";var El=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};El.store="namedQueries",El.keyPath="name";var Cl=Object(ns.g)(Object(ns.g)(Object(ns.g)(Object(ns.g)([ll.store,hl.store,fl.store,gl.store,vl.store,cl.store,bl.store,ml.store],[wl.store]),[yl.store]),[_l.store]),[Ol.store,El.store]),Sl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ps=e,r.bs=n,r}return Object(ns.c)(e,t),e}(rl);function Tl(t,e){var n=ds(t);return Wc.zn(n.ps,e)}var Il=function(){function t(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}return t.prototype.Ss=function(t,e,n){for(var r=n.Ds,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=bu(o,e,r[i]))}return e},t.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=_u(s,e,this.vs));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=_u(s,e,this.vs))}return e},t.prototype.xs=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.Cs(r.key,t.get(r.key));i&&(n=n.zt(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Yu())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&vs(this.mutations,t.mutations,(function(t,e){return Ou(t,e)}))&&vs(this.baseMutations,t.baseMutations,(function(t,e){return Ou(t,e)}))},t}(),xl=function(){function t(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}return t.from=function(e,n,r){fs(e.mutations.length===r.length);for(var i=Ku(),o=e.mutations,s=0;s<o.length;s++)i=i.zt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),jl=function(t){this.Fs=t};function Al(t,e){if(e.document)return Ic(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ls.Et(e.noDocument.path),r=Dl(e.noDocument.readTime);return new da(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Ls.Et(e.unknownDocument.path);return r=Dl(e.unknownDocument.version),new pa(i,r)}return hs()}function Nl(t,e,n){var r=kl(n),i=e.key.path.X().it();if(e instanceof fa){var o=function(t,e){return{name:_c(t,e.key),fields:e.bt().mapValue.fields,updateTime:pc(t,e.version.j())}}(t.Fs,e),s=e.hasCommittedMutations;return new gl(null,null,o,s,r,i)}if(e instanceof da){var a=e.key.path.it(),u=Rl(e.version);return s=e.hasCommittedMutations,new gl(null,new dl(a,u),null,s,r,i)}if(e instanceof pa){var c=e.key.path.it(),l=Rl(e.version);return new gl(new pl(c,l),null,null,!0,r,i)}return hs()}function kl(t){var e=t.j();return[e.seconds,e.nanoseconds]}function Pl(t){var e=new As(t[0],t[1]);return Ns.K(e)}function Rl(t){var e=t.j();return new ul(e.seconds,e.nanoseconds)}function Dl(t){var e=new As(t.seconds,t.nanoseconds);return Ns.K(e)}function Ll(t,e){for(var n=(e.baseMutations||[]).map((function(e){return jc(t.Fs,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return jc(t.Fs,e)})),o=As.fromMillis(e.localWriteTimeMs);return new Il(e.batchId,o,n,i)}function Ml(t){var e,n,r=Dl(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Dl(t.lastLimboFreeSnapshotVersion):Ns.min();return void 0!==t.query.documents?(fs(1===(n=t.query).documents.length),e=za(Ma(Ec(n.documents[0])))):e=function(t){return za(kc(t))}(t.query),new Za(e,t.targetId,0,t.lastListenSequenceNumber,r,i,bs.fromBase64String(t.resumeToken))}function Fl(t,e){var n,r=Rl(e.Ot),i=Rl(e.lastLimboFreeSnapshotVersion);n=ba(e.target)?Ac(t.Fs,e.target):Nc(t.Fs,e.target);var o=e.resumeToken.toBase64();return new vl(e.targetId,va(e.target),r,o,e.sequenceNumber,i,n)}function Ul(t){var e=kc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Ga(e,e.limit,"L"):e}var Vl=function(){function t(){}return t.prototype.Os=function(t,e){return ql(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Dl(e.createTime),version:e.version};var e}))},t.prototype.ks=function(t,e){return ql(t).put({bundleId:(n=e).id,createTime:Rl(vc(n.createTime)),version:n.version});var n},t.prototype.Ms=function(t,e){return Hl(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ul(e.bundledQuery),readTime:Dl(e.readTime)};var e}))},t.prototype.Ls=function(t,e){return Hl(t).put(function(t){return{name:t.name,readTime:Rl(vc(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ql(t){return Tl(t,Ol.store)}function Hl(t){return Tl(t,El.store)}var Bl=function(){function t(){this.Bs=new zl}return t.prototype.qs=function(t,e){return this.Bs.add(e),zc.resolve()},t.prototype.Us=function(t,e){return zc.resolve(this.Bs.getEntries(e))},t}(),zl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new Vu(Ps.H),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.tt(),n=t.X(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Vu(Ps.H)).it()},t}(),Gl=function(){function t(){this.Qs=new zl}return t.prototype.qs=function(t,e){var n=this;if(!this.Qs.has(e)){var r=e.tt(),i=e.X();t.gs((function(){n.Qs.add(e)}));var o={collectionId:r,parent:il(i)};return Wl(t).put(o)}return zc.resolve()},t.prototype.Us=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ms(e),""],!1,!0);return Wl(t).rs(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(al(o.parent))}return n}))},t}();function Wl(t){return Tl(t,_l.store)}var Ql={Ks:!1,Ws:0,js:0,Gs:0},Kl=function(){function t(t,e,n){this.zs=t,this.Hs=e,this.Js=n}return t.Ys=function(e){return new t(e,t.Xs,t.Zs)},t}();function $l(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){if(t.code!==_s.FAILED_PRECONDITION||t.message!==nl)throw t;return as("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}Kl.Xs=10,Kl.Zs=1e3,Kl.ti=new Kl(41943040,Kl.Xs,Kl.Zs),Kl.ei=new Kl(-1,0,0);var Yl=function(){function t(t,e){this.ni=t,this.si=e,this.ii={}}return t.prototype.get=function(t){var e=this.ni(t),n=this.ii[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.si(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Fs(this.ii,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.et=function(){return Us(this.ii)},t}(),Xl=function(){function t(){this.ri=new Yl((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.oi=!1}return t.prototype.ci=function(t){var e=this.ri.get(t);return e?e.readTime:Ns.min()},t.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},t.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},t.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?zc.resolve(n.hi):this.fi(t,e)},t.prototype.getEntries=function(t,e){return this.di(t,e)},t.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},t.prototype.ui=function(){},t}();function Zl(t,e,n){var r=t.store(hl.store),i=t.store(fl.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.hs({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){fs(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=fl.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return zc.Mn(o).next((function(){return c}))}function Jl(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw hs();e=t.noDocument}return JSON.stringify(e).length}var th=function(){function t(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}return t.mi=function(e,n,r,i){return fs(""!==e.uid),new t(e.m()?e.uid:"",n,r,i)},t.prototype.Ai=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return nh(t).hs({index:hl.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.Ri=function(t,e,n,r){var i=this,o=rh(t),s=nh(t);return s.add({}).next((function(a){fs("number"==typeof a);for(var u=new Il(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return xc(t.Fs,e)})),i=n.mutations.map((function(e){return xc(t.Fs,e)}));return new hl(e,n.batchId,n.vs.toMillis(),r,i)}(i.Qt,i.userId,u),l=[],h=new Vu((function(t,e){return ys(t.rt(),e.rt())})),f=0,d=r;f<d.length;f++){var p=d[f],g=fl.key(i.userId,p.key.path,a);h=h.add(p.key.path.X()),l.push(s.put(c)),l.push(o.put(g,fl.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ei.qs(t,e))})),t.gs((function(){i.Ii[a]=u.keys()})),zc.Mn(l).next((function(){return u}))}))},t.prototype.Pi=function(t,e){var n=this;return nh(t).get(e).next((function(t){return t?(fs(t.userId===n.userId),Ll(n.Qt,t)):null}))},t.prototype.yi=function(t,e){var n=this;return this.Ii[e]?zc.resolve(this.Ii[e]):this.Pi(t,e).next((function(t){if(t){var r=t.keys();return n.Ii[e]=r,r}return null}))},t.prototype.gi=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return nh(t).hs({index:hl.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(fs(e.batchId>=r),o=Ll(n.Qt,e)),i.done()})).next((function(){return o}))},t.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return nh(t).hs({index:hl.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return nh(t).rs(hl.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ll(e.Qt,t)}))}))},t.prototype.bi=function(t,e){var n=this,r=fl.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return rh(t).hs({range:i},(function(r,i,s){var a=r[0],u=r[2],c=al(r[1]);if(a===n.userId&&e.path.isEqual(c))return nh(t).get(u).next((function(t){if(!t)throw hs();fs(t.userId===n.userId),o.push(Ll(n.Qt,t))}));s.done()})).next((function(){return o}))},t.prototype.vi=function(t,e){var n=this,r=new Vu(ys),i=[];return e.forEach((function(e){var o=fl.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=rh(t).hs({range:s},(function(t,i,o){var s=t[0],a=t[2],u=al(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()}));i.push(a)})),zc.Mn(i).next((function(){return n.Si(t,r)}))},t.prototype.Di=function(t,e){var n=this,r=e.path,i=r.length+1,o=fl.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Vu(ys);return rh(t).hs({range:s},(function(t,e,o){var s=t[0],u=t[2],c=al(t[1]);s===n.userId&&r.nt(c)?c.length===i&&(a=a.add(u)):o.done()})).next((function(){return n.Si(t,a)}))},t.prototype.Si=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(nh(t).get(e).next((function(t){if(null===t)throw hs();fs(t.userId===n.userId),r.push(Ll(n.Qt,t))})))})),zc.Mn(i).next((function(){return r}))},t.prototype.Ci=function(t,e){var n=this;return Zl(t.ps,this.userId,e).next((function(r){return t.gs((function(){n.xi(e.batchId)})),zc.forEach(r,(function(e){return n.Ti.Ni(t,e)}))}))},t.prototype.xi=function(t){delete this.Ii[t]},t.prototype.$i=function(t){var e=this;return this.Ai(t).next((function(n){if(!n)return zc.resolve();var r=IDBKeyRange.lowerBound(fl.prefixForUser(e.userId)),i=[];return rh(t).hs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=al(t[1]);i.push(o)}else r.done()})).next((function(){fs(0===i.length)}))}))},t.prototype.Fi=function(t,e){return eh(t,this.userId,e)},t.prototype.Oi=function(t){var e=this;return ih(t).get(this.userId).next((function(t){return t||new ll(e.userId,-1,"")}))},t}();function eh(t,e,n){var r=fl.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return rh(t).hs({range:o,us:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()})).next((function(){return s}))}function nh(t){return Tl(t,hl.store)}function rh(t){return Tl(t,fl.store)}function ih(t){return Tl(t,ll.store)}var oh=function(){function t(t){this.ki=t}return t.prototype.next=function(){return this.ki+=2,this.ki},t.Mi=function(){return new t(0)},t.Li=function(){return new t(-1)},t}(),sh=function(){function t(t,e){this.Ti=t,this.Qt=e}return t.prototype.Bi=function(t){var e=this;return this.qi(t).next((function(n){var r=new oh(n.highestTargetId);return n.highestTargetId=r.next(),e.Ui(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Qi=function(t){return this.qi(t).next((function(t){return Ns.K(new As(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ki=function(t){return this.qi(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Wi=function(t,e,n){var r=this;return this.qi(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.j()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ui(t,i)}))},t.prototype.ji=function(t,e){var n=this;return this.Gi(t,e).next((function(){return n.qi(t).next((function(r){return r.targetCount+=1,n.zi(e,r),n.Ui(t,r)}))}))},t.prototype.Hi=function(t,e){return this.Gi(t,e)},t.prototype.Ji=function(t,e){var n=this;return this.Yi(t,e.targetId).next((function(){return ah(t).delete(e.targetId)})).next((function(){return n.qi(t)})).next((function(e){return fs(e.targetCount>0),e.targetCount-=1,n.Ui(t,e)}))},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return ah(t).hs((function(s,a){var u=Ml(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Ji(t,u)))})).next((function(){return zc.Mn(o)})).next((function(){return i}))},t.prototype.In=function(t,e){return ah(t).hs((function(t,n){var r=Ml(n);e(r)}))},t.prototype.qi=function(t){return uh(t).get(bl.key).next((function(t){return fs(null!==t),t}))},t.prototype.Ui=function(t,e){return uh(t).put(bl.key,e)},t.prototype.Gi=function(t,e){return ah(t).put(Fl(this.Qt,e))},t.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.Zi=function(t){return this.qi(t).next((function(t){return t.targetCount}))},t.prototype.tr=function(t,e){var n=va(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return ah(t).hs({range:r,index:vl.queryTargetsIndexName},(function(t,n,r){var o=Ml(n);ma(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.er=function(t,e,n){var r=this,i=[],o=ch(t);return e.forEach((function(e){var s=il(e.path);i.push(o.put(new ml(n,s))),i.push(r.Ti.nr(t,n,e))})),zc.Mn(i)},t.prototype.sr=function(t,e,n){var r=this,i=ch(t);return zc.forEach(e,(function(e){var o=il(e.path);return zc.Mn([i.delete([n,o]),r.Ti.ir(t,n,e)])}))},t.prototype.Yi=function(t,e){var n=ch(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.rr=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=ch(t),i=Yu();return r.hs({range:n,us:!0},(function(t,e,n){var r=al(t[1]),o=new Ls(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Fi=function(t,e){var n=il(e.path),r=IDBKeyRange.bound([n],[ms(n)],!1,!0),i=0;return ch(t).hs({index:ml.documentTargetsIndex,us:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Sn=function(t,e){return ah(t).get(e).next((function(t){return t?Ml(t):null}))},t}();function ah(t){return Tl(t,vl.store)}function uh(t){return Tl(t,bl.store)}function ch(t){return Tl(t,ml.store)}function lh(t,e){var n=t[1],r=e[1],i=ys(t[0],e[0]);return 0===i?ys(n,r):i}var hh=function(){function t(t){this.cr=t,this.buffer=new Vu(lh),this.ar=0}return t.prototype.ur=function(){return++this.ar},t.prototype.hr=function(t){var e=[t,this.ur()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();lh(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),fh=function(){function t(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}return t.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},t.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(t.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),t.prototype.wr=function(t){var e=this,n=this._r?3e5:6e4;as("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.dr=this._s.Tr("lru_garbage_collection",n,(function(){return Object(ns.b)(e,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:this.dr=null,this._r=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Ir(this.lr)];case 2:return n.sent(),[3,7];case 3:return $c(e=n.sent())?(as("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,$l(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.wr(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),dh=function(){function t(t,e){this.mr=t,this.params=e}return t.prototype.Ar=function(t,e){return this.mr.Rr(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.Pr=function(t,e){var n=this;if(0===e)return zc.resolve(js.q);var r=new hh(e);return this.mr.In(t,(function(t){return r.hr(t.sequenceNumber)})).next((function(){return n.mr.yr(t,(function(t){return r.hr(t)}))})).next((function(){return r.maxValue}))},t.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},t.prototype.gr=function(t,e){return this.mr.gr(t,e)},t.prototype.Vr=function(t,e){var n=this;return-1===this.params.zs?(as("LruGarbageCollector","Garbage collection skipped; disabled"),zc.resolve(Ql)):this.pr(t).next((function(r){return r<n.params.zs?(as("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.zs),Ql):n.br(t,e)}))},t.prototype.pr=function(t){return this.mr.pr(t)},t.prototype.br=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.Ar(t,this.params.Hs).next((function(e){return e>c.params.Js?(as("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.Js+" from "+e),r=c.params.Js):r=e,o=Date.now(),c.Pr(t,r)})).next((function(r){return n=r,s=Date.now(),c.Xi(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.gr(t,n)})).next((function(t){return u=Date.now(),ss()<=Je.a.DEBUG&&as("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),zc.resolve({Ks:!0,Ws:r,js:i,Gs:t})}))},t}(),ph=function(){function t(t,e){this.db=t,this.lr=function(t,e){return new dh(t,e)}(this,e)}return t.prototype.Rr=function(t){var e=this.vr(t);return this.db.Sr().Zi(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.vr=function(t){var e=0;return this.yr(t,(function(t){e++})).next((function(){return e}))},t.prototype.In=function(t,e){return this.db.Sr().In(t,e)},t.prototype.yr=function(t,e){return this.Dr(t,(function(t,n){return e(n)}))},t.prototype.nr=function(t,e,n){return gh(t,n)},t.prototype.ir=function(t,e,n){return gh(t,n)},t.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},t.prototype.Ni=function(t,e){return gh(t,e)},t.prototype.Cr=function(t,e){return function(t,e){var n=!1;return ih(t).ls((function(r){return eh(t,r,e).next((function(t){return t&&(n=!0),zc.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.gr=function(t,e){var n=this,r=this.db.$r().Nr(),i=[],o=0;return this.Dr(t,(function(s,a){if(a<=e){var u=n.Cr(t,s).next((function(e){if(!e)return o++,r._i(t,s).next((function(){return r.li(s),ch(t).delete([0,il(s.path)])}))}));i.push(u)}})).next((function(){return zc.Mn(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.kt(t.bs);return this.db.Sr().Hi(t,n)},t.prototype.Fr=function(t,e){return gh(t,e)},t.prototype.Dr=function(t,e){var n,r=ch(t),i=js.q;return r.hs({index:ml.documentTargetsIndex},(function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==js.q&&e(new Ls(al(n)),i),i=s,n=o):i=js.q})).next((function(){i!==js.q&&e(new Ls(al(n)),i)}))},t.prototype.pr=function(t){return this.db.$r().Or(t)},t}();function gh(t,e){return ch(t).put(function(t,e){return new ml(0,il(t.path),e)}(e,t.bs))}var yh=function(){function t(t,e){this.Qt=t,this.Ei=e}return t.prototype.ai=function(t,e,n){return bh(t).put(_h(e),n)},t.prototype.li=function(t,e){var n=bh(t),r=_h(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.kr(t,r)}))},t.prototype._i=function(t,e){var n=this;return bh(t).get(_h(e)).next((function(t){return n.Mr(t)}))},t.prototype.Lr=function(t,e){var n=this;return bh(t).get(_h(e)).next((function(t){var e=n.Mr(t);return e?{hi:e,size:Jl(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=zu();return this.Br(t,e,(function(t,e){var i=n.Mr(e);r=r.zt(t,i)})).next((function(){return r}))},t.prototype.qr=function(t,e){var n=this,r=zu(),i=new Mu(Ls.H);return this.Br(t,e,(function(t,e){var o=n.Mr(e);o?(r=r.zt(t,o),i=i.zt(t,Jl(e))):(r=r.zt(t,null),i=i.zt(t,0))})).next((function(){return{Ur:r,Qr:i}}))},t.prototype.Br=function(t,e,n){if(e.et())return zc.resolve();var r=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),i=e.te(),o=i.oe();return bh(t).hs({range:r},(function(t,e,r){for(var s=Ls.Et(t);o&&Ls.H(o,s)<0;)n(o,null),o=i.oe();o&&o.isEqual(s)&&(n(o,e),o=i.ce()?i.oe():null),o?r.ss(o.path.it()):r.done()})).next((function(){for(;o;)n(o,null),o=i.ce()?i.oe():null}))},t.prototype.Kr=function(t,e,n){var r=this,i=Wu(),o=e.path.length+1,s={};if(n.isEqual(Ns.min())){var a=e.path.it();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.it(),c=kl(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=gl.collectionReadTimeIndex}return bh(t).hs(s,(function(t,n,s){if(t.length===o){var a=Al(r.Qt,n);e.path.nt(a.key.path)?a instanceof fa&&$a(e,a)&&(i=i.zt(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.Nr=function(t){return new vh(this,!!t&&t.Wr)},t.prototype.Or=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return mh(t).get(yl.key).next((function(t){return fs(!!t),t}))},t.prototype.kr=function(t,e){return mh(t).put(yl.key,e)},t.prototype.Mr=function(t){if(t){var e=Al(this.Qt,t);return e instanceof da&&e.version.isEqual(Ns.min())?null:e}return null},t}(),vh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jr=e,r.Wr=n,r.Gr=new Yl((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(ns.c)(e,t),e.prototype.wi=function(t){var e=this,n=[],r=0,i=new Vu((function(t,e){return ys(t.rt(),e.rt())}));return this.ri.forEach((function(o,s){var a=e.Gr.get(o);if(s.hi){var u=Nl(e.jr.Qt,s.hi,e.ci(o));i=i.add(o.path.X());var c=Jl(u);r+=c-a,n.push(e.jr.ai(t,o,u))}else if(r-=a,e.Wr){var l=Nl(e.jr.Qt,new da(o,Ns.min()),e.ci(o));n.push(e.jr.ai(t,o,l))}else n.push(e.jr.li(t,o))})),i.forEach((function(r){n.push(e.jr.Ei.qs(t,r))})),n.push(this.jr.updateMetadata(t,r)),zc.Mn(n)},e.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next((function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)}))},e.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next((function(t){var e=t.Ur;return t.Qr.forEach((function(t,e){n.Gr.set(t,e)})),e}))},e}(Xl);function mh(t){return Tl(t,yl.store)}function bh(t){return Tl(t,gl.store)}function _h(t){return t.path.it()}var wh=function(){function t(t){this.Qt=t}return t.prototype.Jn=function(t,e,n,r){var i=this;fs(n<r&&n>=0&&r<=11);var o=new Gc("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(cl.store)}(t),function(t){t.createObjectStore(ll.store,{keyPath:ll.keyPath}),t.createObjectStore(hl.store,{keyPath:hl.keyPath,autoIncrement:!0}).createIndex(hl.userMutationsIndex,hl.userMutationsKeyPath,{unique:!0}),t.createObjectStore(fl.store)}(t),Oh(t),function(t){t.createObjectStore(gl.store)}(t));var s=zc.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ml.store),t.deleteObjectStore(vl.store),t.deleteObjectStore(bl.store)}(t),Oh(t)),s=s.next((function(){return function(t){var e=t.store(bl.store),n=new bl(0,0,Ns.min().j(),0);return e.put(bl.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(hl.store).rs().next((function(n){t.deleteObjectStore(hl.store),t.createObjectStore(hl.store,{keyPath:hl.keyPath,autoIncrement:!0}).createIndex(hl.userMutationsIndex,hl.userMutationsKeyPath,{unique:!0});var r=e.store(hl.store),i=n.map((function(t){return r.put(t)}));return zc.Mn(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(wl.store,{keyPath:wl.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.zr(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(yl.store)}(t),i.Hr(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.Jr(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Yr(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(gl.store);e.createIndex(gl.readTimeIndex,gl.readTimeIndexPath,{unique:!1}),e.createIndex(gl.collectionReadTimeIndex,gl.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Xr(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Ol.store,{keyPath:Ol.keyPath})}(t),function(t){t.createObjectStore(El.store,{keyPath:El.keyPath})}(t)}))),s},t.prototype.Hr=function(t){var e=0;return t.store(gl.store).hs((function(t,n){e+=Jl(n)})).next((function(){var n=new yl(e);return t.store(yl.store).put(yl.key,n)}))},t.prototype.zr=function(t){var e=this,n=t.store(ll.store),r=t.store(hl.store);return n.rs().next((function(n){return zc.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.rs(hl.userMutationsIndex,i).next((function(r){return zc.forEach(r,(function(r){fs(r.userId===n.userId);var i=Ll(e.Qt,r);return Zl(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.Jr=function(t){var e=t.store(ml.store),n=t.store(gl.store);return t.store(bl.store).get(bl.key).next((function(t){var r=[];return n.hs((function(n,i){var o=new Ps(n),s=function(t){return[0,il(t)]}(o);r.push(e.get(s).next((function(n){return n?zc.resolve():function(n){return e.put(new ml(0,il(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return zc.Mn(r)}))}))},t.prototype.Yr=function(t,e){t.createObjectStore(_l.store,{keyPath:_l.keyPath});var n=e.store(_l.store),r=new zl,i=function(t){if(r.add(t)){var e=t.tt(),i=t.X();return n.put({collectionId:e,parent:il(i)})}};return e.store(gl.store).hs({us:!0},(function(t,e){var n=new Ps(t);return i(n.X())})).next((function(){return e.store(fl.store).hs({us:!0},(function(t,e){var n=al(t[1]);return i(n.X())}))}))},t.prototype.Xr=function(t){var e=this,n=t.store(vl.store);return n.hs((function(t,r){var i=Ml(r),o=Fl(e.Qt,i);return n.put(o)}))},t}();function Oh(t){t.createObjectStore(ml.store,{keyPath:ml.keyPath}).createIndex(ml.documentTargetsIndex,ml.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(vl.store,{keyPath:vl.keyPath}).createIndex(vl.queryTargetsIndexName,vl.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bl.store)}var Eh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ch=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Zr=o,this.window=s,this.document=a,this.eo=c,this.no=l,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!t.Kn())throw new ws(_s.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new ph(this,i),this.ho=n+"main",this.Qt=new jl(u),this.lo=new Wc(this.ho,11,new wh(this.Qt)),this._o=new sh(this.Ti,this.Qt),this.Ei=new Gl,this.fo=function(t,e){return new yh(t,e)}(this.Qt,this.Ei),this.wo=new Vl,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===l&&us("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.To().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ws(_s.FAILED_PRECONDITION,Eh);return t.Io(),t.mo(),t.Ao(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t._o.Ki(e)}))})).then((function(e){t.so=new js(e,t.eo)})).then((function(){t.io=!0})).catch((function(e){return t.lo&&t.lo.close(),Promise.reject(e)}))},t.prototype.Ro=function(t){var e=this;return this.uo=function(n){return Object(ns.b)(e,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){return this.Er?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Po=function(t){var e=this;this.lo.Xn((function(n){return Object(ns.b)(e,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps((function(){return Object(ns.b)(e,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.To=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Th(e).put(new wl(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Vo(e).next((function(e){e||(t.isPrimary=!1,t.Zr.po((function(){return t.uo(!1)})))}))})).next((function(){return t.bo(e)})).next((function(n){return t.isPrimary&&!n?t.vo(e).next((function(){return!1})):!!n&&t.So(e).next((function(){return!0}))}))})).catch((function(e){if($c(e))return as("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return as("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Zr.po((function(){return t.uo(e)})),t.isPrimary=e}))},t.prototype.Vo=function(t){var e=this;return Sh(t).get(cl.key).next((function(t){return zc.resolve(e.Do(t))}))},t.prototype.Co=function(t){return Th(t).delete(this.clientId)},t.prototype.xo=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Tl(t,wl.store);return e.rs().next((function(t){var n=r.$o(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return zc.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Eo)for(e=0,n=t;e<n.length;e++)this.Eo.removeItem(this.Fo(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,(function(){return t.To().then((function(){return t.xo()})).then((function(){return t.Ao()}))}))},t.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.bo=function(t){var e=this;return this.no?zc.resolve(!0):Sh(t).get(cl.key).next((function(n){if(null!==n&&e.No(n.leaseTimestampMs,5e3)&&!e.Oo(n.ownerId)){if(e.Do(n)&&e.networkEnabled)return!0;if(!e.Do(n)){if(!n.allowTabSynchronization)throw new ws(_s.FAILED_PRECONDITION,Eh);return!1}}return!(!e.networkEnabled||!e.inForeground)||Th(t).rs().next((function(t){return void 0===e.$o(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&as("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.ko=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t=this;return Object(ns.d)(this,(function(e){switch(e.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[cl.store,wl.store],(function(e){var n=new Sl(e,js.q);return t.vo(n).next((function(){return t.Co(n)}))}))];case 1:return e.sent(),this.lo.close(),this.qo(),[2]}}))}))},t.prototype.$o=function(t,e){var n=this;return t.filter((function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)}))},t.prototype.Uo=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Th(e).rs().next((function(e){return t.$o(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Qo=function(t){return th.mi(t,this.Qt,this.Ei,this.Ti)},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Ko=function(){return this.Ei},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r,i=this;return as("IndexedDbPersistence","Starting transaction:",t),this.lo.runTransaction(t,"readonly"===e?"readonly":"readwrite",Cl,(function(o){return r=new Sl(o,i.so?i.so.next():js.q),"readwrite-primary"===e?i.Vo(r).next((function(t){return!!t||i.bo(r)})).next((function(e){if(!e)throw us("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Zr.po((function(){return i.uo(!1)})),new ws(_s.FAILED_PRECONDITION,nl);return n(r)})).next((function(t){return i.So(r).next((function(){return t}))})):i.jo(r).next((function(){return n(r)}))})).then((function(t){return r.Vs(),t}))},t.prototype.jo=function(t){var e=this;return Sh(t).get(cl.key).next((function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ws(_s.FAILED_PRECONDITION,Eh)}))},t.prototype.So=function(t){var e=new cl(this.clientId,this.allowTabSynchronization,Date.now());return Sh(t).put(cl.key,e)},t.Kn=function(){return Wc.Kn()},t.prototype.vo=function(t){var e=this,n=Sh(t);return n.get(cl.key).next((function(t){return e.Do(t)?(as("IndexedDbPersistence","Releasing primary lease."),n.delete(cl.key)):zc.resolve()}))},t.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(us("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps((function(){return t.inForeground="visible"===t.document.visibilityState,t.To()}))},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},t.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps((function(){return e.ko()}))},this.window.addEventListener("unload",this.ro))},t.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},t.prototype.Oo=function(t){var e;try{var n=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return as("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return us("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){us("Failed to set zombie client id.",t)}},t.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},t.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Sh(t){return Tl(t,cl.store)}function Th(t){return Tl(t,wl.store)}function Ih(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var xh=function(t,e){this.progress=t,this.Go=e},jh=function(){function t(t,e,n){this.fo=t,this.zo=e,this.Ei=n}return t.prototype.Ho=function(t,e){var n=this;return this.zo.bi(t,e).next((function(r){return n.Jo(t,e,r)}))},t.prototype.Jo=function(t,e,n){return this.fo._i(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].Cs(e,t);return t}))},t.prototype.Yo=function(t,e,n){var r=zu();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].Cs(t,e);r=r.zt(t,e)})),r},t.prototype.Xo=function(t,e){var n=this;return this.fo.getEntries(t,e).next((function(e){return n.Zo(t,e)}))},t.prototype.Zo=function(t,e){var n=this;return this.zo.vi(t,e).next((function(r){var i=n.Yo(t,e,r),o=Bu();return i.forEach((function(t,e){e||(e=new da(t,Ns.min())),o=o.zt(t,e)})),o}))},t.prototype.Kr=function(t,e,n){return function(t){return Ls.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.tc(t,e.path):Ha(e)?this.ec(t,e,n):this.nc(t,e,n)},t.prototype.tc=function(t,e){return this.Ho(t,new Ls(e)).next((function(t){var e=Wu();return t instanceof fa&&(e=e.zt(t.key,t)),e}))},t.prototype.ec=function(t,e,n){var r=this,i=e.collectionGroup,o=Wu();return this.Ei.Us(t,i).next((function(s){return zc.forEach(s,(function(s){var a=function(t,e){return new Da(e,null,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.nc(t,a,n).next((function(t){t.forEach((function(t,e){o=o.zt(t,e)}))}))})).next((function(){return o}))}))},t.prototype.nc=function(t,e,n){var r,i,o=this;return this.fo.Kr(t,e,n).next((function(n){return r=n,o.zo.Di(t,e)})).next((function(e){return o.sc(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=_u(u,r.get(c),o.vs);r=l instanceof fa?r.zt(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(t,n){$a(e,n)||(r=r.remove(t))})),r}))},t.prototype.sc=function(t,e,n){for(var r=Yu(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Su&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof fa&&(c=c.zt(t,e))})),c}))},t}(),Ah=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}return t.oc=function(e,n){for(var r=Yu(),i=Yu(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Nh=function(){function t(){}return t.prototype.cc=function(t){this.ac=t},t.prototype.Kr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.xt.length||1===t.xt.length&&t.xt[0].field.ut())}(e)||n.isEqual(Ns.min())?this.uc(t,e):this.ac.Xo(t,r).next((function(o){var s=i.hc(e,o);return(Fa(e)||Ua(e))&&i.lc(e.limitType,s,r,n)?i.uc(t,e):(ss()<=Je.a.DEBUG&&as("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ka(e)),i.ac.Kr(t,e,n).next((function(t){return s.forEach((function(e){t=t.zt(e.key,e)})),t})))}))},t.prototype.hc=function(t,e){var n=new Vu(Ya(t));return e.forEach((function(e,r){r instanceof fa&&$a(t,r)&&(n=n.add(r))})),n},t.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version._(r)>0)},t.prototype.uc=function(t,e){return ss()<=Je.a.DEBUG&&as("QueryEngine","Using full collection scan to execute query:",Ka(e)),this.ac.Kr(t,e,Ns.min())},t}(),kh=function(){function t(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new Mu(ys),this.dc=new Yl((function(t){return va(t)}),ma),this.wc=Ns.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new jh(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}return t.prototype.Ir=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.Vr(n,e.fc)}))},t}();function Ph(t,e,n,r){return new kh(t,e,n,r)}function Rh(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ns.d)(this,(function(s){switch(s.label){case 0:return n=ds(t),r=n.zo,i=n.Tc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n.zo.pi(t).next((function(s){return o=s,r=n.persistence.Qo(e),i=new jh(n.Ec,r,n.persistence.Ko()),r.pi(t)})).next((function(e){for(var n=[],r=[],s=Yu(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,y=p.mutations;g<y.length;g++)s=s.add(y[g].key)}return i.Xo(t,s).next((function(t){return{Ic:t,mc:n,Ac:r}}))}))}))];case 1:return o=s.sent(),[2,(n.zo=r,n.Tc=i,n._c.cc(n.Tc),o)]}}))}))}function Dh(t,e){var n=ds(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Ec.Nr({Wr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=zc.resolve();return o.forEach((function(t){s=s.next((function(){return r._i(e,t)})).next((function(e){var o=e,s=n.$s.get(t);fs(null!==s),(!o||o.version._(s)<0)&&(o=i.Ss(t,o,n))&&r.ai(o,n.Ns)}))})),s.next((function(){return t.zo.Ci(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}function Lh(t){var e=ds(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e._o.Qi(t)}))}function Mh(t,e){var n=ds(t),r=e.Ot,i=n.fc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Ec.Nr({Wr:!0});i=n.fc;var s=[];e.$e.forEach((function(e,o){var a=i.get(o);if(a){s.push(n._o.sr(t,e.Qe,o).next((function(){return n._o.er(t,e.qe,o)})));var u=e.resumeToken;if(u.l()>0){var c=a.Mt(u,r).kt(t.bs);i=i.zt(o,c),function(t,e,n){return fs(e.resumeToken.l()>0),0===t.resumeToken.l()||e.Ot.W()-t.Ot.W()>=3e8||n.qe.size+n.Ue.size+n.Qe.size>0}(a,c,e)&&s.push(n._o.Hi(t,c))}}}));var a=Bu();if(e.Oe.forEach((function(r,i){e.ke.has(r)&&s.push(n.persistence.Ti.Fr(t,r))})),s.push(Fh(t,o,e.Oe,r,void 0).next((function(t){a=t}))),!r.isEqual(Ns.min())){var u=n._o.Qi(t).next((function(e){return n._o.Wi(t,t.bs,r)}));s.push(u)}return zc.Mn(s).next((function(){return o.apply(t)})).next((function(){return n.Tc.Zo(t,a)}))})).then((function(t){return n.fc=i,t}))}function Fh(t,e,n,r,i){var o=Yu();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Bu();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof da&&s.version.isEqual(Ns.min())?(e.li(n,u),o=o.zt(n,s)):null==a||s.version._(a.version)>0||0===s.version._(a.version)&&a.hasPendingWrites?(e.ai(s,u),o=o.zt(n,s)):as("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Uh(t,e){var n=ds(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.zo.gi(t,e)}))}function Vh(t,e){var n=ds(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n._o.tr(t,e).next((function(i){return i?zc.resolve(r=i):n._o.Bi(t).next((function(i){return r=new Za(e,i,0,t.bs),n._o.ji(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.fc.get(t.targetId);return(null===r||t.Ot._(r.Ot)>0)&&(n.fc=n.fc.zt(t.targetId,t),n.dc.set(e,t.targetId)),t}))}function qh(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:r=ds(t),i=r.fc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.Ti.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!$c(s=a.sent()))throw s;return as("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.fc=r.fc.remove(e),r.dc.delete(i.target),[2]}}))}))}function Hh(t,e,n){var r=ds(t),i=Ns.min(),o=Yu();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=ds(t),i=r.dc.get(n);return void 0!==i?zc.resolve(r.fc.get(i)):r._o.tr(e,n)}(r,t,za(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r._o.rr(t,e.targetId).next((function(t){o=t}))})).next((function(){return r._c.Kr(t,e,n?i:Ns.min(),n?o:Yu())})).next((function(t){return{documents:t,Rc:o}}))}))}function Bh(t,e){var n=ds(t),r=ds(n._o),i=n.fc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Sn(t,e).next((function(t){return t?t.target:null}))}))}function zh(t){var e=ds(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=ds(t),i=Bu(),o=kl(n),s=bh(e),a=IDBKeyRange.lowerBound(o,!0);return s.hs({index:gl.readTimeIndex,range:a},(function(t,e){var n=Al(r.Qt,e);i=i.zt(n.key,n),o=e.readTime})).next((function(){return{Go:i,readTime:Pl(o)}}))}(e.Ec,t,e.wc)})).then((function(t){var n=t.Go;return e.wc=t.readTime,n}))}function Gh(t){return Object(ns.b)(this,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){return[2,(e=ds(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=bh(t),n=Ns.min();return e.hs({index:gl.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Pl(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.wc=t}))]}))}))}function Wh(t,e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c,l,h,f,d;return Object(ns.d)(this,(function(p){switch(p.label){case 0:for(i=ds(t),o=Yu(),s=Bu(),a=Ku(),u=0,c=n;u<c.length;u++)h=e.Pc((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.zt(h,e.yc(l)),a=a.zt(h,e.gc(l.metadata.readTime));return f=i.Ec.Nr({Wr:!0}),[4,Vh(i,function(t){return za(Ma(Ps.ot("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Fh(t,f,s,Ns.min(),a).next((function(e){return f.apply(t),e})).next((function(e){return i._o.Yi(t,d.targetId).next((function(){return i._o.er(t,o,d.targetId)})).next((function(){return i.Tc.Zo(t,e)}))}))}))]}}))}))}function Qh(t,e,n){return void 0===n&&(n=Yu()),Object(ns.b)(this,void 0,void 0,(function(){var r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return[4,Vh(t,za(Ul(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ds(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=vc(e.readTime);if(r.Ot._(o)>=0)return i.wo.Ls(t,e);var s=r.Mt(bs.T,o);return i.fc=i.fc.zt(s.targetId,s),i._o.Hi(t,s).next((function(){return i._o.Yi(t,r.targetId)})).next((function(){return i._o.er(t,n,r.targetId)})).next((function(){return i.wo.Ls(t,e)}))}))]}}))}))}var Kh=function(){function t(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}return t.prototype.Os=function(t,e){return zc.resolve(this.Vc.get(e))},t.prototype.ks=function(t,e){var n;return this.Vc.set(e.id,{id:(n=e).id,version:n.version,createTime:vc(n.createTime)}),zc.resolve()},t.prototype.Ms=function(t,e){return zc.resolve(this.bc.get(e))},t.prototype.Ls=function(t,e){return this.bc.set(e.name,function(t){return{name:t.name,query:Ul(t.bundledQuery),readTime:vc(t.readTime)}}(e)),zc.resolve()},t}(),$h=function(){function t(){this.vc=new Vu(Yh.Sc),this.Dc=new Vu(Yh.Cc)}return t.prototype.et=function(){return this.vc.et()},t.prototype.nr=function(t,e){var n=new Yh(t,e);this.vc=this.vc.add(n),this.Dc=this.Dc.add(n)},t.prototype.xc=function(t,e){var n=this;t.forEach((function(t){return n.nr(t,e)}))},t.prototype.ir=function(t,e){this.Nc(new Yh(t,e))},t.prototype.$c=function(t,e){var n=this;t.forEach((function(t){return n.ir(t,e)}))},t.prototype.Fc=function(t){var e=this,n=new Ls(new Ps([])),r=new Yh(n,t),i=new Yh(n,t+1),o=[];return this.Dc.me([r,i],(function(t){e.Nc(t),o.push(t.key)})),o},t.prototype.Oc=function(){var t=this;this.vc.forEach((function(e){return t.Nc(e)}))},t.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},t.prototype.kc=function(t){var e=new Ls(new Ps([])),n=new Yh(e,t),r=new Yh(e,t+1),i=Yu();return this.Dc.me([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Fi=function(t){var e=new Yh(t,0),n=this.vc.Re(e);return null!==n&&t.isEqual(n.key)},t}(),Yh=function(){function t(t,e){this.key=t,this.Mc=e}return t.Sc=function(t,e){return Ls.H(t.key,e.key)||ys(t.Mc,e.Mc)},t.Cc=function(t,e){return ys(t.Mc,e.Mc)||Ls.H(t.key,e.key)},t}(),Xh=function(){function t(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new Vu(Yh.Sc)}return t.prototype.Ai=function(t){return zc.resolve(0===this.zo.length)},t.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++;var o=new Il(i,e,n,r);this.zo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Bc=this.Bc.add(new Yh(u.key,i)),this.Ei.qs(t,u.key.path.X())}return zc.resolve(o)},t.prototype.Pi=function(t,e){return zc.resolve(this.qc(e))},t.prototype.gi=function(t,e){var n=this.Uc(e+1),r=n<0?0:n;return zc.resolve(this.zo.length>r?this.zo[r]:null)},t.prototype.Vi=function(){return zc.resolve(0===this.zo.length?-1:this.Lc-1)},t.prototype.pi=function(t){return zc.resolve(this.zo.slice())},t.prototype.bi=function(t,e){var n=this,r=new Yh(e,0),i=new Yh(e,Number.POSITIVE_INFINITY),o=[];return this.Bc.me([r,i],(function(t){var e=n.qc(t.Mc);o.push(e)})),zc.resolve(o)},t.prototype.vi=function(t,e){var n=this,r=new Vu(ys);return e.forEach((function(t){var e=new Yh(t,0),i=new Yh(t,Number.POSITIVE_INFINITY);n.Bc.me([e,i],(function(t){r=r.add(t.Mc)}))})),zc.resolve(this.Qc(r))},t.prototype.Di=function(t,e){var n=e.path,r=n.length+1,i=n;Ls.wt(i)||(i=i.child(""));var o=new Yh(new Ls(i),0),s=new Vu(ys);return this.Bc.Ae((function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(s=s.add(t.Mc)),!0)}),o),zc.resolve(this.Qc(s))},t.prototype.Qc=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.qc(t);null!==r&&n.push(r)})),n},t.prototype.Ci=function(t,e){var n=this;fs(0===this.Kc(e.batchId,"removed")),this.zo.shift();var r=this.Bc;return zc.forEach(e.mutations,(function(i){var o=new Yh(i.key,e.batchId);return r=r.delete(o),n.Ti.Ni(t,i.key)})).next((function(){n.Bc=r}))},t.prototype.xi=function(t){},t.prototype.Fi=function(t,e){var n=new Yh(e,0),r=this.Bc.Re(n);return zc.resolve(e.isEqual(r&&r.key))},t.prototype.$i=function(t){return zc.resolve()},t.prototype.Kc=function(t,e){return this.Uc(t)},t.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},t.prototype.qc=function(t){var e=this.Uc(t);return e<0||e>=this.zo.length?null:this.zo[e]},t}(),Zh=function(){function t(t,e){this.Ei=t,this.Wc=e,this.docs=new Mu(Ls.H),this.size=0}return t.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:s,readTime:n}),this.size+=s-o,this.Ei.qs(t,r.path.X())},t.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype._i=function(t,e){var n=this.docs.get(e);return zc.resolve(n?n.hi:null)},t.prototype.getEntries=function(t,e){var n=this,r=zu();return e.forEach((function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)})),zc.resolve(r)},t.prototype.Kr=function(t,e,n){for(var r=Wu(),i=new Ls(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.value,u=a.hi,c=a.readTime;if(!e.path.nt(s.key.path))break;c._(n)<=0||u instanceof fa&&$a(e,u)&&(r=r.zt(u.key,u))}return zc.resolve(r)},t.prototype.jc=function(t,e){return zc.forEach(this.docs,(function(t){return e(t)}))},t.prototype.Nr=function(t){return new Jh(this)},t.prototype.Or=function(t){return zc.resolve(this.size)},t}(),Jh=function(t){function e(e){var n=this;return(n=t.call(this)||this).jr=e,n}return Object(ns.c)(e,t),e.prototype.wi=function(t){var e=this,n=[];return this.ri.forEach((function(r,i){i&&i.hi?n.push(e.jr.ai(t,i.hi,e.ci(r))):e.jr.li(r)})),zc.Mn(n)},e.prototype.fi=function(t,e){return this.jr._i(t,e)},e.prototype.di=function(t,e){return this.jr.getEntries(t,e)},e}(Xl),tf=function(){function t(t){this.persistence=t,this.Gc=new Yl((function(t){return va(t)}),ma),this.lastRemoteSnapshotVersion=Ns.min(),this.highestTargetId=0,this.zc=0,this.Hc=new $h,this.targetCount=0,this.Jc=oh.Mi()}return t.prototype.In=function(t,e){return this.Gc.forEach((function(t,n){return e(n)})),zc.resolve()},t.prototype.Qi=function(t){return zc.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ki=function(t){return zc.resolve(this.zc)},t.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),zc.resolve(this.highestTargetId)},t.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),zc.resolve()},t.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new oh(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},t.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,zc.resolve()},t.prototype.Hi=function(t,e){return this.Gi(e),zc.resolve()},t.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),this.targetCount-=1,zc.resolve()},t.prototype.Xi=function(t,e,n){var r=this,i=0,o=[];return this.Gc.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Gc.delete(s),o.push(r.Yi(t,a.targetId)),i++)})),zc.Mn(o).next((function(){return i}))},t.prototype.Zi=function(t){return zc.resolve(this.targetCount)},t.prototype.tr=function(t,e){var n=this.Gc.get(e)||null;return zc.resolve(n)},t.prototype.er=function(t,e,n){return this.Hc.xc(e,n),zc.resolve()},t.prototype.sr=function(t,e,n){this.Hc.$c(e,n);var r=this.persistence.Ti,i=[];return r&&e.forEach((function(e){i.push(r.Ni(t,e))})),zc.Mn(i)},t.prototype.Yi=function(t,e){return this.Hc.Fc(e),zc.resolve()},t.prototype.rr=function(t,e){var n=this.Hc.kc(e);return zc.resolve(n)},t.prototype.Fi=function(t,e){return zc.resolve(this.Hc.Fi(e))},t}(),ef=function(){function t(t,e){var n=this;this.Yc={},this.so=new js(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new tf(this),this.Ei=new Bl,this.fo=function(t,e){return new Zh(t,(function(t){return n.Ti.Xc(t)}))}(this.Ei),this.Qt=new jl(e),this.wo=new Kh(this.Qt)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),t.prototype.Po=function(){},t.prototype.yo=function(){},t.prototype.Ko=function(){return this.Ei},t.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new Xh(this.Ei,this.Ti),this.Yc[t.A()]=e),e},t.prototype.Sr=function(){return this._o},t.prototype.$r=function(){return this.fo},t.prototype.Wo=function(){return this.wo},t.prototype.runTransaction=function(t,e,n){var r=this;as("MemoryPersistence","Starting transaction:",t);var i=new nf(this.so.next());return this.Ti.Zc(),n(i).next((function(t){return r.Ti.ta(i).next((function(){return t}))})).On().then((function(t){return i.Vs(),t}))},t.prototype.ea=function(t,e){return zc.Ln(Object.values(this.Yc).map((function(n){return function(){return n.Fi(t,e)}})))},t}(),nf=function(t){function e(e){var n=this;return(n=t.call(this)||this).bs=e,n}return Object(ns.c)(e,t),e}(rl),rf=function(){function t(t){this.persistence=t,this.na=new $h,this.sa=null}return t.ia=function(e){return new t(e)},Object.defineProperty(t.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw hs()},enumerable:!1,configurable:!0}),t.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),zc.resolve()},t.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),zc.resolve()},t.prototype.Ni=function(t,e){return this.ra.add(e.toString()),zc.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach((function(t){return n.ra.add(t.toString())}));var r=this.persistence.Sr();return r.rr(t,e.targetId).next((function(t){t.forEach((function(t){return n.ra.add(t.toString())}))})).next((function(){return r.Ji(t,e)}))},t.prototype.Zc=function(){this.sa=new Set},t.prototype.ta=function(t){var e=this,n=this.persistence.$r().Nr();return zc.forEach(this.ra,(function(r){var i=Ls._t(r);return e.oa(t,i).next((function(t){t||n.li(i)}))})).next((function(){return e.sa=null,n.apply(t)}))},t.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next((function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())}))},t.prototype.Xc=function(t){return 0},t.prototype.oa=function(t,e){var n=this;return zc.Ln([function(){return zc.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},t}();function of(t,e){return"firestore_clients_"+t+"_"+e}function sf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.m()&&(r+="_"+e.uid),r}function af(t,e){return"firestore_targets_"+t+"_"+e}var uf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ca=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ws(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(us("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),cf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ca=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ws(i.error.code,i.error.message)),o?new t(e,i.state,r):(us("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),lf=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ca=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Zu(),s=0;i&&s<r.activeTargetIds.length;++s)i=$s(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(us("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),hf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ca=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(us("SharedClientState","Failed to parse online state: "+e),null)},t}(),ff=function(){function t(){this.activeTargetIds=Zu()}return t.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),df=function(){function t(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new Mu(ys),this.Er=!1,this.Ta=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=of(this.persistenceKey,this.la),this.ma=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ea=this.Ea.zt(this.la,new ff),this.Aa=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.ya=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.ga=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.da)}return t.Kn=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(ns.d)(this,(function(h){switch(h.label){case 0:return[4,this._a.Uo()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(of(this.persistenceKey,r)))&&(o=lf.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)this.wa(c[u]);return this.Ta=[],this.window.addEventListener("unload",(function(){return l.ko()})),this.Er=!0,[2]}}))}))},t.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},t.prototype.va=function(){return this.Sa(this.Ea)},t.prototype.Da=function(t){var e=!1;return this.Ea.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.Ca=function(t){this.xa(t,"pending")},t.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},t.prototype.Fa=function(t){var e="not-current";if(this.Da(t)){var n=this.storage.getItem(af(this.persistenceKey,t));if(n){var r=cf.ca(t,n);r&&(e=r.state)}}return this.Oa.ua(t),this.Va(),e},t.prototype.ka=function(t){this.Oa.ha(t),this.Va()},t.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},t.prototype.La=function(t){this.removeItem(af(this.persistenceKey,t))},t.prototype.Ba=function(t,e,n){this.qa(t,e,n)},t.prototype.Ua=function(t,e,n){var r=this;e.forEach((function(t){r.$a(t)})),this.currentUser=t,n.forEach((function(t){r.Ca(t)}))},t.prototype.Qa=function(t){this.Ka(t)},t.prototype.Wa=function(){this.ja()},t.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return as("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){as("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){as("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.wa=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(as("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ia)return void us("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po((function(){return Object(ns.b)(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Object(ns.d)(this,(function(a){if(this.Er){if(null!==n.key)if(this.Aa.test(n.key)){if(null==n.newValue)return t=this.Ga(n.key),[2,this.za(t,null)];if(e=this.Ha(n.key,n.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(n.key)){if(null!==n.newValue&&(r=this.Ja(n.key,n.newValue)))return[2,this.Ya(r)]}else if(this.Pa.test(n.key)){if(null!==n.newValue&&(i=this.Xa(n.key,n.newValue)))return[2,this.Za(i)]}else if(n.key===this.ya){if(null!==n.newValue&&(o=this.pa(n.newValue)))return[2,this.ba(o)]}else if(n.key===this.ma)(s=function(t){var e=js.q;if(null!=t)try{var n=JSON.parse(t);fs("number"==typeof n),e=n}catch(t){us("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==js.q&&this.k(s);else if(n.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),t.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},t.prototype.xa=function(t,e,n){var r=new uf(this.currentUser,t,e,n),i=sf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.aa())},t.prototype.$a=function(t){var e=sf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Ka=function(t){this.storage.setItem(this.ya,JSON.stringify({clientId:this.la,onlineState:t}))},t.prototype.qa=function(t,e,n){var r=af(this.persistenceKey,t),i=new cf(t,e,n);this.setItem(r,i.aa())},t.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},t.prototype.Ga=function(t){var e=this.Aa.exec(t);return e?e[1]:null},t.prototype.Ha=function(t,e){var n=this.Ga(t);return lf.ca(n,e)},t.prototype.Ja=function(t,e){var n=this.Ra.exec(t),r=Number(n[1]);return uf.ca(new Es(void 0!==n[2]?n[2]:null),r,e)},t.prototype.Xa=function(t,e){var n=this.Pa.exec(t),r=Number(n[1]);return cf.ca(r,e)},t.prototype.pa=function(t){return hf.ca(t)},t.prototype.Ya=function(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this._a.eu(t.batchId,t.state,t.error)]:(as("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},t.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this._a.su(s,a).then((function(){n.Ea=r}))},t.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},t.prototype.Sa=function(t){var e=Zu();return t.forEach((function(t,n){e=e.Pe(n.activeTargetIds)})),e},t}(),pf=function(){function t(){this.iu=new ff,this.ru={},this.fa=null,this.k=null}return t.prototype.Ca=function(t){},t.prototype.Na=function(t,e,n){},t.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},t.prototype.Ba=function(t,e,n){this.ru[t]=e},t.prototype.ka=function(t){this.iu.ha(t)},t.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.La=function(t){delete this.ru[t]},t.prototype.va=function(){return this.iu.activeTargetIds},t.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},t.prototype.start=function(){return this.iu=new ff,Promise.resolve()},t.prototype.Ua=function(t,e,n){},t.prototype.Qa=function(t){},t.prototype.ko=function(){},t.prototype.B=function(t){},t.prototype.Wa=function(){},t}(),gf=function(){function t(){}return t.prototype.ou=function(t){},t.prototype.ko=function(){},t}(),yf=function(){function t(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}return t.prototype.ou=function(t){this.lu.push(t)},t.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},t.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},t.prototype.au=function(){as("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},t.prototype.hu=function(){as("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},t.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),vf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},mf=function(){function t(t){this.fu=t.fu,this.du=t.du}return t.prototype.wu=function(t){this.Eu=t},t.prototype.Tu=function(t){this.Iu=t},t.prototype.onMessage=function(t){this.mu=t},t.prototype.close=function(){this.du()},t.prototype.send=function(t){this.fu(t)},t.prototype.Au=function(){this.Eu()},t.prototype.Ru=function(t){this.Iu(t)},t.prototype.Pu=function(t){this.mu(t)},t}(),bf=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(ns.c)(e,t),e.prototype.Su=function(t,e,n,r){return new Promise((function(i,o){var s=new es;s.listenOnce(Zo.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Xo.NO_ERROR:var e=s.getResponseJson();as("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Xo.TIMEOUT:as("Connection",'RPC "'+t+'" timed out'),o(new ws(_s.DEADLINE_EXCEEDED,"Request time out"));break;case Xo.HTTP_ERROR:var n=s.getStatus();if(as("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(_s).indexOf(e)>=0?e:_s.UNKNOWN}(r.status);o(new ws(a,r.message))}else o(new ws(_s.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ws(_s.UNAVAILABLE,"Connection failed."));break;default:hs()}}finally{as("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Wo,i=Kr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(o.initMessageHeaders,e),Object(tn.u)()||Object(tn.x)()||Object(tn.r)()||Object(tn.t)()||Object(tn.y)()||Object(tn.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");as("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new mf({fu:function(t){c?as("Connection","Not sending because WebChannel is closed:",t):(u||(as("Connection","Opening WebChannel transport."),a.open(),u=!0),as("Connection","WebChannel sending:",t),a.send(t))},du:function(){return a.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(a,ts.EventType.OPEN,(function(){c||as("Connection","WebChannel transport opened.")})),h(a,ts.EventType.CLOSE,(function(){c||(c=!0,as("Connection","WebChannel transport closed"),l.Ru())})),h(a,ts.EventType.ERROR,(function(t){c||(c=!0,cs("Connection","WebChannel transport errored:",t),l.Ru(new ws(_s.UNAVAILABLE,"The operation could not be completed")))})),h(a,ts.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];fs(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){as("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Au[t];if(void 0!==e)return Lu(e)}(i),s=r.message;void 0===o&&(o=_s.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Ru(new ws(o,s)),a.close()}else as("Connection","WebChannel received:",n),l.Pu(n)}})),h(i,Jo.STAT_EVENT,(function(t){10===t.stat?as("Connection","Detected buffering proxy"):11===t.stat&&as("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Au()}),0),l},e}(function(){function t(t){this.yu=t,this.t=t.t,this.gu=(t.ssl?"https":"http")+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.pu=function(t,e,n,r){var i=this.bu(t,e);as("RestConnection","Sending: ",i,n);var o={};return this.vu(o,r),this.Su(t,i,o,n).then((function(t){return as("RestConnection","Received: ",t),t}),(function(e){throw cs("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},t.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.9",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},t.prototype.bu=function(t,e){return this.gu+"/v1/"+e+":"+vf[t]},t}());function _f(){return"undefined"!=typeof window?window:null}function wf(){return"undefined"!=typeof document?document:null}function Of(t){return new dc(t,!0)}var Ef=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}return t.prototype.reset=function(){this.Fu=0},t.prototype.Mu=function(){this.Fu=this.$u},t.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);i>0&&as("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,(function(){return e.ku=Date.now(),t()})),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},t.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},t.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},t}(),Cf=function(){function t(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new Ef(t,e)}return t.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.Hu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Ju()},t.prototype.stop=function(){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.Yu=function(){this.state=0,this.Gu.reset()},t.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,(function(){return t.Zu()})))},t.prototype.th=function(t){this.eh(),this.stream.send(t)},t.prototype.Zu=function(){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){return this.Hu()?[2,this.close(0)]:[2]}))}))},t.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},t.prototype.close=function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(n){switch(n.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==t?this.Gu.reset():e&&e.code===_s.RESOURCE_EXHAUSTED?(us(e.toString()),us("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):e&&e.code===_s.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.nh=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.sh(this.Wu),n=this.Wu;this.Ku.getToken().then((function(e){t.Wu===n&&t.ih(e)}),(function(n){e((function(){var e=new ws(_s.UNKNOWN,"Fetching auth token failed: "+n.message);return t.rh(e)}))}))},t.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu((function(){n((function(){return e.state=2,e.listener.wu()}))})),this.stream.Tu((function(t){n((function(){return e.rh(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu((function(){return Object(ns.b)(t,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.rh=function(t){return as("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.sh=function(t){var e=this;return function(n){e.Zr.Ps((function(){return e.Wu===t?n():(as("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Sf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).Qt=i,s}return Object(ns.c)(e,t),e.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},e.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:hs()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Bt?(fs(void 0===e||"string"==typeof e),bs.fromBase64String(e||"")):(fs(void 0===e||e instanceof Uint8Array),bs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?_s.UNKNOWN:Lu(t.code);return new ws(e,t.message||"")}(a);n=new sc(r,i,o,s||null)}else if("documentChange"in e){i=wc(t,(r=e.documentChange).document.name),o=vc(r.document.updateTime);var a=new ua({mapValue:{fields:r.document.fields}}),u=(s=new fa(i,o,a,{}),r.targetIds||[]);n=new ic(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=wc(t,(r=e.documentDelete).document),o=r.readTime?vc(r.readTime):Ns.min(),a=new da(i,o),n=new ic([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=wc(t,(r=e.documentRemove).document),n=new ic([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return hs();var c=e.filter;i=new Ru(r=c.count||0),n=new oc(o=c.targetId,i)}return n}(this.Qt,t),n=function(t){if(!("targetChange"in t))return Ns.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ns.min():e.readTime?vc(e.readTime):Ns.min()}(t);return this.listener.ah(e,n)},e.prototype.uh=function(t){var e={};e.database=Cc(this.Qt),e.addTarget=function(t,e){var n,r=e.target;return(n=ba(r)?{documents:Ac(t,r)}:{query:Nc(t,r)}).targetId=e.targetId,e.resumeToken.l()>0?n.resumeToken=gc(t,e.resumeToken):e.Ot._(Ns.min())>0&&(n.readTime=pc(t,e.Ot.j())),n}(this.Qt,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hs()}}(0,e.Ft);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.th(e)},e.prototype.hh=function(t){var e={};e.database=Cc(this.Qt),e.removeTarget=t,this.th(e)},e}(Cf),Tf=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).Qt=i,s.lh=!1,s}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.nh=function(){this.lh&&this.fh([])},e.prototype.oh=function(t){return this.Qu.Cu("Write",t)},e.prototype.onMessage=function(t){if(fs(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=function(t,e){return t&&t.length>0?(fs(void 0!==e),t.map((function(t){return function(t,e){var n=vc(t.updateTime?t.updateTime:e);n.isEqual(Ns.min())&&(n=vc(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new gu(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=vc(t.commitTime);return this.listener.dh(n,e)}return fs(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},e.prototype.Eh=function(){var t={};t.database=Cc(this.Qt),this.th(t)},e.prototype.fh=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return xc(e.Qt,t)}))};this.th(n)},e}(Cf),If=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qu=n,i.Qt=r,i.Th=!1,i}return Object(ns.c)(e,t),e.prototype.Ih=function(){if(this.Th)throw new ws(_s.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.pu=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.pu(t,e,n,i)})).catch((function(t){throw t.code===_s.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.Du=function(t,e,n){var r=this;return this.Ih(),this.credentials.getToken().then((function(i){return r.Qu.Du(t,e,n,i)})).catch((function(t){throw t.code===_s.UNAUTHENTICATED&&r.credentials.p(),t}))},e.prototype.terminate=function(){this.Th=!1},e}((function(){})),xf=function(){function t(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}return t.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,(function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()})))},t.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,this.mh>=1&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},t.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},t.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},t.prototype.gh=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(us(e),this.Rh=!1):as("OnlineStateTracker",e)},t.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},t}(),jf=function(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou((function(t){n.Ps((function(){return Object(ns.b)(o,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return Ff(this)?(as("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return(e=ds(t)).Nh.add(4),[4,Nf(e)];case 1:return n.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,Af(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Oh=new xf(n,r)};function Af(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:if(!Ff(t))return[3,4];e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Nf(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:e=0,n=t.$h,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function kf(t,e){var n=ds(t);n.xh.has(e.targetId)||(n.xh.set(e.targetId,e),Mf(n)?Lf(n):Jf(n).Hu()&&Rf(n,e))}function Pf(t,e){var n=ds(t),r=Jf(n);n.xh.delete(e),r.Hu()&&Df(n,e),0===n.xh.size&&(r.Hu()?r.Xu():Ff(n)&&n.Oh.set("Unknown"))}function Rf(t,e){t.kh.on(e.targetId),Jf(t).uh(e)}function Df(t,e){t.kh.on(e),Jf(t).hh(e)}function Lf(t){t.kh=new uc({vn:function(e){return t.Dh.vn(e)},Sn:function(e){return t.xh.get(e)||null}}),Jf(t).start(),t.Oh.Ph()}function Mf(t){return Ff(t)&&!Jf(t).zu()&&t.xh.size>0}function Ff(t){return 0===ds(t).Nh.size}function Uf(t){t.kh=void 0}function Vf(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){return t.xh.forEach((function(e,n){Rf(t,e)})),[2]}))}))}function qf(t,e){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(n){return Uf(t),Mf(t)?(t.Oh.Vh(e),Lf(t)):t.Oh.set("Unknown"),[2]}))}))}function Hf(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o;return Object(ns.d)(this,(function(s){switch(s.label){case 0:if(t.Oh.set("Online"),!(e instanceof sc&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o;return Object(ns.d)(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.xh.has(o=i[r])?[4,t.Dh.Mh(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.xh.delete(o),t.kh.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),as("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Bf(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ic?t.kh.dn(e):e instanceof oc?t.kh.Pn(e):t.kh.Tn(e),n.isEqual(Ns.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Lh(t.bh)];case 8:return i=s.sent(),n._(i)>=0?[4,function(t,e){var n=t.kh.Vn(e);return n.$e.forEach((function(n,r){if(n.resumeToken.l()>0){var i=t.xh.get(r);i&&t.xh.set(r,i.Mt(n.resumeToken,e))}})),n.Fe.forEach((function(e){var n=t.xh.get(e);if(n){t.xh.set(e,n.Mt(bs.T,n.Ot)),Df(t,e);var r=new Za(n.target,e,1,n.sequenceNumber);Rf(t,r)}})),t.Dh.Lh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return as("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Bf(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Bf(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r=this;return Object(ns.d)(this,(function(i){switch(i.label){case 0:if(!$c(e))throw e;return t.Nh.add(1),[4,Nf(t)];case 1:return i.sent(),t.Oh.set("Offline"),n||(n=function(){return Lh(t.bh)}),t._s.po((function(){return Object(ns.b)(r,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return as("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Nh.delete(1),[4,Af(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function zf(t,e){return e().catch((function(n){return Bf(t,n,e)}))}function Gf(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(ns.d)(this,(function(s){switch(s.label){case 0:e=ds(t),n=td(e),r=e.Ch.length>0?e.Ch[e.Ch.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Ff(t)&&t.Ch.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Uh(e.bh,r)];case 3:return null===(i=s.sent())?(0===e.Ch.length&&n.Xu(),[3,7]):(r=i.batchId,function(t,e){t.Ch.push(e);var n=td(t);n.Hu()&&n._h&&n.fh(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Bf(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Wf(e)&&Qf(e),[2]}}))}))}function Wf(t){return Ff(t)&&!td(t).zu()&&t.Ch.length>0}function Qf(t){td(t).start()}function Kf(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){return td(t).Eh(),[2]}))}))}function $f(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n,r;return Object(ns.d)(this,(function(i){for(e=td(t),n=0,r=t.Ch;n<r.length;n++)e.fh(r[n].mutations);return[2]}))}))}function Yf(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return r=t.Ch.shift(),i=xl.from(r,e,n),[4,zf(t,(function(){return t.Dh.Bh(i)}))];case 1:return o.sent(),[4,Gf(t)];case 2:return o.sent(),[2]}}))}))}function Xf(t,e){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(n){switch(n.label){case 0:return e&&td(t)._h?[4,function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return Du(r=e.code)&&r!==_s.ABORTED?(n=t.Ch.shift(),td(t).Yu(),[4,zf(t,(function(){return t.Dh.qh(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Gf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Wf(t)&&Qf(t),[2]}}))}))}function Zf(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return n=ds(t),e?(n.Nh.delete(2),[4,Af(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Nh.add(2),[4,Nf(n)]);case 3:r.sent(),n.Oh.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Jf(t){var e=this;return t.Uh||(t.Uh=function(t,e,n){var r=ds(t);return r.Ih(),new Sf(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Vf.bind(null,t),Tu:qf.bind(null,t),ah:Hf.bind(null,t)}),t.$h.push((function(n){return Object(ns.b)(e,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return n?(t.Uh.Yu(),Mf(t)?Lf(t):t.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Uh.stop()];case 2:e.sent(),Uf(t),e.label=3;case 3:return[2]}}))}))}))),t.Uh}function td(t){var e=this;return t.Qh||(t.Qh=function(t,e,n){var r=ds(t);return r.Ih(),new Tf(e,r.Qu,r.credentials,r.Qt,n)}(t.Sh,t._s,{wu:Kf.bind(null,t),Tu:Xf.bind(null,t),wh:$f.bind(null,t),dh:Yf.bind(null,t)}),t.$h.push((function(n){return Object(ns.b)(e,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return n?(t.Qh.Yu(),[4,Gf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qh.stop()];case 3:e.sent(),t.Ch.length>0&&(as("RemoteStore","Stopping write stream with "+t.Ch.length+" pending writes"),t.Ch=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qh}var ed=function(){this.Kh=void 0,this.listeners=[]},nd=function(){this.queries=new Yl((function(t){return Qa(t)}),Wa),this.onlineState="Unknown",this.Wh=new Set};function rd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ns.d)(this,(function(c){switch(c.label){case 0:if(n=ds(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new ed),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.jh(r)];case 2:return s.Kh=c.sent(),[3,4];case 3:return a=c.sent(),u=el(a,"Initialization of query '"+Ka(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Gh(n.onlineState),o.Kh&&e.zh(o.Kh)&&ad(n),[2]}}))}))}function id(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ns.d)(this,(function(a){return n=ds(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Hh(r))]:[2]}))}))}function od(t,e){for(var n=ds(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&ad(n)}function sd(t,e,n){var r=ds(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ad(t){t.Wh.forEach((function(t){t.next()}))}var ud=function(){function t(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ec(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},t.prototype.onError=function(t){this.Jh.error(t)},t.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},t.prototype.tl=function(t,e){return!t.fromCache||!(this.options.nl&&"Offline"!==e||t.docs.et()&&"Offline"!==e)},t.prototype.Zh=function(t){return t.docChanges.length>0||!!(t.Ce||this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.el=function(t){t=ec.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},t}(),cd=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.sl=function(){return"metadata"in this.payload},t}(),ld=function(){function t(t){this.Qt=t}return t.prototype.Pc=function(t){return wc(this.Qt,t)},t.prototype.yc=function(t){return t.metadata.exists?Ic(this.Qt,t.document,!1):new da(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},t.prototype.gc=function(t){return vc(t)},t}();!function(){function t(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.ol=function(t){for(var e=new Map,n=new ld(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Yu()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return[4,Wh(this.bh,new ld(this.Qt),this.documents,this.il.id)];case 1:t=o.sent(),e=this.ol(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,Qh(this.bh,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new xh(Object.assign({},this.progress),t))]}}))}))}}();var hd=function(t){this.key=t},fd=function(t){this.key=t},dd=function(){function t(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=Yu(),this.De=Yu(),this.hl=Ya(t),this.ll=new Ju(this.hl)}return Object.defineProperty(t.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),t.prototype.fl=function(t,e){var n=this,r=e?e.dl:new tc,i=e?e.ll:this.ll,o=e?e.De:this.De,s=i,a=!1,u=Fa(this.query)&&i.size===this.query.limit?i.last():null,c=Ua(this.query)&&i.size===this.query.limit?i.first():null;if(t.Xt((function(t,e){var l=i.get(t),h=e instanceof fa?e:null;h&&(h=$a(n.query,h)?h:null);var f=!!l&&n.De.has(l.key),d=!!h&&(h.Vt||n.De.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.wl(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.hl(h,u)>0||c&&n.hl(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Fa(this.query)||Ua(this.query))for(;s.size>this.query.limit;){var l=Fa(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{ll:s,dl:r,lc:a,De:o}},t.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},t.prototype.wi=function(t,e,n){var r=this,i=this.ll;this.ll=t.ll,this.De=t.De;var o=t.dl.ve();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hs()}};return n(t)-n(e)}(t.type,e.type)||r.hl(t.doc,e.doc)})),this.El(n);var s=e?this.Tl():[],a=0===this.ul.size&&this.Be?1:0,u=a!==this.al;return this.al=a,0!==o.length||u?{snapshot:new ec(this.query,t.ll,i,o,t.De,0===a,u,!1),Il:s}:{Il:s}},t.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new tc,De:this.De,lc:!1},!1)):{Il:[]}},t.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},t.prototype.El=function(t){var e=this;t&&(t.qe.forEach((function(t){return e.cl=e.cl.add(t)})),t.Ue.forEach((function(t){})),t.Qe.forEach((function(t){return e.cl=e.cl.delete(t)})),this.Be=t.Be)},t.prototype.Tl=function(){var t=this;if(!this.Be)return[];var e=this.ul;this.ul=Yu(),this.ll.forEach((function(e){t.ml(e.key)&&(t.ul=t.ul.add(e.key))}));var n=[];return e.forEach((function(e){t.ul.has(e)||n.push(new fd(e))})),this.ul.forEach((function(t){e.has(t)||n.push(new hd(t))})),n},t.prototype.Al=function(t){this.cl=t.Rc,this.ul=Yu();var e=this.fl(t.documents);return this.wi(e,!0)},t.prototype.Rl=function(){return ec.Ne(this.query,this.ll,this.De,0===this.al)},t}(),pd=function(t,e,n){this.query=t,this.targetId=e,this.view=n},gd=function(t){this.key=t,this.Pl=!1},yd=function(){function t(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new Yl((function(t){return Qa(t)}),Wa),this.Sl=new Map,this.Dl=new Set,this.Cl=new Mu(Ls.H),this.xl=new Map,this.Nl=new $h,this.$l={},this.Fl=new Map,this.Ol=oh.Li(),this.onlineState="Unknown",this.kl=void 0}return Object.defineProperty(t.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),t}();function vd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:return n=Wd(t),(i=n.vl.get(e))?(n.Vl.Fa(i.targetId),r=i.view.Rl(),[3,4]):[3,1];case 1:return[4,Vh(n.bh,za(e))];case 2:return o=a.sent(),s=n.Vl.Fa(o.targetId),[4,md(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Ml&&kf(n.yl,o),a.label=4;case 4:return[2,r]}}))}))}function md(t,e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(ns.d)(this,(function(l){switch(l.label){case 0:return t.Ll=function(e,n,r){return function(t,e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:return(i=e.view.fl(n)).lc?[4,Hh(t.bh,e.query,!1).then((function(t){return e.view.fl(t.documents,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.$e.get(e.targetId),s=e.view.wi(i,t.Ml,o),[2,(Nd(t,e.targetId,s.Il),s.snapshot)]}}))}))}(t,e,n,r)},[4,Hh(t.bh,e,!0)];case 1:return i=l.sent(),o=new dd(e,i.Rc),s=o.fl(i.documents),a=rc.Le(n,r&&"Offline"!==t.onlineState),u=o.wi(s,t.Ml,a),Nd(t,n,u.Il),c=new pd(e,n,o),[2,(t.vl.set(e,c),t.Sl.has(n)?t.Sl.get(n).push(e):t.Sl.set(n,[e]),u.snapshot)]}}))}))}function bd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return n=ds(t),r=n.vl.get(e),(i=n.Sl.get(r.targetId)).length>1?[2,(n.Sl.set(r.targetId,i.filter((function(t){return!Wa(t,e)}))),void n.vl.delete(e))]:n.Ml?(n.Vl.ka(r.targetId),n.Vl.Da(r.targetId)?[3,2]:[4,qh(n.bh,r.targetId,!1).then((function(){n.Vl.La(r.targetId),Pf(n.yl,r.targetId),jd(n,r.targetId)})).catch($l)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return jd(n,r.targetId),[4,qh(n.bh,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function _d(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:r=Qd(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=ds(t),i=As.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Yu());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Tc.Xo(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=wu(c,n.get(c.key));null!=l&&s.push(new Su(c.key,l,la(l.proto.mapValue),yu.exists(!0)))}return r.zo.Ri(t,i,s,e)}))})).then((function(t){var e=t.xs(n);return{batchId:t.batchId,ri:e}}))}(r.bh,e)];case 2:return i=a.sent(),r.Vl.Ca(i.batchId),function(t,e,n){var r=t.$l[t.currentUser.A()];r||(r=new Mu(ys)),r=r.zt(e,n),t.$l[t.currentUser.A()]=r}(r,i.batchId,n),[4,Rd(r,i.ri)];case 3:return a.sent(),[4,Gf(r.yl)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=el(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function wd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:n=ds(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Mh(n.bh,e)];case 2:return r=i.sent(),e.$e.forEach((function(t,e){var r=n.xl.get(e);r&&(fs(t.qe.size+t.Ue.size+t.Qe.size<=1),t.qe.size>0?r.Pl=!0:t.Ue.size>0?fs(r.Pl):t.Qe.size>0&&(fs(r.Pl),r.Pl=!1))})),[4,Rd(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,$l(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Od(t,e,n){var r=ds(t);if(r.Ml&&0===n||!r.Ml&&1===n){var i=[];r.vl.forEach((function(t,n){var r=n.view.Gh(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ds(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Gh(e)&&(r=!0)})),r&&ad(n)}(r.gl,e),i.length&&r.bl.ah(i),r.onlineState=e,r.Ml&&r.Vl.Qa(e)}}function Ed(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Object(ns.d)(this,(function(c){switch(c.label){case 0:return(r=ds(t)).Vl.Ba(e,"rejected",n),i=r.xl.get(e),(o=i&&i.key)?(s=(s=new Mu(Ls.H)).zt(o,new da(o,Ns.min())),a=Yu().add(o),u=new nc(Ns.min(),new Map,new Vu(ys),s,a),[4,wd(r,u)]):[3,2];case 1:return c.sent(),r.Cl=r.Cl.remove(o),r.xl.delete(e),Pd(r),[3,4];case 2:return[4,qh(r.bh,e,!1).then((function(){return jd(r,e,n)})).catch($l)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Cd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:n=ds(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Dh(n.bh,e)];case 2:return i=o.sent(),xd(n,r,null),Id(n,r),n.Vl.Na(r,"acknowledged"),[4,Rd(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,$l(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Sd(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:r=ds(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=ds(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.zo.Pi(t,e).next((function(e){return fs(null!==e),r=e.keys(),n.zo.Ci(t,e)})).next((function(){return n.zo.$i(t)})).next((function(){return n.Tc.Xo(t,r)}))}))}(r.bh,e)];case 2:return i=o.sent(),xd(r,e,n),Id(r,e),r.Vl.Na(e,"rejected",n),[4,Rd(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,$l(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Td(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:Ff((n=ds(t)).yl)||as("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=ds(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.zo.Vi(t)}))}(n.bh)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fl.get(r)||[]).push(e),n.Fl.set(r,i),[3,4]);case 3:return o=a.sent(),s=el(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function Id(t,e){(t.Fl.get(e)||[]).forEach((function(t){t.resolve()})),t.Fl.delete(e)}function xd(t,e,n){var r=ds(t),i=r.$l[r.currentUser.A()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i}}function jd(t,e,n){void 0===n&&(n=null),t.Vl.ka(e);for(var r=0,i=t.Sl.get(e);r<i.length;r++){var o=i[r];t.vl.delete(o),n&&t.bl.Bl(o,n)}t.Sl.delete(e),t.Ml&&t.Nl.Fc(e).forEach((function(e){t.Nl.Fi(e)||Ad(t,e)}))}function Ad(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(Pf(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),Pd(t))}function Nd(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof hd?(t.Nl.nr(o.key,e),kd(t,o)):o instanceof fd?(as("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Fi(o.key)||Ad(t,o.key)):hs()}}function kd(t,e){var n=e.key,r=n.path.rt();t.Cl.get(n)||t.Dl.has(r)||(as("SyncEngine","New document in limbo: "+n),t.Dl.add(r),Pd(t))}function Pd(t){for(;t.Dl.size>0&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Ls(Ps.ot(e)),r=t.Ol.next();t.xl.set(r,new gd(n)),t.Cl=t.Cl.zt(n,r),kf(t.yl,new Za(za(Ma(n.path)),r,2,js.q))}}function Rd(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:return r=ds(t),i=[],o=[],s=[],r.vl.et()?[3,3]:(r.vl.forEach((function(t,a){s.push(r.Ll(a,e,n).then((function(t){if(t){r.Ml&&r.Vl.Ba(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Ah.oc(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.bl.ah(i),[4,function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Object(ns.d)(this,(function(l){switch(l.label){case 0:n=ds(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return zc.forEach(e,(function(e){return zc.forEach(e.ic,(function(r){return n.persistence.Ti.nr(t,e.targetId,r)})).next((function(){return zc.forEach(e.rc,(function(r){return n.persistence.Ti.ir(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!$c(r=l.sent()))throw r;return as("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.fc.get(a),c=u.Lt(u.Ot),n.fc=n.fc.zt(a,c));return[2]}}))}))}(r.bh,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Dd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return(n=ds(t)).currentUser.isEqual(e)?[3,3]:(as("SyncEngine","User change. New user:",e.A()),[4,Rh(n.bh,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fl.forEach((function(t){t.forEach((function(t){t.reject(new ws(_s.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fl.clear()}(n),n.Vl.Ua(e,r.mc,r.Ac),[4,Rd(n,r.Ic)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Ld(t,e){var n=ds(t),r=n.xl.get(e);if(r&&r.Pl)return Yu().add(r.key);var i=Yu(),o=n.Sl.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.vl.get(a[s]);i=i.Pe(u.view._l)}return i}function Md(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return[4,Hh((n=ds(t)).bh,e.query,!0)];case 1:return r=o.sent(),i=e.view.Al(r),[2,(n.Ml&&Nd(n,e.targetId,i.Il),i)]}}))}))}function Fd(t){return Object(ns.b)(this,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){return[2,zh((e=ds(t)).bh).then((function(t){return Rd(e,t)}))]}))}))}function Ud(t,e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o;return Object(ns.d)(this,(function(s){switch(s.label){case 0:return[4,function(t,e){var n=ds(t),r=ds(n.zo);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.yi(t,e).next((function(e){return e?n.Tc.Xo(t,e):zc.resolve(null)}))}))}((i=ds(t)).bh,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Gf(i.yl)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(xd(i,e,r||null),Id(i,e),function(t,e){ds(ds(t).zo).xi(e)}(i.bh,e)):hs(),s.label=4;case 4:return[4,Rd(i,o)];case 5:return s.sent(),[3,7];case 6:as("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}}))}))}function Vd(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Object(ns.d)(this,(function(c){switch(c.label){case 0:return Wd(n=ds(t)),Qd(n),!0!==e||!0===n.kl?[3,3]:(r=n.Vl.va(),[4,qd(n,r.it())]);case 1:return i=c.sent(),n.kl=!0,[4,Zf(n.yl,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)kf(n.yl,s[o]);return[3,7];case 3:return!1!==e||!1===n.kl?[3,7]:(a=[],u=Promise.resolve(),n.Sl.forEach((function(t,e){n.Vl.Ma(e)?a.push(e):u=u.then((function(){return jd(n,e),qh(n.bh,e,!0)})),Pf(n.yl,e)})),[4,u]);case 4:return c.sent(),[4,qd(n,a)];case 5:return c.sent(),function(t){var e=ds(t);e.xl.forEach((function(t,n){Pf(e.yl,n)})),e.Nl.Oc(),e.xl=new Map,e.Cl=new Mu(Ls.H)}(n),n.kl=!1,[4,Zf(n.yl,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function qd(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(ns.d)(this,(function(g){switch(g.label){case 0:n=ds(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Sl.get(a=s[o]))&&0!==c.length?[4,Vh(n.bh,za(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.vl.get(h[l]),[4,Md(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Bh(n.bh,a)];case 8:return p=g.sent(),[4,Vh(n.bh,p)];case 9:return u=g.sent(),[4,md(n,Hd(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.bl.ah(i),r)]}}))}))}function Hd(t){return La(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Bd(t){var e=ds(t);return ds(ds(e.bh).persistence).Uo()}function zd(t,e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:return(i=ds(t)).kl?(as("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Sl.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,zh(i.bh)];case 3:return o=a.sent(),s=nc.Me(e,"current"===n),[4,Rd(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,qh(i.bh,e,!0)];case 6:return a.sent(),jd(i,e,r),[3,8];case 7:hs(),a.label=8;case 8:return[2]}}))}))}function Gd(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h;return Object(ns.d)(this,(function(f){switch(f.label){case 0:if(!(r=Wd(t)).kl)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Sl.has(s=o[i])?(as("SyncEngine","Adding an already active target "+s),[3,5]):[4,Bh(r.bh,s)]:[3,6];case 2:return a=f.sent(),[4,Vh(r.bh,a)];case 3:return u=f.sent(),[4,md(r,Hd(a),u.targetId,!1)];case 4:f.sent(),kf(r.yl,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return r.Sl.has(t)?[4,qh(r.bh,t,!1).then((function(){Pf(r.yl,t),jd(r,t)})).catch($l)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Wd(t){var e=ds(t);return e.yl.Dh.Lh=wd.bind(null,e),e.yl.Dh.vn=Ld.bind(null,e),e.yl.Dh.Mh=Ed.bind(null,e),e.bl.ah=od.bind(null,e.gl),e.bl.Bl=sd.bind(null,e.gl),e}function Qd(t){var e=ds(t);return e.yl.Dh.Bh=Cd.bind(null,e),e.yl.Dh.qh=Sd.bind(null,e),e}var Kd=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return this.Qt=Of(t.yu.t),this.Vl=this.Wl(t),this.persistence=this.jl(t),[4,this.persistence.start()];case 1:return e.sent(),this.Gl=this.zl(t),this.bh=this.Hl(t),[2]}}))}))},t.prototype.zl=function(t){return null},t.prototype.Hl=function(t){return Ph(this.persistence,new Nh,t.Jl,this.Qt)},t.prototype.jl=function(t){return new ef(rf.ia,this.Qt)},t.prototype.Wl=function(t){return new pf},t.prototype.terminate=function(){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}}))}))},t}(),$d=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Yl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(ns.c)(e,t),e.prototype.initialize=function(e){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Gh(this.bh)];case 2:return n.sent(),[4,this.Yl.initialize(this,e)];case 3:return n.sent(),[4,Qd(this.Yl._a)];case 4:return n.sent(),[4,Gf(this.Yl.yl)];case 5:return n.sent(),[2]}}))}))},e.prototype.Hl=function(t){return Ph(this.persistence,new Nh,t.Jl,this.Qt)},e.prototype.zl=function(t){return new fh(this.persistence.Ti.lr,t._s)},e.prototype.jl=function(t){var e=Ih(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Kl.Ys(this.cacheSizeBytes):Kl.ti;return new Ch(this.synchronizeTabs,e,t.clientId,n,t._s,_f(),wf(),this.Qt,this.Vl,!!this.forceOwnership)},e.prototype.Wl=function(t){return new pf},e}(Kd),Yd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Yl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(ns.c)(e,t),e.prototype.initialize=function(e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r=this;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Yl._a,this.Vl instanceof df?(this.Vl._a={eu:Ud.bind(null,n),nu:zd.bind(null,n),su:Gd.bind(null,n),Uo:Bd.bind(null,n),tu:Fd.bind(null,n)},[4,this.Vl.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Ro((function(t){return Object(ns.b)(r,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return[4,Vd(this.Yl._a,t)];case 1:return e.sent(),this.Gl&&(t&&!this.Gl.Er?this.Gl.start(this.bh):t||this.Gl.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Wl=function(t){var e=_f();if(!df.Kn(e))throw new ws(_s.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ih(t.yu.t,t.yu.persistenceKey);return new df(e,t._s,n,t.clientId,t.Jl)},e}($d),Xd=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n=this;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return this.bh?[3,2]:(this.bh=t.bh,this.Vl=t.Vl,this.Sh=this.Xl(e),this.yl=this.Zl(e),this.gl=this.t_(e),this._a=this.e_(e,!t.synchronizeTabs),this.Vl.fa=function(t){return Od(n._a,t,1)},this.yl.Dh.n_=Dd.bind(null,this._a),[4,Zf(this.yl,this._a.Ml)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.t_=function(t){return new nd},t.prototype.Xl=function(t){var e=Of(t.yu.t),n=new bf(t.yu);return function(t,e,n){return new If(t,e,n)}(t.credentials,n,e)},t.prototype.Zl=function(t){var e,n,r,i,o,s=this;return e=this.bh,n=this.Sh,r=t._s,i=function(t){return Od(s._a,t,0)},o=yf.Kn()?new yf:new gf,new jf(e,n,r,i,o)},t.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){var a=new yd(t,e,n,r,i,o);return s&&(a.kl=!0),a}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},t.prototype.terminate=function(){return function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return e=ds(t),as("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,Nf(e)];case 1:return n.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}}))}))}(this.yl)},t}(),Zd=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.i_=function(){this.muted=!0},t.prototype.s_=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Jd=(function(){function t(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Bc,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then((function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.r_.cancel()},t.prototype.getMetadata=function(){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Ql=function(){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}}))}))},t.prototype.c_=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e,n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return[4,this.a_()];case 1:return null===(t=i.sent())?[2,null]:(e=this.o_.decode(t),n=Number(e),isNaN(n)&&this.u_("length string ("+e+") is not valid number"),[4,this.h_(n)]);case 2:return r=i.sent(),[2,new cd(JSON.parse(r),t.length+n)]}}))}))},t.prototype.l_=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.a_=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.h_=function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.__()]:[3,3];case 1:n.sent()&&this.u_("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.__=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return[4,this.r_.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ws(_s.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Ds(t)}return t.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},t}()),tp=function(t){this._methodName=t},ep=function(t){this.d_=t};function np(t,e,n){if(!n)throw new ws(_s.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function rp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ws(_s.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ip(t,e,n,r){if(!0===e&&!0===r)throw new ws(_s.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function op(t){if(!Ls.wt(t))throw new ws(_s.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function sp(t){if(Ls.wt(t))throw new ws(_s.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ap(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":hs()}function up(t,e){if("_delegate"in t&&(t=t.d_),!(t instanceof e)){if(e.name===t.constructor.name)throw new ws(_s.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ap(t);throw new ws(_s.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function cp(t,e){if(e<=0)throw new ws(_s.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var lp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ws(_s.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ws(_s.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,ip("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),hp=new Map,fp=function(){function t(t,e){this.w_="(lite)",this.E_=new lp({}),this.T_=!1,t instanceof is?(this.I_=t,this.m_=new Ss):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ws(_s.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new is(t.options.projectId)}(t),this.m_=new Ts(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.A_)throw new ws(_s.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),t.prototype.g_=function(t){if(this.T_)throw new ws(_s.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new lp(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new Ss;switch(t.type){case"gapi":var e=t.client;return fs(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xs(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ws(_s.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.V_=function(){return this.E_},t.prototype.p_=function(){return this.T_=!0,this.E_},t.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},t.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},t.prototype.b_=function(){return(t=hp.get(this))&&(as("ComponentProvider","Removing Datastore"),hp.delete(this),t.terminate()),Promise.resolve();var t},t}(),dp=function(){function t(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gp(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.S_)},t}(),pp=function(){function t(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.C_)},t}(),gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Ma(r))||this).firestore=e,i.D_=r,i.type="collection",i}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new dp(this.firestore,null,new Ls(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.D_)},e}(pp);function yp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof ep&&(t=t.d_),np("collection","path",e),t instanceof fp)return sp(n=Ps.ot.apply(Ps,Object(ns.g)([e],r))),new gp(t,null,n);if(!(t instanceof dp||t instanceof gp))throw new ws(_s.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return sp(n=Ps.ot.apply(Ps,Object(ns.g)([t.path],r)).child(Ps.ot(e))),new gp(t.firestore,null,n)}function vp(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof ep&&(t=t.d_),1===arguments.length&&(e=gs.u()),np("doc","path",e),t instanceof fp)return op(n=Ps.ot.apply(Ps,Object(ns.g)([e],r))),new dp(t,null,new Ls(n));if(!(t instanceof dp||t instanceof gp))throw new ws(_s.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return op(n=t.D_.child(Ps.ot.apply(Ps,Object(ns.g)([e],r)))),new dp(t.firestore,t instanceof gp?t.v_:null,new Ls(n))}function mp(t,e){return t instanceof ep&&(t=t.d_),e instanceof ep&&(e=e.d_),(t instanceof dp||t instanceof gp)&&(e instanceof dp||e instanceof gp)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function bp(t,e){return t instanceof ep&&(t=t.d_),e instanceof ep&&(e=e.d_),t instanceof pp&&e instanceof pp&&t.firestore===e.firestore&&Wa(t.C_,e.C_)&&t.v_===e.v_}var _p=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ws(_s.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ws(_s.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},t.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},t.prototype.U=function(t){return ys(this.x_,t.x_)||ys(this.N_,t.N_)},t}(),wp=/^__.*__$/,Op=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return null!==this.Gt?new Su(t,this.data,this.Gt,e,this.fieldTransforms):new Cu(t,this.data,e,this.fieldTransforms)},t}(),Ep=function(){function t(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}return t.prototype.F_=function(t,e){return new Su(t,this.data,this.Gt,e,this.fieldTransforms)},t}();function Cp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hs()}}var Sp=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),t.prototype.M_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},t.prototype.L_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.q_(t),r},t.prototype.U_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.M_({path:n,B_:!1});return r.O_(),r},t.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},t.prototype.K_=function(t){return Gp(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},t.prototype.contains=function(t){return void 0!==this.Gt.find((function(e){return t.nt(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.nt(e.field)}))},t.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},t.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(Cp(this.k_)&&wp.test(t))throw this.K_('Document fields cannot begin and end with "__"')},t}(),Tp=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||Of(t)}return t.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new Sp({k_:t,methodName:e,j_:n,path:Ds.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},t}();function Ip(t){var e=t.p_(),n=Of(t.I_);return new Tp(t.I_,!!e.ignoreUndefinedProperties,n)}function xp(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);qp("Data must be an object, but it was:",s,r);var a,u,c=Up(r,s);if(o.merge)a=new Vs(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Hp(e,f[h],n);if(!s.contains(d))throw new ws(_s.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Wp(l,d)||l.push(d)}a=new Vs(l),u=s.fieldTransforms.filter((function(t){return a.Tt(t.field)}))}else a=null,u=s.fieldTransforms;return new Op(new ua(c),a,u)}var jp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.z_=function(t){if(2!==t.k_)throw t.K_(1===t.k_?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(tp);function Ap(t,e,n){return new Sp({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var Np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.z_=function(t){return new pu(t.path,new su)},e.prototype.isEqual=function(t){return t instanceof e},e}(tp),kp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(ns.c)(e,t),e.prototype.z_=function(t){var e=Ap(this,t,!0),n=this.H_.map((function(t){return Fp(t,e)})),r=new au(n);return new pu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(tp),Pp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).H_=n,r}return Object(ns.c)(e,t),e.prototype.z_=function(t){var e=Ap(this,t,!0),n=this.H_.map((function(t){return Fp(t,e)})),r=new cu(n);return new pu(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(tp),Rp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).J_=n,r}return Object(ns.c)(e,t),e.prototype.z_=function(t){var e=new hu(t.Qt,eu(t.Qt,this.J_));return new pu(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(tp);function Dp(t,e,n,r){var i=t.G_(1,e,n);qp("Data must be an object, but it was:",i,r);var o=[],s=new ca;Fs(r,(function(t,r){var a=zp(e,t,n);r instanceof ep&&(r=r.d_);var u=i.U_(a);if(r instanceof jp)o.push(a);else{var c=Fp(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new Vs(o);return new Ep(s.Pt(),a,i.fieldTransforms)}function Lp(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[Hp(e,r,n)],u=[i];if(o.length%2!=0)throw new ws(_s.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Hp(e,o[c])),u.push(o[c+1]);for(var l=[],h=new ca,f=a.length-1;f>=0;--f)if(!Wp(l,a[f])){var d=a[f],p=u[f];p instanceof ep&&(p=p.d_);var g=s.U_(d);if(p instanceof jp)l.push(d);else{var y=Fp(p,g);null!=y&&(l.push(d),h.set(d,y))}}var v=new Vs(l);return new Ep(h.Pt(),v,s.fieldTransforms)}function Mp(t,e,n,r){return void 0===r&&(r=!1),Fp(n,t.G_(r?4:3,e))}function Fp(t,e){if(t instanceof ep&&(t=t.d_),Vp(t))return qp("Unsupported field value:",e,t),Up(t,e);if(t instanceof tp)return function(t,e){if(!Cp(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");var n=t.z_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.Gt.push(e.path),t instanceof Array){if(e.settings.B_&&4!==e.k_)throw e.K_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Fp(o[i],e.Q_(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof ep&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return eu(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=As.fromDate(t);return{timestampValue:pc(e.Qt,n)}}if(t instanceof As)return n=new As(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:pc(e.Qt,n)};if(t instanceof _p)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Os)return{bytesValue:gc(e.Qt,t.I)};if(t instanceof dp){var r=t.firestore.I_;if(!r.isEqual(n=e.t))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:mc(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+ap(t))}(t,e)}function Up(t,e){var n={};return Us(t)?e.path&&e.path.length>0&&e.Gt.push(e.path):Fs(t,(function(t,r){var i=Fp(r,e.L_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Vp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof As||t instanceof _p||t instanceof Os||t instanceof dp||t instanceof tp)}function qp(t,e,n){if(!Vp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ap(n);throw e.K_("an object"===r?t+" a custom object":t+" "+r)}}function Hp(t,e,n){if(e instanceof ep&&(e=e.d_),e instanceof Jd)return e.f_;if("string"==typeof e)return zp(t,e);throw Gp("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Bp=new RegExp("[~\\*/\\[\\]]");function zp(t,e,n){if(e.search(Bp)>=0)throw Gp("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Jd.bind.apply(Jd,Object(ns.g)([void 0],e.split("."))))).f_}catch(r){throw Gp("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Gp(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ws(_s.INVALID_ARGUMENT,(a+=". ")+t+u)}function Wp(t,e){return t.some((function(t){return t.isEqual(e)}))}var Qp=function(){function t(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}return t.prototype.ef=function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n=this;return Object(ns.d)(this,(function(r){switch(r.label){case 0:if(this.nf(),this.mutations.length>0)throw new ws(_s.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Object(ns.d)(this,(function(u){switch(u.label){case 0:return n=ds(t),r=Cc(n.Qt)+"/documents",i={documents:e.map((function(t){return _c(n.Qt,t)}))},[4,n.Du("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){fs(!!e.found);var n=wc(t,e.found.name),r=vc(e.found.updateTime),i=new ua({mapValue:{fields:e.found.fields}});return new fa(n,r,i,{})}(t,e):"missing"in e?function(t,e){fs(!!e.missing),fs(!!e.readTime);var n=wc(t,e.missing),r=vc(e.readTime);return new da(n,r)}(t,e):hs()}(n.Qt,t);s.set(e.key.toString(),e)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());fs(!!e),a.push(e)})),a)]}}))}))}(this.Sh,t)];case 1:return[2,((e=r.sent()).forEach((function(t){t instanceof da||t instanceof fa?n.sf(t):hs()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},t.prototype.delete=function(t){this.write(new ku(t,this.jt(t))),this.tf.add(t.toString())},t.prototype.commit=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ns.d)(this,(function(n){switch(n.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return t=this.Y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Ls._t(n);e.mutations.push(new Pu(r,e.jt(r)))})),[4,function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return n=ds(t),r=Cc(n.Qt)+"/documents",i={writes:e.map((function(t){return xc(n.Qt,t)}))},[4,n.pu("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.Sh,this.mutations)];case 1:return n.sent(),this.X_=!0,[2]}}))}))},t.prototype.sf=function(t){var e;if(t instanceof fa)e=t.version;else{if(!(t instanceof da))throw hs();e=Ns.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ws(_s.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},t.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?yu.updateTime(e):yu.Kt()},t.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(!this.tf.has(t.toString())&&e){if(e.isEqual(Ns.min()))throw new ws(_s.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return yu.updateTime(e)}return yu.exists(!0)},t.prototype.write=function(t){this.nf(),this.mutations.push(t)},t.prototype.nf=function(){},t}(),Kp=function(){function t(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new Ef(this._s,"transaction_retry")}return t.prototype.run=function(){this.af()},t.prototype.af=function(){var t=this;this.Gu.Lu((function(){return Object(ns.b)(t,void 0,void 0,(function(){var t,e,n=this;return Object(ns.d)(this,(function(r){return t=new Qp(this.Sh),(e=this.uf(t))&&e.then((function(e){n._s.Ps((function(){return t.commit().then((function(){n.Es.resolve(e)})).catch((function(t){n.hf(t)}))}))})).catch((function(t){n.hf(t)})),[2]}))}))}))},t.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Qs(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},t.prototype.hf=function(t){var e=this;this.cf>0&&this.lf(t)?(this.cf-=1,this._s.Ps((function(){return e.af(),Promise.resolve()}))):this.Es.reject(t)},t.prototype.lf=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Du(e)}return!1},t}(),$p=function(){function t(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=Es.UNAUTHENTICATED,this.clientId=gs.u(),this._f=function(){},this.C=new Bc,this.credentials.v((function(t){as("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()}))}return t.prototype.getConfiguration=function(){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}}))}))},t.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then((function(){return e._f(e.user)}))},t.prototype.df=function(){if(this._s.wf)throw new ws(_s.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this._s.Ef();var e=new Bc;return this._s.Tf((function(){return Object(ns.b)(t,void 0,void 0,(function(){var t,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.S(),e.resolve(),[3,6];case 5:return t=r.sent(),n=el(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Yp(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i=this;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return t._s.Af(),as("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.Jl,t.ff((function(n){r.isEqual(n)||(r=n,t._s.po((function(){return Object(ns.b)(i,void 0,void 0,(function(){return Object(ns.d)(this,(function(t){switch(t.label){case 0:return[4,Rh(e.bh,n)];case 1:return t.sent(),[2]}}))}))})))})),e.persistence.Po((function(){return t.terminate()})),t.mf=e,[2]}}))}))}function Xp(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return t._s.Af(),[4,Zp(t)];case 1:return n=i.sent(),as("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.ff((function(n){return t._s.po((function(){return function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return(n=ds(t))._s.Af(),as("RemoteStore","RemoteStore received new credentials"),r=Ff(n),n.Nh.add(3),[4,Nf(n)];case 1:return i.sent(),r&&n.Oh.set("Unknown"),[4,n.Dh.n_(e)];case 2:return i.sent(),n.Nh.delete(3),[4,Af(n)];case 3:return i.sent(),[2]}}))}))}(e.yl,n)}))})),t.If=e,[2]}}))}))}function Zp(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return t.mf?[3,2]:(as("FirestoreClient","Using default OfflineComponentProvider"),[4,Yp(t,new Kd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.mf]}}))}))}function Jp(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return t.If?[3,2]:(as("FirestoreClient","Using default OnlineComponentProvider"),[4,Xp(t,new Xd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.If]}}))}))}function tg(t){return Zp(t).then((function(t){return t.persistence}))}function eg(t){return Zp(t).then((function(t){return t.bh}))}function ng(t){return Jp(t).then((function(t){return t.yl}))}function rg(t){return Jp(t).then((function(t){return t._a}))}function ig(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return[4,Jp(t)];case 1:return e=r.sent(),[2,((n=e.gl).jh=vd.bind(null,e._a),n.Hh=bd.bind(null,e._a),n)]}}))}))}function og(t,e,n){var r=this;void 0===n&&(n={});var i=new Bc;return t._s.Ps((function(){return Object(ns.b)(r,void 0,void 0,(function(){var r;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Zd({next:function(o){e.Ps((function(){return id(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ws(_s.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ws(_s.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new ud(Ma(n.path),o,{includeMetadataChanges:!0,nl:!0});return rd(t,s)},[4,ig(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}function sg(t,e,n){var r=this;void 0===n&&(n={});var i=new Bc;return t._s.Ps((function(){return Object(ns.b)(r,void 0,void 0,(function(){var r;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Zd({next:function(n){e.Ps((function(){return id(t,s)})),n.fromCache&&"server"===r.source?i.reject(new ws(_s.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new ud(n,o,{includeMetadataChanges:!0,nl:!0});return rd(t,s)},[4,ig(t)];case 1:return[2,r.apply(void 0,[o.sent(),t._s,e,n,i])]}}))}))})),i.promise}var ag=function(){function t(){var t=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new Ef(this,"async_queue_retry"),this.vf=function(){var e=wf();e&&as("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Gu.qu()};var e=wf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.vf)}return Object.defineProperty(t.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),t.prototype.Ps=function(t){this.enqueue(t)},t.prototype.Tf=function(t){this.Sf(),this.Df(t)},t.prototype.Ef=function(){if(!this.yf){this.yf=!0;var t=wf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf)}},t.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise((function(t){})):this.Df(t)},t.prototype.po=function(t){var e=this;this.Ps((function(){return e.Pf.push(t),e.Cf()}))},t.prototype.Cf=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e=this;return Object(ns.d)(this,(function(n){switch(n.label){case 0:if(0===this.Pf.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return n.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!$c(t=n.sent()))throw t;return as("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Pf.length>0&&this.Gu.Lu((function(){return e.Cf()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Df=function(t){var e=this,n=this.Rf.then((function(){return e.pf=!0,t().catch((function(t){throw e.Vf=t,e.pf=!1,us("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.pf=!1,t}))}));return this.Rf=n,n},t.prototype.Tr=function(t,e,n){var r=this;this.Sf(),this.bf.indexOf(t)>-1&&(e=0);var i=tl.Ts(this,t,e,n,(function(t){return r.xf(t)}));return this.gf.push(i),i},t.prototype.Sf=function(){this.Vf&&hs()},t.prototype.Af=function(){},t.prototype.Nf=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t;return Object(ns.d)(this,(function(e){switch(e.label){case 0:return[4,t=this.Rf];case 1:e.sent(),e.label=2;case 2:if(t!==this.Rf)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},t.prototype.Ff=function(t){var e=this;return this.Nf().then((function(){e.gf.sort((function(t,e){return t.ds-e.ds}));for(var n=0,r=e.gf;n<r.length;n++){var i=r[n];if(i.Rs(),"all"!==t&&i.fs===t)break}return e.Nf()}))},t.prototype.Of=function(t){this.bf.push(t)},t.prototype.xf=function(t){var e=this.gf.indexOf(t);this.gf.splice(e,1)},t}();function ug(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this.kf={},this.Mf=new Bc,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this.Mf.promise.catch(t)},t.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},t.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},t.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},t.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)}}();var cg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Bf=new ag,r.w_="name"in e?e.name:"[DEFAULT]",r}return Object(ns.c)(e,t),e.prototype.b_=function(){return this.qf||hg(this),this.qf.terminate()},e}(fp);function lg(t){return t.qf||hg(t),t.qf.df(),t.qf}function hg(t){var e=t.p_(),n=function(t,e,n){return new rs(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.I_,t.w_,e);t.qf=new $p(t.m_,t.Bf,n)}function fg(t,e,n){var r=this,i=new Bc;return t._s.enqueue((function(){return Object(ns.b)(r,void 0,void 0,(function(){var r;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Yp(t,n)];case 1:return o.sent(),[4,Xp(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===_s.FAILED_PRECONDITION||t.code===_s.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function dg(t){if(t.R_||t.P_)throw new ws(_s.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var pg=function(){function t(){}return t.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Ys(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bs(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(zs(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw hs()}},t.prototype.Hf=function(t,e){var n=this,r={};return Fs(t.fields||{},(function(t,i){r[t]=n.Uf(i,e)})),r},t.prototype.Gf=function(t){return new _p(Bs(t.latitude),Bs(t.longitude))},t.prototype.zf=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.Uf(t,e)}))},t.prototype.Kf=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return Gs(n)?t(n):n}(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Ws(t));default:return null}},t.prototype.Qf=function(t){var e=Hs(t);return new As(e.seconds,e.nanos)},t.prototype.Jf=function(t,e){var n=Ps.ot(t);fs(Hc(n));var r=new is(n.get(1),n.get(3)),i=new Ls(n.Y(5));return r.isEqual(e)||us("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),gg=function(){function t(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new dp(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.Zf},t.prototype.data=function(){if(this.Zf){if(this.v_){var t=new yg(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},t.prototype.get=function(t){if(this.Zf){var e=this.Zf.data().field(vg("DocumentSnapshot.get",t));if(null!==e)return this.Xf.Uf(e)}},t}(),yg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(gg);function vg(t,e){return"string"==typeof e?zp(t,e):e instanceof ep?e.d_.f_:e.f_}function mg(t){if(Ua(t)&&0===t.xt.length)throw new ws(_s.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var bg=function(){};function _g(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.td(t)}return t}var wg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).ed=e,i.nd=n,i.sd=r,i.type="where",i}return Object(ns.c)(e,t),e.prototype.td=function(t){var e=Ip(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.ut()){if("array-contains"===o||"array-contains-any"===o)throw new ws(_s.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){xg(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(Ig(r,t,l[c]));a={arrayValue:{values:u}}}else a=Ig(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||xg(s,o),a=Mp(n,"where",s,"in"===o||"not-in"===o);var h=_a.create(i,o,a);return function(t,e){if(e.Ct()){var n=qa(t);if(null!==n&&!n.isEqual(e.field))throw new ws(_s.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Va(t);null!==r&&jg(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ws(_s.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t.C_,0,e,t.firestore.I_,this.ed,this.nd,this.sd);return new pp(t.firestore,t.v_,function(t,e){var n=t.filters.concat([e]);return new Da(t.path,t.collectionGroup,t.xt.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,n))},e}(bg),Og=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ed=e,r.rd=n,r.type="orderBy",r}return Object(ns.c)(e,t),e.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ws(_s.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ws(_s.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Na(e,n);return function(t,e){if(null===Va(t)){var n=qa(t);null!==n&&jg(0,n,e.field)}}(t,r),r}(t.C_,this.ed,this.rd);return new pp(t.firestore,t.v_,function(t,e){var n=t.xt.concat([e]);return new Da(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.C_,e))},e}(bg),Eg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.od=n,i.ad=r,i}return Object(ns.c)(e,t),e.prototype.td=function(t){return new pp(t.firestore,t.v_,Ga(t.C_,this.od,this.ad))},e}(bg),Cg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(ns.c)(e,t),e.prototype.td=function(t){var e=Tg(t,this.type,this.ud,this.hd);return new pp(t.firestore,t.v_,function(t,e){return new Da(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.C_,e))},e}(bg),Sg=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ud=n,i.hd=r,i}return Object(ns.c)(e,t),e.prototype.td=function(t){var e=Tg(t,this.type,this.ud,this.hd);return new pp(t.firestore,t.v_,function(t,e){return new Da(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.C_,e))},e}(bg);function Tg(t,e,n,r){if(n[0]instanceof ep&&(n[0]=n[0].d_),n[0]instanceof gg)return function(t,e,n,r,i){if(!r)throw new ws(_s.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ba(t);s<a.length;s++){var u=a[s];if(u.field.ut())o.push(na(e,r.key));else{var c=r.field(u.field);if(Gs(c))throw new ws(_s.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.rt();throw new ws(_s.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new ja(o,i)}(t.C_,t.firestore.I_,e,n[0].Zf,r);var i=Ip(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new ws(_s.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new ws(_s.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ha(t)&&-1!==c.indexOf("/"))throw new ws(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Ps.ot(c));if(!Ls.wt(l))throw new ws(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ls(l);a.push(na(e,h))}else{var f=Mp(n,r,c);a.push(f)}}return new ja(a,o)}(t.C_,t.firestore.I_,i,e,n,r)}function Ig(t,e,n){if(n instanceof ep&&(n=n.d_),"string"==typeof n){if(""===n)throw new ws(_s.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ha(e)&&-1!==n.indexOf("/"))throw new ws(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Ps.ot(n));if(!Ls.wt(r))throw new ws(_s.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return na(t,new Ls(r))}if(n instanceof dp)return na(t,n.S_);throw new ws(_s.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ap(n)+".")}function xg(t,e){if(!Array.isArray(t)||0===t.length)throw new ws(_s.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ws(_s.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function jg(t,e,n){if(!n.isEqual(e))throw new ws(_s.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Ag(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Ng=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ns.c)(e,t),e.prototype.Wf=function(t){return new Os(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new dp(this.firestore,null,e)},e}(pg),kg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Pg=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).Yf=e,a.ld=e,a.metadata=o,a}return Object(ns.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new Rg(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){var n=this.Zf.data().field(vg("DocumentSnapshot.get",t));if(null!==n)return this.Xf.Uf(n,e.serverTimestamps)}},e}(gg),Rg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Pg),Dg=function(){function t(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new kg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._d.docs.forEach((function(r){t.call(e,new Rg(n.Yf,n.Xf,r.key,r,new kg(n._d.De.has(r.key),n._d.fromCache),n.query.v_))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._d.xe)throw new ws(_s.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===e||(this.fd=function(t,e){if(t._d.Se.et()){var n=0;return t._d.docChanges.map((function(e){return{type:"added",doc:new Rg(t.Yf,t.Xf,e.doc.key,e.doc,new kg(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),oldIndex:-1,newIndex:n++}}))}var r=t._d.Se;return t._d.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Rg(t.Yf,t.Xf,e.doc.key,e.doc,new kg(t._d.De.has(e.doc.key),t._d.fromCache),t.query.v_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Lg(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this.dd=e),this.fd},t}();function Lg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hs()}}function Mg(t,e){return t instanceof Pg&&e instanceof Pg?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof Dg&&e instanceof Dg&&t.Yf===e.Yf&&bp(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Fg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ns.c)(e,t),e.prototype.Wf=function(t){return new Os(t)},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return new dp(this.firestore,null,e)},e}(pg);function Ug(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=up(t,dp);var o=up(t.firestore,cg),s=Ip(o);return e instanceof ep&&(e=e.d_),qg(o,[("string"==typeof e||e instanceof Jd?Lp(s,"updateDoc",t.S_,e,n,r):Dp(s,"updateDoc",t.S_,e)).F_(t.S_,yu.exists(!0))])}function Vg(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof ep&&(t=t.d_);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||ug(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(ug(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof dp)c=up(t.firestore,cg),l=Ma(t.S_.path),u={next:function(e){i[a]&&i[a](Hg(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=up(t,pp);c=up(d.firestore,cg),l=d.C_;var p=new Fg(c);u={next:function(t){i[a]&&i[a](new Dg(c,p,d,t))},error:i[a+1],complete:i[a+2]},mg(t.C_)}return function(t,e,n,r){var i=this,o=new Zd(r),s=new ud(e,o,n);return t._s.Ps((function(){return Object(ns.b)(i,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return e=rd,[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.i_(),t._s.Ps((function(){return Object(ns.b)(i,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return e=id,[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(lg(c),l,h,u)}function qg(t,e){return function(t,e){var n=this,r=new Bc;return t._s.Ps((function(){return Object(ns.b)(n,void 0,void 0,(function(){var n;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return n=_d,[4,rg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(lg(t),e)}function Hg(t,e,n){var r=n.docs.get(e.S_),i=new Fg(t);return new Pg(t,i,e.S_,r,new kg(n.hasPendingWrites,n.fromCache),e.v_)}var Bg=function(){function t(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=Ip(t)}return t.prototype.set=function(t,e,n){this.md();var r=zg(t,this.Yf),i=Ag(r.v_,e,n),o=xp(this.Id,"WriteBatch.set",r.S_,i,null!==r.v_,n);return this.Ed.push(o.F_(r.S_,yu.Kt())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();var o,s=zg(t,this.Yf);return e instanceof ep&&(e=e.d_),o="string"==typeof e||e instanceof Jd?Lp(this.Id,"WriteBatch.update",s.S_,e,n,r):Dp(this.Id,"WriteBatch.update",s.S_,e),this.Ed.push(o.F_(s.S_,yu.exists(!0))),this},t.prototype.delete=function(t){this.md();var e=zg(t,this.Yf);return this.Ed=this.Ed.concat(new ku(e.S_,yu.Kt())),this},t.prototype.commit=function(){return this.md(),this.Td=!0,this.Ed.length>0?this.wd(this.Ed):Promise.resolve()},t.prototype.md=function(){if(this.Td)throw new ws(_s.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function zg(t,e){if(t instanceof ep&&(t=t.d_),t.firestore!==e)throw new ws(_s.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Gg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).Yf=e,r}return Object(ns.c)(e,t),e.prototype.get=function(e){var n=this,r=zg(e,this.Yf),i=new Fg(this.Yf);return t.prototype.get.call(this,e).then((function(t){return new Pg(n.Yf,i,r.S_,t.Zf,new kg(!1,!1),r.v_)}))},e}(function(){function t(t,e){this.Yf=t,this.Ad=e,this.Id=Ip(t)}return t.prototype.get=function(t){var e=this,n=zg(t,this.Yf),r=new Ng(this.Yf);return this.Ad.ef([n.S_]).then((function(t){if(!t||1!==t.length)return hs();var i=t[0];if(i instanceof da)return new gg(e.Yf,r,n.S_,null,n.v_);if(i instanceof fa)return new gg(e.Yf,r,i.key,i,n.v_);throw hs()}))},t.prototype.set=function(t,e,n){var r=zg(t,this.Yf),i=Ag(r.v_,e,n),o=xp(this.Id,"Transaction.set",r.S_,i,null!==r.v_,n);return this.Ad.set(r.S_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=zg(t,this.Yf);return e instanceof ep&&(e=e.d_),o="string"==typeof e||e instanceof Jd?Lp(this.Id,"Transaction.update",s.S_,e,n,r):Dp(this.Id,"Transaction.update",s.S_,e),this.Ad.update(s.S_,o),this},t.prototype.delete=function(t){var e=zg(t,this.Yf);return this.Ad.delete(e.S_),this},t}());function Wg(){if("undefined"==typeof Uint8Array)throw new ws(_s.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Qg(){if("undefined"==typeof atob)throw new ws(_s.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Kg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.fromBase64String=function(t){return Qg(),new e(Os.fromBase64String(t))},e.fromUint8Array=function(t){return Wg(),new e(Os.fromUint8Array(t))},e.prototype.toBase64=function(){return Qg(),this.d_.toBase64()},e.prototype.toUint8Array=function(){return Wg(),this.d_.toUint8Array()},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(ep),$g=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){dg(t=up(t,cg));var n=lg(t),r=t.p_(),i=new Xd;return fg(n,i,new $d(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){dg(t=up(t,cg));var e=lg(t),n=t.p_(),r=new Xd;return fg(e,r,new Yd(r,n.cacheSizeBytes))}(t.d_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.R_&&!t.P_)throw new ws(_s.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Bc;return t.Bf.Tf((function(){return Object(ns.b)(e,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(ns.b)(this,void 0,void 0,(function(){return Object(ns.d)(this,(function(e){switch(e.label){case 0:return Wc.Kn()?[4,Wc.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Ih(t.I_,t.w_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t.d_)},t}(),Yg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).Rd=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof is||(i.Pd=e),i}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=up(t,fp)).V_();"firestore.googleapis.com"!==r.host&&r.host!==e&&cs("Host has been set in both settings() and useEmulator(), emulator host will be used"),t.g_(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this.d_,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Object(ns.b)(e,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return[4,tg(t)];case 1:return e=r.sent(),[4,ng(t)];case 2:return n=r.sent(),[2,(e.yo(!0),function(t){var e=ds(t);return e.Nh.delete(0),Af(e)}(n))]}}))}))}))}(lg(up(this.d_,cg)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t._s.enqueue((function(){return Object(ns.b)(e,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return[4,tg(t)];case 1:return e=r.sent(),[4,ng(t)];case 2:return n=r.sent(),[2,(e.yo(!1),function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return(e=ds(t)).Nh.add(0),[4,Nf(e)];case 1:return n.sent(),e.Oh.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(lg(up(this.d_,cg)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ip("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Bc;return t._s.Ps((function(){return Object(ns.b)(e,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return e=Td,[4,rg(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(lg(up(this.d_,cg)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Zd(e);return t._s.Ps((function(){return Object(ns.b)(n,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){ds(t).Wh.add(e),e.next()},[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.i_(),t._s.Ps((function(){return Object(ns.b)(n,void 0,void 0,(function(){var e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return e=function(t,e){ds(t).Wh.delete(e)},[4,ig(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(lg(t=up(t,cg)),ug(e)?e:{next:e})}(this.d_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Pd)throw new ws(_s.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ly(this,yp(this.d_,t))}catch(t){throw ny(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new ey(this,vp(this.d_,t))}catch(t){throw ny(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new ay(this,function(t,e){if(t=up(t,fp),np("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ws(_s.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new pp(t,null,function(t){return new Da(Ps.ct(),t)}(e))}(this.d_,t))}catch(t){throw ny(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Bc;return t._s.Ps((function(){return Object(ns.b)(n,void 0,void 0,(function(){var n;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Jp(t).then((function(t){return t.Sh}))}(t)];case 1:return n=i.sent(),new Kp(t._s,n,e,r).run(),[2]}}))}))})),r.promise}(lg(t),(function(n){return e(new Gg(t,n))}))}(this.d_,(function(n){return t(new Zg(e,n))}))},e.prototype.batch=function(){var t=this;return lg(this.d_),new Jg(new Bg(this.d_,(function(e){return qg(t.d_,e)})))},e.prototype.loadBundle=function(t){throw new ws(_s.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new ws(_s.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(ep),Xg=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(ns.c)(e,t),e.prototype.Wf=function(t){return new Kg(new Os(t))},e.prototype.jf=function(t){var e=this.Jf(t,this.firestore.I_);return ey.yd(e,this.firestore,null)},e}(pg),Zg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r.Xf=new Xg(e),r}return Object(ns.c)(e,t),e.prototype.get=function(t){var e=this,n=hy(t);return this.d_.get(n).then((function(t){return new oy(e.Yf,new Pg(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))}))},e.prototype.set=function(t,e,n){var r=hy(t);return n?(rp("Transaction.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=hy(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(ns.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=hy(t);return this.d_.delete(e),this},e}(ep),Jg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.set=function(t,e,n){var r=hy(t);return n?(rp("WriteBatch.set",n),this.d_.set(r,e,n)):this.d_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=hy(t);return 2===arguments.length?this.d_.update(s,e):(r=this.d_).update.apply(r,Object(ns.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=hy(t);return this.d_.delete(e),this},e.prototype.commit=function(){return this.d_.commit()},e}(ep),ty=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this).Yf=e,i.Xf=n,i}return Object(ns.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Rg(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new sy(this.Yf,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},e.gd=function(t,n){var r=e.Vd,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Xg(t),n),i.set(n,o)),o},e}(ep);ty.Vd=new WeakMap;var ey=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Xg(e),r}return Object(ns.c)(e,t),e.pd=function(t,n,r){if(t.length%2!=0)throw new ws(_s.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new e(n,new dp(n.d_,r,new Ls(t)))},e.yd=function(t,n,r){return new e(n,new dp(n.d_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new ly(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new ly(this.firestore,yp(this.d_,t))}catch(t){throw ny(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof ep&&(t=t.d_),t instanceof dp&&mp(this.d_,t)},e.prototype.set=function(t,e){e=rp("DocumentReference.set",e);try{return function(t,e,n){t=up(t,dp);var r=up(t.firestore,cg),i=Ag(t.v_,e,n);return qg(r,[xp(Ip(r),"setDoc",t.S_,i,null!==t.v_,n).F_(t.S_,yu.Kt())])}(this.d_,t,e)}catch(t){throw ny(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ug(this.d_,t):Ug.apply(void 0,Object(ns.g)([this.d_,t,e],n))}catch(t){throw ny(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return qg(up((t=this.d_).firestore,cg),[new ku(t.S_,yu.Kt())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ry(e),i=iy(e,(function(e){return new oy(t.firestore,new Pg(t.firestore.d_,t.Xf,e.S_,e.Zf,e.metadata,t.d_.v_))}));return Vg(this.d_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=up(t,dp);var e=up(t.firestore,cg),n=lg(e),r=new Fg(e);return function(t,e){var n=this,r=new Bc;return t._s.Ps((function(){return Object(ns.b)(n,void 0,void 0,(function(){var n;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=ds(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Tc.Ho(t,e)}))}(t,e)];case 1:return(i=o.sent())instanceof fa?n.resolve(i):i instanceof da?n.resolve(null):n.reject(new ws(_s.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=el(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,eg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.S_).then((function(n){return new Pg(e,r,t.S_,n,new kg(n instanceof fa&&n.Vt,!0),t.v_)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=up(t,dp);var e=up(t.firestore,cg);return og(lg(e),t.S_,{source:"server"}).then((function(n){return Hg(e,t,n)}))}(this.d_):function(t){t=up(t,dp);var e=up(t.firestore,cg);return og(lg(e),t.S_).then((function(n){return Hg(e,t,n)}))}(this.d_)).then((function(t){return new oy(e.firestore,new Pg(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))}))},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ty.gd(this.firestore,t)))},e}(ep);function ny(t,e,n){return t.message=t.message.replace(e,n),t}function ry(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!ug(r))return r}return{}}function iy(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=ug(t[0])?t[0]:ug(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var oy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new ey(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.d_.data(t)},e.prototype.get=function(t,e){return this.d_.get(t,e)},e.prototype.isEqual=function(t){return Mg(this.d_,t.d_)},e}(ep),sy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.prototype.data=function(t){return this.d_.data(t)},e}(oy),ay=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Xf=new Xg(e),r}return Object(ns.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,_g(this.d_,function(t,e,n){var r=e,i=vg("where",t);return new wg(i,r,n)}(t,n,r)))}catch(t){throw ny(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,_g(this.d_,function(t,e){void 0===e&&(e="asc");var n=e,r=vg("orderBy",t);return new Og(r,n)}(t,n)))}catch(t){throw ny(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,_g(this.d_,function(t){return cp("limit",t),new Eg("limit",t,"F")}(t)))}catch(t){throw ny(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,_g(this.d_,function(t){return cp("limitToLast",t),new Eg("limitToLast",t,"L")}(t)))}catch(t){throw ny(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_g(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cg("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw ny(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_g(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cg("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw ny(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_g(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw ny(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,_g(this.d_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Sg("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw ny(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return bp(this.d_,t.d_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=up(t,pp);var e=up(t.firestore,cg),n=lg(e),r=new Fg(e);return function(t,e){var n=this,r=new Bc;return t._s.Ps((function(){return Object(ns.b)(n,void 0,void 0,(function(){var n;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(ns.b)(this,void 0,void 0,(function(){var r,i,o,s,a;return Object(ns.d)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Hh(t,e,!0)];case 1:return a=u.sent(),r=new dd(e,a.Rc),i=r.fl(a.documents),o=r.wi(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=el(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,eg(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t.C_).then((function(n){return new Dg(e,r,t,n)}))}(this.d_):"server"===(null==t?void 0:t.source)?function(t){t=up(t,pp);var e=up(t.firestore,cg),n=lg(e),r=new Fg(e);return sg(n,t.C_,{source:"server"}).then((function(n){return new Dg(e,r,t,n)}))}(this.d_):function(t){t=up(t,pp);var e=up(t.firestore,cg),n=lg(e),r=new Fg(e);return mg(t.C_),sg(n,t.C_).then((function(n){return new Dg(e,r,t,n)}))}(this.d_)).then((function(t){return new cy(e.firestore,new Dg(e.firestore.d_,e.Xf,e.d_,t._d))}))},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ry(e),i=iy(e,(function(e){return new cy(t.firestore,new Dg(t.firestore.d_,t.Xf,t.d_,e._d))}));return Vg(this.d_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ty.gd(this.firestore,t)))},e}(ep),uy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new sy(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),e}(ep),cy=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).Yf=e,r}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new ay(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.d_.docs.map((function(e){return new sy(t.Yf,e)}))},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map((function(t){return new uy(e.Yf,t)}))},e.prototype.forEach=function(t,e){var n=this;this.d_.forEach((function(r){t.call(e,new sy(n.Yf,r))}))},e.prototype.isEqual=function(t){return Mg(this.d_,t.d_)},e}(ep),ly=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.d_=n,r}return Object(ns.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new ey(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ey(this.firestore,void 0===t?vp(this.d_):vp(this.d_,t))}catch(t){throw ny(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=up(t.firestore,cg),r=vp(t),i=Ag(t.v_,e);return qg(n,[xp(Ip(t.firestore),"addDoc",r.S_,i,null!==t.v_,{}).F_(r.S_,yu.exists(!1))]).then((function(){return r}))}(this.d_,t).then((function(t){return new ey(e.firestore,t)}))},e.prototype.isEqual=function(t){return mp(this.d_,t.d_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.d_.withConverter(ty.gd(this.firestore,t)))},e}(ay);function hy(t){return t instanceof ep&&(t=t.d_),up(t,dp)}var fy,dy=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(Jd.bind.apply(Jd,Object(ns.g)([void 0],e))))||this}return Object(ns.c)(e,t),e.documentId=function(){return new e(Ds.ht().rt())},e.prototype.isEqual=function(t){return t instanceof ep&&(t=t.d_),t instanceof Jd&&this.d_.f_.isEqual(t.f_)},e}(ep),py=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(ns.c)(e,t),e.serverTimestamp=function(){var t=new Np("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new jp("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new kp("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pp("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new Rp("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},e}(ep),gy=n("/6Yf"),yy={Firestore:Yg,GeoPoint:_p,Timestamp:As,Blob:Kg,Transaction:Zg,WriteBatch:Jg,DocumentReference:ey,DocumentSnapshot:oy,Query:ay,QueryDocumentSnapshot:sy,QuerySnapshot:cy,CollectionReference:ly,FieldPath:dy,FieldValue:py,setLogLevel:function(t){os.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function vy(t,e){return function(t,e=_t.a){return new wt.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function my(t,e){return vy(t,e).pipe(Object(Ct.a)(t=>({payload:t,type:"query"})))}function by(t,e){return my(t,e).pipe(Ke(void 0),$e(),Object(Ct.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function _y(t,e,n){return by(t,n).pipe(Rt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return wy(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return wy(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wy(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Mt(),Object(Ct.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function wy(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Oy(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}(function(t,e){t.INTERNAL.registerComponent(new gy.a("firestore",(function(t){return function(t,e){return new Yg(t,new cg(t,e),new $g)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},yy)))})(fy=Ze.a),fy.registerVersion("@firebase/firestore","2.1.7");class Ey{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=by(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Ct.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ke(void 0),$e(),te(([t,e])=>e.length>0||!t),Object(Ct.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Rt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Oy(t);return _y(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return my(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ct.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(jt.a)(this.query.get(t)).pipe(Object(Gt.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Cy(this.ref.doc(t),this.afs)}}class Cy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=Ay(n,e);return new Ey(r,i,this.afs)}snapshotChanges(){return vy(this.ref,this.afs.schedulers.outsideAngular).pipe(Ke(void 0),$e(),Object(Ct.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Ct.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(jt.a)(this.ref.get(t)).pipe(Object(Gt.b)(this.afs.schedulers.insideAngular))}}class Sy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?by(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ct.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),te(t=>t.length>0),this.afs.keepUnstableUntilFirst):by(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Rt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Oy(t);return _y(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return my(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Ct.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(jt.a)(this.query.get(t)).pipe(Object(Gt.b)(this.afs.schedulers.insideAngular))}}const Ty=new r.q("angularfire2.enableFirestorePersistence"),Iy=new r.q("angularfire2.firestore.persistenceSettings"),xy=new r.q("angularfire2.firestore.settings"),jy=new r.q("angularfire2.firestore.use-emulator");function Ay(t,e=(t=>t)){return{query:e(t),ref:t}}let Ny=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new bt.d(o),this.keepUnstableUntilFirst=Object(bt.h)(this.schedulers);const c=Object(bt.g)(t,o,e);!Ie.a.auth&&u&&Object(bt.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(bt.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!V(i)){const e=()=>{try{return Object(jt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(fy){return"undefined"!=typeof console&&console.warn(fy),Object(Ot.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(Ot.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=Ay(n,e),o=this.schedulers.ngZone.run(()=>r);return new Ey(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Sy(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Cy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(bt.c),r.Ob(bt.b,8),r.Ob(Ty,8),r.Ob(xy,8),r.Ob(r.B),r.Ob(r.z),r.Ob(Iy,8),r.Ob(jy,8),r.Ob(be,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Ob)(bt.c),Object(r.Ob)(bt.b,8),Object(r.Ob)(Ty,8),Object(r.Ob)(xy,8),Object(r.Ob)(r.B),Object(r.Ob)(r.z),Object(r.Ob)(Iy,8),Object(r.Ob)(jy,8),Object(r.Ob)(be,8))},token:t,providedIn:"any"}),t})(),ky=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Ty,useValue:!0},{provide:Iy,useValue:e}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Ny]}),t})();class Py{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new Ry(t,this.dueTime,this.scheduler))}}class Ry extends Pt.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(Dy,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function Dy(t){t.debouncedNext()}var Ly=function(t){function e(n,r){var i=t.call(this,My(n),"Firebase Storage: "+r+" ("+My(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(ns.c)(e,t),e.prototype._codeEquals=function(t){return My(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(tn.c);function My(t){return"storage/"+t}function Fy(){return new Ly("unknown","An unknown error occurred, please check the error payload for server response.")}function Uy(){return new Ly("canceled","User canceled the upload/download.")}function Vy(){return new Ly("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function qy(t){return new Ly("invalid-argument",t)}function Hy(){return new Ly("app-deleted","The Firebase app was deleted.")}function By(t){return new Ly("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function zy(t,e){return new Ly("invalid-format","String does not match format '"+t+"': "+e)}function Gy(t){throw new Ly("internal-error","Internal error: "+t)}var Wy={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Qy=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function Ky(t,e){switch(t){case Wy.RAW:return new Qy($y(e));case Wy.BASE64:case Wy.BASE64URL:return new Qy(Yy(t,e));case Wy.DATA_URL:return new Qy((n=new Xy(e)).base64?Yy(Wy.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(fy){throw zy(Wy.DATA_URL,"Malformed data URL.")}return $y(e)}(n.rest),function(t){return new Xy(t).contentType}(e))}var n;throw Fy()}function $y(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Yy(t,e){switch(t){case Wy.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw zy(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Wy.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw zy(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(fy){throw zy(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Xy=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw zy(Wy.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),Zy={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Jy(t){switch(t){case"running":case"pausing":case"canceling":return Zy.RUNNING;case"paused":return Zy.PAUSED;case"success":return Zy.SUCCESS;case"canceled":return Zy.CANCELED;case"error":default:return Zy.ERROR}}var tv=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),ev=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=tv.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=tv.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=tv.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Gy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Gy("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Gy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(fy){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Gy("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),nv=function(){function t(){}return t.prototype.createXhrIo=function(){return new ev},t}();function rv(t){return"string"==typeof t||t instanceof String}function iv(t){return ov()&&t instanceof Blob}function ov(){return"undefined"!=typeof Blob}function sv(t,e,n,r){if(r<e)throw qy("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw qy("Invalid value for '"+t+"'. Expected "+n+" or less.")}function av(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function uv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=av();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(ov())return new Blob(t);throw new Ly("unsupported-environment","This browser doesn't seem to support creating Blobs")}var cv=function(){function t(t,e){var n=0,r="";iv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(iv(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(ov()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(uv.apply(null,r))}var i=e.map((function(t){return rv(t)?Ky(Wy.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),lv=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(fy){return new t(e,"")}if(""===n.path)return n;throw new Ly("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o="firebasestorage.googleapis.com".replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(e);if(c){var l=c[u.indices.path];l||(l=""),n=new t(c[u.indices.bucket],l),u.postModify(n);break}}if(null==n)throw function(t){return new Ly("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function hv(t){var e,n;try{e=JSON.parse(t)}catch(fy){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function fv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function dv(t){return"https://firebasestorage.googleapis.com/v0"+t}function pv(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function gv(t,e){return e}var yv=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||gv}}(),vv=null;function mv(){if(vv)return vv;var t=[];t.push(new yv("bucket")),t.push(new yv("generation")),t.push(new yv("metageneration")),t.push(new yv("name","fullPath",!0));var e=new yv("name");e.xform=function(t,e){return function(t){return!rv(t)||t.length<2?t:fv(t)}(e)},t.push(e);var n=new yv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new yv("timeCreated")),t.push(new yv("updated")),t.push(new yv("md5Hash",null,!0)),t.push(new yv("cacheControl",null,!0)),t.push(new yv("contentDisposition",null,!0)),t.push(new yv("contentEncoding",null,!0)),t.push(new yv("contentLanguage",null,!0)),t.push(new yv("contentType",null,!0)),t.push(new yv("metadata","customMetadata",!0)),vv=t}function bv(t,e,n){var r=hv(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new lv(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function _v(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var wv=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function Ov(t){if(!t)throw Fy()}function Ev(t,e){return function(n,r){var i=bv(t,r,e);return Ov(null!==i),i}}function Cv(t){return function(e,n){var r;return(r=401===e.getStatus()?new Ly("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new Ly("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new Ly("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function Sv(t){var e=Cv(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new Ly("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Tv(t,e,n){var r=dv(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new wv(r,"GET",Ev(t,n),i);return o.errorHandler=Sv(e),o}function Iv(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var xv=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function jv(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(fy){Ov(!1)}return Ov(!!n&&-1!==(e||["active"]).indexOf(n)),n}var Av=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function Nv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var kv=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=mv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage._getAuthToken().then((function(n){switch(e._state){case"running":t(n);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Iv(e,r,i),a={name:s.fullPath},u=dv(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=_v(s,n),h=new wv(u,"POST",(function(t){var e;jv(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(fy){Ov(!1)}return Ov(rv(e)),e}),t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=Cv(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n){var r=function(t,e,n,r){var i=new wv(n,"POST",(function(t){var e=jv(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(fy){Ov(!1)}n||Ov(!1);var i=Number(n);return Ov(!isNaN(i)),new xv(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Cv(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage._makeRequest(r,n);t._request=i,i.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new xv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new xv(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Ly("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=r.slice(h,h+l);if(null===d)throw Vy();var p=new wv(n,"POST",(function(t,n){var i,s=jv(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Ev(e,o)(t,n):null,new xv(a,c,"final"===s,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=a||null,p.errorHandler=Cv(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(fy){return t._error=fy,void t._transition("error")}var s=t._ref.storage._makeRequest(o,i);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e){var n=Tv(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Iv(e,r,i),c=_v(u,n),l=cv.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw Vy();var h={name:u.fullPath},f=dv(o),d=t.maxUploadRetryTime,p=new wv(f,"POST",Ev(t,n),d);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=Cv(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage._makeRequest(n,e);t._request=r,r.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Uy(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Jy(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Av(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Jy(this._state)){case Zy.SUCCESS:Nv(this._resolve.bind(null,this.snapshot))();break;case Zy.CANCELED:case Zy.ERROR:Nv(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Jy(this._state)){case Zy.RUNNING:case Zy.PAUSED:t.next&&Nv(t.next.bind(t,this.snapshot))();break;case Zy.SUCCESS:t.complete&&Nv(t.complete.bind(t))();break;case Zy.CANCELED:case Zy.ERROR:t.error&&Nv(t.error.bind(t,this._error))();break;default:t.error&&Nv(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),Pv=function(){function t(t,e){this._service=t,this._location=e instanceof lv?e:lv.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new lv(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return fv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new lv(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw By(t)},t}();function Rv(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r,i;return Object(ns.d)(this,(function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&sv("options.maxResults",1,1e3,e.maxResults),[4,t.storage._getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=dv(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new wv(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=hv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new lv(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new lv(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return Ov(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Cv(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage._makeRequest(i,n).getPromise()]}}))}))}function Dv(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new lv(t._location.bucket,n);return new Pv(t.storage,r)}var Lv=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Mv=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Lv(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Lv(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Lv(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Lv(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Fv=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Uv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Uv(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Uv=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(Dv(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Mv(function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new kv(t,new cv(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Wy.RAW),this._throwIfRoot("putString");var r=Ky(e,t),i=Object(ns.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Mv(new kv(this._delegate,new cv(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e,n=this;return(t=this._delegate,e={prefixes:[],items:[]},function t(e,n,r){return Object(ns.b)(this,void 0,void 0,(function(){var i,o,s;return Object(ns.d)(this,(function(a){switch(a.label){case 0:return[4,Rv(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(s=n.items).push.apply(s,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))).then((function(t){return new Fv(t,n.storage)}))},t.prototype.list=function(t){var e=this;return Rv(this._delegate,t).then((function(t){return new Fv(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=Tv(t.storage,t._location,mv()),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(ns.b)(this,void 0,void 0,(function(){var n,r;return Object(ns.d)(this,(function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage._getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=dv(e.fullServerUrl()),o=_v(n,r),s=t.maxOperationRetryTime,a=new wv(i,"PATCH",Ev(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Sv(e),a}(t.storage,t._location,e,mv()),[2,t.storage._makeRequest(r,n).getPromise()]}}))}))}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=dv(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new wv(r,"GET",function(t,e){return function(n,r){var i=bv(t,r,e);return Ov(null!==i),function(t,e){var n=hv(e);if(null===n)return null;if(!rv(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(e){var n=t.fullPath;return dv("/b/"+i(t.bucket)+"/o/"+i(n))+pv({alt:"media",token:e})}))[0]}(i,r)}}(t,n),i);return o.errorHandler=Sv(e),o}(t.storage,t._location,mv()),[2,t.storage._makeRequest(n,e).getPromise().then((function(t){if(null===t)throw new Ly("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(ns.b)(this,void 0,void 0,(function(){var e,n;return Object(ns.d)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage._getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=dv(e.fullServerUrl()),r=new wv(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=Sv(e),r}(t.storage,t._location),[2,t.storage._makeRequest(n,e).getPromise()]}}))}))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw By(t)},t}(),Vv=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),qv=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(fy){o(fy)}else null!==s?((r=Fy()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?Hy():Uy():new Ly("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Hv(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Hv(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===tv.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Hv(s,n))}else{var a=n.getErrorCode()===tv.ABORT;e(!1,new Hv(!1,null,a))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(ns.g)([null,t],e));else{var r,o=u()||s;o?l.call.apply(l,Object(ns.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout((function(){s=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Hv=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Bv(t){return/^[A-Za-z]+:\/\//.test(t)}function zv(t,e){if(e&&Bv(e)){if(t instanceof Qv)return new Pv(t,e);throw qy("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof Qv){var r=e;if(null==r._bucket)throw new Ly("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new Pv(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw qy('`path` param cannot contain ".."');return Dv(e,n)}return e}(t,e)}var Gv,Wv,Qv=function(){function t(t,e,n,r,i){var o,s;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?lv.makeFromBucketSpec(r):null==(s=null==(o=this.app.options)?void 0:o.storageBucket)?null:lv.makeFromBucketSpec(s)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){sv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){sv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(ns.b)(this,void 0,void 0,(function(){var t,e;return Object(ns.d)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new Pv(this,t)},t.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new Vv(Hy());var r=function(t,e,n,r,i){var o=pv(t.urlParams),s=t.url+o,a=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(a,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(a,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(a,i),new qv(s,t.method,a,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},t}(),Kv=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Bv(t))throw qy("ref() expected a child path but got a URL, use refFromURL instead.");return new Uv(zv(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Bv(t))throw qy("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lv.makeFromUrl(t)}catch(fy){throw qy("refFromUrl() expected a valid full URL but got an invalid one.")}return new Uv(zv(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function $v(t){const e=function(t){return new wt.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=_t.a){return n=>n.lift(new Py(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(Ct.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function Yv(t,e,n){return{getDownloadURL:()=>Object(Ot.a)(void 0).pipe(Object(Gt.b)(e.outsideAngular),At(()=>t.getDownloadURL()),n),getMetadata:()=>Object(Ot.a)(void 0).pipe(Object(Gt.b)(e.outsideAngular),At(()=>t.getMetadata()),n),delete:()=>Object(jt.a)(t.delete()),child:r=>Yv(t.child(r),e,n),updateMetadata:e=>Object(jt.a)(t.updateMetadata(e)),put:(e,n)=>$v(t.put(e,n)),putString:(e,n,r)=>$v(t.putString(e,n,r)),listAll:()=>Object(jt.a)(t.listAll())}}Wv={TaskState:Zy,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:Wy,Storage:Qv,Reference:Uv},(Gv=Ze.a).INTERNAL.registerComponent(new gy.a("storage",(function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Kv(n,new Qv(n,r,new nv,e,Ze.a.SDK_VERSION))}),"PUBLIC").setServiceProps(Wv).setMultipleInstances(!0)),Gv.registerVersion("@firebase/storage","0.4.3");const Xv=new r.q("angularfire2.storageBucket"),Zv=new r.q("angularfire2.storage.maxUploadRetryTime"),Jv=new r.q("angularfire2.storage.maxOperationRetryTime");let tm=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new bt.d(i),this.keepUnstableUntilFirst=Object(bt.h)(this.schedulers);const a=Object(bt.g)(t,i,e);this.storage=Object(bt.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return Yv(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return Yv(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Yv(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(bt.c),r.Ob(bt.b,8),r.Ob(Xv,8),r.Ob(r.B),r.Ob(r.z),r.Ob(Zv,8),r.Ob(Jv,8))},t.\u0275prov=Object(r.Eb)({factory:function(){return new t(Object(r.Ob)(bt.c),Object(r.Ob)(bt.b,8),Object(r.Ob)(Xv,8),Object(r.Ob)(r.B),Object(r.Ob)(r.z),Object(r.Ob)(Zv,8),Object(r.Ob)(Jv,8))},token:t,providedIn:"any"}),t})(),em=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),nm=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[tm],imports:[em]}),t})();var rm=n("DH7j"),im=n("XoHu");function om(t,e){return new wt.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(jt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const sm=new r.q("NgValueAccessor"),am={provide:sm,useExisting:Object(r.T)(()=>um),multi:!0};let um=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",(function(t){return e.onChange(t.target.checked)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([am])]}),t})();const cm={provide:sm,useExisting:Object(r.T)(()=>hm),multi:!0},lm=new r.q("CompositionEventMode");let hm=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(lm,8))},t.\u0275dir=r.Db({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Rb("input",(function(t){return e._handleInput(t.target.value)}))("blur",(function(){return e.onTouched()}))("compositionstart",(function(){return e._compositionStart()}))("compositionend",(function(t){return e._compositionEnd(t.target.value)}))},features:[r.xb([cm])]}),t})(),fm=(()=>{class t{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t}),t})(),dm=(()=>{class t extends fm{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return pm(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const pm=r.Mb(dm);function gm(){throw new Error("unimplemented")}class ym extends fm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null,this._rawValidators=[],this._rawAsyncValidators=[]}get validator(){return gm()}get asyncValidator(){return gm()}}class vm{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let mm=(()=>{class t extends vm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(ym,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})(),bm=(()=>{class t extends vm{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(dm,2))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Ab("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.vb]}),t})();function _m(t){return null==t||0===t.length}function wm(t){return null!=t&&"number"==typeof t.length}const Om=new r.q("NgValidators"),Em=new r.q("NgAsyncValidators"),Cm=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Sm{static min(t){return e=>{if(_m(e.value)||_m(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(_m(e.value)||_m(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return _m(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return _m(t.value)||Cm.test(t.value)?null:{email:!0}}static minLength(t){return e=>_m(e.value)||!wm(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>wm(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return Sm.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(_m(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(Tm);return 0==e.length?null:function(t){return xm(jm(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(Tm);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(rm.a)(e))return om(e,null);if(Object(im.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return om(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return om(t=1===t.length&&Object(rm.a)(t[0])?t[0]:t,null).pipe(Object(Ct.a)(t=>e(...t)))}return om(t,null)}(jm(t,e).map(Im)).pipe(Object(Ct.a)(xm))}}}function Tm(t){return null!=t}function Im(t){const e=Object(r.qb)(t)?Object(jt.a)(t):t;if(!Object(r.pb)(e))throw new Error("Expected validator to return Promise or Observable.");return e}function xm(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function jm(t,e){return e.map(e=>e(t))}function Am(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}const Nm={provide:sm,useExisting:Object(r.T)(()=>km),multi:!0};let km=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Nm])]}),t})();const Pm={provide:sm,useExisting:Object(r.T)(()=>Dm),multi:!0};let Rm=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Dm=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(ym),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)}_throwNameError(){throw new Error('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l),r.Ib(Rm),r.Ib(r.r))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",(function(){return e.onChange()}))("blur",(function(){return e.onTouched()}))},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.xb([Pm])]}),t})();const Lm={provide:sm,useExisting:Object(r.T)(()=>Mm),multi:!0};let Mm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",(function(t){return e.onChange(t.target.value)}))("input",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},features:[r.xb([Lm])]}),t})();const Fm='\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',Um='\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });';class Vm{static controlParentException(){throw new Error("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Fm)}static ngModelGroupException(){throw new Error(`formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        ${Um}\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        \n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>`)}static missingFormException(){throw new Error("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+Fm)}static groupParentException(){throw new Error("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+Um)}static arrayParentException(){throw new Error('formArrayName must be used with a parent formGroup directive.  You\'ll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        \n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; index as i">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });')}static disabledAttrWarning(){console.warn("\n      It looks like you're using the disabled attribute with a reactive form directive. If you set disabled to true\n      when you set up this control in your component class, the disabled attribute will actually be set in the DOM for\n      you. We recommend using this approach to avoid 'changed after checked' errors.\n\n      Example:\n      form = new FormGroup({\n        first: new FormControl({value: 'Nancy', disabled: true}, Validators.required),\n        last: new FormControl('Drew', Validators.required)\n      });\n    ")}static ngModelWarning(t){console.warn(`\n    It looks like you're using ngModel on the same form field as ${t}.\n    Support for using the ngModel input property and ngModelChange event with\n    reactive form directives has been deprecated in Angular v6 and will be removed\n    in a future version of Angular.\n\n    For more information on this, see our API docs here:\n    https://angular.io/api/forms/${"formControl"===t?"FormControlDirective":"FormControlName"}#use-with-ngmodel\n    `)}}const qm={provide:sm,useExisting:Object(r.T)(()=>Hm),multi:!0};let Hm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Rb("change",(function(t){return e.onChange(t.target.value)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.xb([qm])]}),t})();const Bm={provide:sm,useExisting:Object(r.T)(()=>zm),multi:!0};let zm=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){if("function"!=typeof t)throw new Error("compareWith must be a function, but received "+JSON.stringify(t));this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(r.D),r.Ib(r.l))},t.\u0275dir=r.Db({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Rb("change",(function(t){return e.onChange(t.target)}))("blur",(function(){return e.onTouched()}))},inputs:{compareWith:"compareWith"},features:[r.xb([Bm])]}),t})();function Gm(t,e){return[...e.path,t]}function Wm(t,e){t||Ym(e,"Cannot find control with"),e.valueAccessor||Ym(e,"No value accessor for form control with"),t.validator=Sm.compose([t.validator,e.validator]),t.asyncValidator=Sm.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&Qm(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&Qm(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)}),e._rawValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())}),e._rawAsyncValidators.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(()=>t.updateValueAndValidity())})}function Qm(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Km(t,e){null==t&&Ym(e,"Cannot find control with"),t.validator=Sm.compose([t.validator,e.validator]),t.asyncValidator=Sm.composeAsync([t.asyncValidator,e.asyncValidator])}function $m(t){return Ym(t,"There is no FormControl instance attached to form control element with")}function Ym(t,e){let n;throw n=t.path.length>1?`path: '${t.path.join(" -> ")}'`:t.path[0]?`name: '${t.path}'`:"unspecified name attribute",new Error(`${e} ${n}`)}function Xm(t){return null!=t?Sm.compose(Am(t)):null}function Zm(t){return null!=t?Sm.composeAsync(Am(t)):null}const Jm=[um,Mm,km,Hm,zm,Dm];function tb(t){const e=nb(t)?t.validators:t;return Array.isArray(e)?Xm(e):e||null}function eb(t,e){const n=nb(e)?e.asyncValidators:t;return Array.isArray(n)?Zm(n):n||null}function nb(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class rb{constructor(t,e){this.validator=t,this.asyncValidator=e,this._onCollectionChange=()=>{},this.pristine=!0,this.touched=!1,this._onDisabledChange=[]}get parent(){return this._parent}get valid(){return"VALID"===this.status}get invalid(){return"INVALID"===this.status}get pending(){return"PENDING"==this.status}get disabled(){return"DISABLED"===this.status}get enabled(){return"DISABLED"!==this.status}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this.validator=tb(t)}setAsyncValidators(t){this.asyncValidator=eb(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status="PENDING",!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="DISABLED",this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status="VALID",this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),"VALID"!==this.status&&"PENDING"!==this.status||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?"DISABLED":"VALID"}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status="PENDING";const e=Im(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>this.setErrors(e,{emitEvent:t}))}}_cancelExistingSubscription(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof ob?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof sb&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?"DISABLED":this.errors?"INVALID":this._anyControlsHaveStatus("PENDING")?"PENDING":this._anyControlsHaveStatus("INVALID")?"INVALID":"VALID"}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nb(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&this._parent&&this._parent.dirty&&!this._parent._anyControlsDirty()}}class ib extends rb{constructor(t=null,e,n){super(tb(e),eb(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class ob extends rb{constructor(t,e,n){super(tb(e),eb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof ib?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class sb extends rb{constructor(t,e,n){super(tb(e),eb(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof ib?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let ab=(()=>{class t extends dm{ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return Gm(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Xm(this._validators)}get asyncValidator(){return Zm(this._asyncValidators)}_checkParentType(){}}return t.\u0275fac=function(e){return ub(e||t)},t.\u0275dir=r.Db({type:t,features:[r.vb]}),t})();const ub=r.Mb(ab);let cb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Db({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const lb=new r.q("NgModelWithFormControlWarning"),hb={provide:dm,useExisting:Object(r.T)(()=>fb)};let fb=(()=>{class t extends dm{constructor(t,e){super(),this._validators=t,this._asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.n}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations())}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Wm(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){!function(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);Km(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);Km(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){e.valueAccessor.registerOnChange(()=>$m(e)),e.valueAccessor.registerOnTouched(()=>$m(e)),e._rawValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),e._rawAsyncValidators.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(null)}),t&&t._clearChangeFns()}(t.control,t),e&&Wm(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{}),this._oldForm=this.form}_updateValidators(){const t=Xm(this._validators);this.form.validator=Sm.compose([this.form.validator,t]);const e=Zm(this._asyncValidators);this.form.asyncValidator=Sm.composeAsync([this.form.asyncValidator,e])}_checkFormPresent(){this.form||Vm.missingFormException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(Om,10),r.Ib(Em,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Rb("submit",(function(t){return e.onSubmit(t)}))("reset",(function(){return e.onReset()}))},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.xb([hb]),r.vb,r.wb]}),t})();const db={provide:dm,useExisting:Object(r.T)(()=>pb)};let pb=(()=>{class t extends ab{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}_checkParentType(){vb(this._parent)&&Vm.groupParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(dm,13),r.Ib(Om,10),r.Ib(Em,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formGroupName",""]],inputs:{name:["formGroupName","name"]},features:[r.xb([db]),r.vb]}),t})();const gb={provide:dm,useExisting:Object(r.T)(()=>yb)};let yb=(()=>{class t extends dm{constructor(t,e,n){super(),this._parent=t,this._validators=e,this._asyncValidators=n}ngOnInit(){this._checkParentType(),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return Gm(null==this.name?this.name:this.name.toString(),this._parent)}get validator(){return Xm(this._validators)}get asyncValidator(){return Zm(this._asyncValidators)}_checkParentType(){vb(this._parent)&&Vm.arrayParentException()}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(dm,13),r.Ib(Om,10),r.Ib(Em,10))},t.\u0275dir=r.Db({type:t,selectors:[["","formArrayName",""]],inputs:{name:["formArrayName","name"]},features:[r.xb([gb]),r.vb]}),t})();function vb(t){return!(t instanceof pb||t instanceof fb||t instanceof yb)}const mb={provide:ym,useExisting:Object(r.T)(()=>bb)};let bb=(()=>{class t extends ym{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._rawValidators=e||[],this._rawAsyncValidators=n||[],this.valueAccessor=function(t,e){if(!e)return null;Array.isArray(e)||Ym(t,"Value accessor was not provided as an array for form control with");let n=void 0,r=void 0,i=void 0;return e.forEach(e=>{var o;e.constructor===hm?n=e:(o=e,Jm.some(t=>o.constructor===t)?(r&&Ym(t,"More than one built-in value accessor matches form control with"),r=e):(i&&Ym(t,"More than one custom value accessor matches form control with"),i=e))}),i||r||n||(Ym(t,"No valid value accessor for form control with"),null)}(this,i)}set isDisabled(t){Vm.disabledAttrWarning()}ngOnChanges(e){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(e,this.viewModel)&&(function(t,e,n,i){Object(r.U)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(Vm.ngModelWarning("formControlName"),e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}(0,t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Gm(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}get validator(){return Xm(this._rawValidators)}get asyncValidator(){return Zm(this._rawAsyncValidators)}_checkParentType(){!(this._parent instanceof pb)&&this._parent instanceof ab?Vm.ngModelGroupException():this._parent instanceof pb||this._parent instanceof fb||this._parent instanceof yb||Vm.controlParentException()}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(dm,13),r.Ib(Om,10),r.Ib(Em,10),r.Ib(sm,10),r.Ib(lb,8))},t.\u0275dir=r.Db({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.xb([mb]),r.vb,r.wb]}),t._ngModelWarningSentOnce=!1,t})(),_b=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)}}),t})(),wb=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new ob(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new ib(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new sb(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof ib||t instanceof ob||t instanceof sb?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),Ob=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[Rm],imports:[_b]}),t})(),Eb=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:lb,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[wb,Rm],imports:[_b]}),t})();class Cb extends zt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Kt.a;return this._value}next(t){super.next(this._value=t)}}var Sb=n("yCtX");const Tb={};class Ib{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new xb(t,this.resultSelector))}}class xb extends Tt.a{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Tb),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++){const e=t[n];this.add(Object(xt.a)(this,e,e,n))}}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n,r,i){const o=this.values,s=this.toRespond?o[n]===Tb?--this.toRespond:this.toRespond:0;o[n]=e,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}function jb(t){return new wt.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(jt.a)(n):Object(ie.b)()).subscribe(e)})}function Ab(t){return function(e){return 0===t?Object(ie.b)():e.lift(new Nb(t))}}class Nb{constructor(t){if(this.total=t,this.total<0)throw new re}call(t,e){return e.subscribe(new kb(t,this.total))}}class kb extends Pt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function Pb(t){return function(e){const n=new Rb(t),r=e.lift(n);return n.caught=r}}class Rb{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Db(t,this.selector,this.caught))}}class Db extends Tt.a{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new It.a(this,void 0,void 0);this.add(r);const i=Object(xt.a)(this,n,void 0,void 0,r);i!==r&&this.add(i)}}}var Lb=n("5+tZ"),Mb=n("vkgz");class Fb{constructor(t,e,n){this.predicate=t,this.thisArg=e,this.source=n}call(t,e){return e.subscribe(new Ub(t,this.predicate,this.thisArg,this.source))}}class Ub extends Pt.a{constructor(t,e,n,r){super(t),this.predicate=e,this.thisArg=n,this.source=r,this.index=0,this.thisArg=n||this}notifyComplete(t){this.destination.next(t),this.destination.complete()}_next(t){let e=!1;try{e=this.predicate.call(this.thisArg,t,this.index++,this.source)}catch(n){return void this.destination.error(n)}e||this.notifyComplete(!1)}_complete(){this.notifyComplete(!0)}}function Vb(t,e){return Object(Lb.a)(t,e,1)}class qb{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Hb(t,this.callback))}}class Hb extends Pt.a{constructor(t,e){super(t),this.add(new Qt.a(e))}}class Bb{constructor(t,e){this.id=t,this.url=e}}class zb extends Bb{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Gb extends Bb{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Wb extends Bb{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Qb extends Bb{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kb extends Bb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $b extends Bb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yb extends Bb{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xb extends Bb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zb extends Bb{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jb{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class t_{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class e_{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class n_{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class r_{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class i_{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o_{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class s_{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function a_(t){return new s_(t)}function u_(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function c_(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function l_(t,e){const n=Object.keys(t),r=Object.keys(e);if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!h_(t[i],e[i]))return!1;return!0}function h_(t,e){return Array.isArray(t)&&Array.isArray(e)?t.length==e.length&&t.every(t=>e.indexOf(t)>-1):t===e}function f_(t){return Array.prototype.concat.apply([],t)}function d_(t){return t.length>0?t[t.length-1]:null}function p_(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function g_(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(jt.a)(Promise.resolve(t)):Object(Ot.a)(t)}function y_(t,e,n){return n?function(t,e){return l_(t,e)}(t.queryParams,e.queryParams)&&function t(e,n){if(!__(e.segments,n.segments))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r]))return!1}return!0}(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>h_(t[n],e[n]))}(t.queryParams,e.queryParams)&&function t(e,n){return function e(n,r,i){if(n.segments.length>i.length)return!!__(n.segments.slice(0,i.length),i)&&!r.hasChildren();if(n.segments.length===i.length){if(!__(n.segments,i))return!1;for(const e in r.children){if(!n.children[e])return!1;if(!t(n.children[e],r.children[e]))return!1}return!0}{const t=i.slice(0,n.segments.length),o=i.slice(n.segments.length);return!!__(n.segments,t)&&!!n.children.primary&&e(n.children.primary,r,o)}}(e,n,n.segments)}(t.root,e.root)}class v_{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=a_(this.queryParams)),this._queryParamMap}toString(){return C_.serialize(this)}}class m_{constructor(t,e){this.segments=t,this.children=e,this.parent=null,p_(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return S_(this)}}class b_{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=a_(this.parameters)),this._parameterMap}toString(){return N_(this)}}function __(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}function w_(t,e){let n=[];return p_(t.children,(t,r)=>{"primary"===r&&(n=n.concat(e(t,r)))}),p_(t.children,(t,r)=>{"primary"!==r&&(n=n.concat(e(t,r)))}),n}class O_{}class E_{parse(t){const e=new L_(t);return new v_(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){return`${"/"+function t(e,n){if(!e.hasChildren())return S_(e);if(n){const n=e.children.primary?t(e.children.primary,!1):"",r=[];return p_(e.children,(e,n)=>{"primary"!==n&&r.push(`${n}:${t(e,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=w_(e,(n,r)=>"primary"===r?[t(e.children.primary,!1)]:[`${r}:${t(n,!1)}`]);return`${S_(e)}/(${n.join("//")})`}}(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${I_(e)}=${I_(t)}`).join("&"):`${I_(e)}=${I_(n)}`});return e.length?"?"+e.join("&"):""}(t.queryParams)}${"string"==typeof t.fragment?"#"+encodeURI(t.fragment):""}`}}const C_=new E_;function S_(t){return t.segments.map(t=>N_(t)).join("/")}function T_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function I_(t){return T_(t).replace(/%3B/gi,";")}function x_(t){return T_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function j_(t){return decodeURIComponent(t)}function A_(t){return j_(t.replace(/\+/g,"%20"))}function N_(t){return`${x_(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${x_(t)}=${x_(e[t])}`).join("")}`;var e}const k_=/^[^\/()?;=#]+/;function P_(t){const e=t.match(k_);return e?e[0]:""}const R_=/^[^=?&#]+/,D_=/^[^?&#]+/;class L_{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new m_([],{}):new m_([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new m_(t,e)),n}parseSegment(){const t=P_(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new b_(j_(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=P_(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=P_(this.remaining);t&&(n=t,this.capture(n))}t[j_(e)]=j_(n)}parseQueryParam(t){const e=function(t){const e=t.match(R_);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(D_);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=A_(e),i=A_(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=P_(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i="primary");const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new m_([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class M_{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=F_(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=F_(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=U_(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return U_(t,this._root).map(t=>t.value)}}function F_(t,e){if(t===e.value)return e;for(const n of e.children){const e=F_(t,n);if(e)return e}return null}function U_(t,e){if(t===e.value)return[e];for(const n of e.children){const r=U_(t,n);if(r.length)return r.unshift(e),r}return[]}class V_{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function q_(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class H_ extends M_{constructor(t,e){super(t),this.snapshot=e,K_(this,t)}toString(){return this.snapshot.toString()}}function B_(t,e){const n=function(t,e){const n=new W_([],{},{},"",{},"primary",e,null,t.root,-1,{});return new Q_("",new V_(n,[]))}(t,e),r=new Cb([new b_("",{})]),i=new Cb({}),o=new Cb({}),s=new Cb({}),a=new Cb(""),u=new z_(r,i,s,a,o,"primary",e,n.root);return u.snapshot=n.root,new H_(new V_(u,[]),n)}class z_{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Ct.a)(t=>a_(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Ct.a)(t=>a_(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function G_(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class W_{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=a_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=a_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Q_ extends M_{constructor(t,e){super(e),this.url=t,K_(this,e)}toString(){return $_(this._root)}}function K_(t,e){e.value._routerState=t,e.children.forEach(e=>K_(t,e))}function $_(t){const e=t.children.length>0?` { ${t.children.map($_).join(", ")} } `:"";return`${t.value}${e}`}function Y_(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,l_(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),l_(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!l_(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),l_(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function X_(t,e){return l_(t.params,e.params)&&function(t,e){return __(t,e)&&t.every((t,n)=>l_(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||X_(t.parent,e.parent))}function Z_(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function J_(t,e,n,r,i){let o={};return r&&p_(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>""+t):""+t}),new v_(n.root===t?e:function t(e,n,r){const i={};return p_(e.children,(e,o)=>{i[o]=e===n?r:t(e,n,r)}),new m_(e.segments,i)}(n.root,t,e),o,i)}class tw{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Z_(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(t=>"object"==typeof t&&null!=t&&t.outlets);if(r&&r!==d_(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ew{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function nw(t){return"object"==typeof t&&null!=t&&t.outlets?t.outlets.primary:""+t}function rw(t,e,n){if(t||(t=new m_([],{})),0===t.segments.length&&t.hasChildren())return iw(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=nw(n[r]),a=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&a&&"object"==typeof a&&void 0===a.outlets){if(!uw(s,a,e))return o;r+=2}else{if(!uw(s,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new m_(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new m_(t.segments.slice(r.pathIndex),t.children),iw(e,0,i)}return r.match&&0===i.length?new m_(t.segments,{}):r.match&&!t.hasChildren()?ow(t,e,n):r.match?iw(t,0,i):ow(t,e,n)}function iw(t,e,n){if(0===n.length)return new m_(t.segments,{});{const r=function(t){return"object"==typeof t[0]&&null!==t[0]&&t[0].outlets?t[0].outlets:{primary:t}}(n),i={};return p_(r,(n,r)=>{null!==n&&(i[r]=rw(t.children[r],e,n))}),p_(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new m_(t.segments,i)}}function ow(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){if("object"==typeof n[i]&&null!==n[i]&&void 0!==n[i].outlets){const t=sw(n[i].outlets);return new m_(r,t)}if(0===i&&Z_(n[0])){r.push(new b_(t.segments[e].path,n[0])),i++;continue}const o=nw(n[i]),s=i<n.length-1?n[i+1]:null;o&&s&&Z_(s)?(r.push(new b_(o,aw(s))),i+=2):(r.push(new b_(o,{})),i++)}return new m_(r,{})}function sw(t){const e={};return p_(t,(t,n)=>{null!==t&&(e[n]=ow(new m_([],{}),0,t))}),e}function aw(t){const e={};return p_(t,(t,n)=>e[n]=""+t),e}function uw(t,e,n){return t==n.path&&l_(e,n.parameters)}class cw{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Y_(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=q_(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),p_(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet);if(n){const r=q_(t),i=t.value.component?n.children:e;p_(r,(t,e)=>this.deactivateRouteAndItsChildren(t,i)),n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}}activateChildRoutes(t,e,n){const r=q_(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new i_(t.value.snapshot))}),t.children.length&&this.forwardEvent(new n_(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(Y_(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),lw(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function lw(t){Y_(t.value),t.children.forEach(lw)}class hw{constructor(t,e){this.routes=t,this.module=e}}function fw(t){return"function"==typeof t}function dw(t){return t instanceof v_}class pw{constructor(t){this.segmentGroup=t||null}}class gw{constructor(t){this.urlTree=t}}function yw(t){return new wt.a(e=>e.error(new pw(t)))}function vw(t){return new wt.a(e=>e.error(new gw(t)))}function mw(t){return new wt.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class bw{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.x)}apply(){return this.expandSegmentGroup(this.ngModule,this.config,this.urlTree.root,"primary").pipe(Object(Ct.a)(t=>this.createUrlTree(t,this.urlTree.queryParams,this.urlTree.fragment))).pipe(Pb(t=>{if(t instanceof gw)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof pw)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,"primary").pipe(Object(Ct.a)(e=>this.createUrlTree(e,t.queryParams,t.fragment))).pipe(Pb(t=>{if(t instanceof pw)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new m_([],{primary:t}):t;return new v_(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Ct.a)(t=>new m_([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){return function(t,e){if(0===Object.keys(t).length)return Object(Ot.a)({});const n=[],r=[],i={};return p_(t,(t,o)=>{const s=e(o,t).pipe(Object(Ct.a)(t=>i[o]=t));"primary"===o?n.push(s):r.push(s)}),Ot.a.apply(null,n.concat(r)).pipe(Ge(),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?te((e,n)=>t(e,n,r)):ge.a,Ab(1),n?ue(e):he(()=>new Jt))}(),Object(Ct.a)(()=>i))}(n.children,(n,r)=>this.expandSegmentGroup(t,e,r,n))}expandSegment(t,e,n,r,i,o){return Object(Ot.a)(...n).pipe(Object(Ct.a)(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Pb(t=>{if(t instanceof pw)return Object(Ot.a)(null);throw t}))),Ge(),ye(t=>!!t),Pb((t,n)=>{if(t instanceof Jt||"EmptyError"===t.name){if(this.noLeftoversInUrl(e,r,i))return Object(Ot.a)(new m_([],{}));throw new pw(e)}throw t}))}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ew(r)!==o?yw(e):void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):yw(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?vw(i):this.lineralizeSegments(n,i).pipe(Object(Lb.a)(n=>{const i=new m_(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=_w(e,r,i);if(!s)return yw(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?vw(l):this.lineralizeSegments(r,l).pipe(Object(Lb.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r){if("**"===n.path)return n.loadChildren?this.configLoader.load(t.injector,n).pipe(Object(Ct.a)(t=>(n._loadedConfig=t,new m_(r,{})))):Object(Ot.a)(new m_(r,{}));const{matched:i,consumedSegments:o,lastChild:s}=_w(e,n,r);if(!i)return yw(e);const a=r.slice(s);return this.getChildConfig(t,n,r).pipe(Object(Lb.a)(t=>{const n=t.module,r=t.routes,{segmentGroup:i,slicedSegments:s}=function(t,e,n,r){return n.length>0&&function(t,e,n){return n.some(n=>Ow(t,e,n)&&"primary"!==Ew(n))}(t,n,r)?{segmentGroup:ww(new m_(e,function(t,e){const n={};n.primary=e;for(const r of t)""===r.path&&"primary"!==Ew(r)&&(n[Ew(r)]=new m_([],{}));return n}(r,new m_(n,t.children)))),slicedSegments:[]}:0===n.length&&function(t,e,n){return n.some(n=>Ow(t,e,n))}(t,n,r)?{segmentGroup:ww(new m_(t.segments,function(t,e,n,r){const i={};for(const o of n)Ow(t,e,o)&&!r[Ew(o)]&&(i[Ew(o)]=new m_([],{}));return Object.assign(Object.assign({},r),i)}(t,n,r,t.children))),slicedSegments:n}:{segmentGroup:t,slicedSegments:n}}(e,o,a,r);return 0===s.length&&i.hasChildren()?this.expandChildren(n,r,i).pipe(Object(Ct.a)(t=>new m_(o,t))):0===r.length&&0===s.length?Object(Ot.a)(new m_(o,{})):this.expandSegment(n,i,r,s,"primary",!0).pipe(Object(Ct.a)(t=>new m_(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(Ot.a)(new hw(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(Ot.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Lb.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Ct.a)(t=>(e._loadedConfig=t,t))):function(t){return new wt.a(e=>e.error(u_(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(Ot.a)(new hw([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;return r&&0!==r.length?Object(jt.a)(r).pipe(Object(Ct.a)(r=>{const i=t.get(r);let o;if(function(t){return t&&fw(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!fw(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return g_(o)})).pipe(Ge(),Object(Mb.a)(t=>{if(!dw(t))return;const e=u_(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),(i=t=>!0===t,t=>t.lift(new Fb(i,void 0,t)))):Object(Ot.a)(!0);var i}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(Ot.a)(n);if(r.numberOfChildren>1||!r.children.primary)return mw(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new v_(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return p_(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return p_(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new m_(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function _w(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}:{matched:!0,consumedSegments:[],lastChild:0,positionalParamSegments:{}};const r=(e.matcher||c_)(n,t,e);return r?{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,positionalParamSegments:r.posParams}:{matched:!1,consumedSegments:[],lastChild:0,positionalParamSegments:{}}}function ww(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new m_(t.segments.concat(e.segments),e.children)}return t}function Ow(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0!==n.redirectTo}function Ew(t){return t.outlet||"primary"}class Cw{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Sw{constructor(t,e){this.component=t,this.route=e}}function Tw(t,e,n){const r=t._root;return function t(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=q_(n);return e.children.forEach(e=>{!function(e,n,r,i,o={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,a=n?n.value:null,u=r?r.getContext(e.value.outlet):null;if(a&&s.routeConfig===a.routeConfig){const c=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!__(t.url,e.url);case"pathParamsOrQueryParamsChange":return!__(t.url,e.url)||!l_(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!X_(t,e)||!l_(t.queryParams,e.queryParams);case"paramsChange":default:return!X_(t,e)}}(a,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Cw(i)):(s.data=a.data,s._resolvedData=a._resolvedData),t(e,n,s.component?u?u.children:null:r,i,o),c&&o.canDeactivateChecks.push(new Sw(u&&u.outlet&&u.outlet.component||null,a))}else a&&xw(n,u,o),o.canActivateChecks.push(new Cw(i)),t(e,null,s.component?u?u.children:null:r,i,o)}(e,s[e.value.outlet],r,i.concat([e.value]),o),delete s[e.value.outlet]}),p_(s,(t,e)=>xw(t,r.getContext(e),o)),o}(r,e?e._root:null,n,[r.value])}function Iw(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function xw(t,e,n){const r=q_(t),i=t.value;p_(r,(t,r)=>{xw(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Sw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}const jw=Symbol("INITIAL_VALUE");function Aw(){return At(t=>function(...t){let e=null,n=null;return Object(Qe.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(rm.a)(t[0])&&(t=t[0]),Object(Sb.a)(t,n).lift(new Ib(e))}(...t.map(t=>t.pipe(oe(1),Ke(jw)))).pipe(Rt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==jw)return t;if(r===jw&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||dw(r))return r}return t},t)},jw),te(t=>t!==jw),Object(Ct.a)(t=>dw(t)?t:!0===t),oe(1)))}function Nw(t,e){return null!==t&&e&&e(new r_(t)),Object(Ot.a)(!0)}function kw(t,e){return null!==t&&e&&e(new e_(t)),Object(Ot.a)(!0)}function Pw(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(Ot.a)(!0);const i=r.map(r=>jb(()=>{const i=Iw(r,e,n);let o;if(function(t){return t&&fw(t.canActivate)}(i))o=g_(i.canActivate(e,t));else{if(!fw(i))throw new Error("Invalid CanActivate guard");o=g_(i(e,t))}return o.pipe(ye())}));return Object(Ot.a)(i).pipe(Aw())}function Rw(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>jb(()=>{const i=e.guards.map(i=>{const o=Iw(i,e.node,n);let s;if(function(t){return t&&fw(t.canActivateChild)}(o))s=g_(o.canActivateChild(r,t));else{if(!fw(o))throw new Error("Invalid CanActivateChild guard");s=g_(o(r,t))}return s.pipe(ye())});return Object(Ot.a)(i).pipe(Aw())}));return Object(Ot.a)(i).pipe(Aw())}class Dw{}class Lw{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){try{const t=Uw(this.urlTree.root,[],[],this.config,this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,"primary"),n=new W_([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},"primary",this.rootComponentType,null,this.urlTree.root,-1,{}),r=new V_(n,e),i=new Q_(this.url,r);return this.inheritParamsAndData(i._root),Object(Ot.a)(i)}catch(fy){return new wt.a(e=>e.error(fy))}}inheritParamsAndData(t){const e=t.value,n=G_(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=w_(e,(e,n)=>this.processSegmentGroup(t,e,n));return function(t){const e={};t.forEach(t=>{const n=e[t.value.outlet];if(n){const e=n.url.map(t=>t.toString()).join("/"),r=t.value.url.map(t=>t.toString()).join("/");throw new Error(`Two segments cannot have the same outlet name: '${e}' and '${r}'.`)}e[t.value.outlet]=t.value})}(n),n.sort((t,e)=>"primary"===t.value.outlet?-1:"primary"===e.value.outlet?1:t.value.outlet.localeCompare(e.value.outlet)),n}processSegment(t,e,n,r){for(const i of t)try{return this.processSegmentAgainstRoute(i,e,n,r)}catch(fy){if(!(fy instanceof Dw))throw fy}if(this.noLeftoversInUrl(e,n,r))return[];throw new Dw}noLeftoversInUrl(t,e,n){return 0===e.length&&!t.children[n]}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo)throw new Dw;if((t.outlet||"primary")!==r)throw new Dw;let i,o=[],s=[];if("**"===t.path){const o=n.length>0?d_(n).parameters:{};i=new W_(n,o,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Hw(t),r,t.component,t,Mw(e),Fw(e)+n.length,Bw(t))}else{const a=function(t,e,n){if(""===e.path){if("full"===e.pathMatch&&(t.hasChildren()||n.length>0))throw new Dw;return{consumedSegments:[],lastChild:0,parameters:{}}}const r=(e.matcher||c_)(n,t,e);if(!r)throw new Dw;const i={};p_(r.posParams,(t,e)=>{i[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},i),r.consumed[r.consumed.length-1].parameters):i;return{consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o}}(e,t,n);o=a.consumedSegments,s=n.slice(a.lastChild),i=new W_(o,a.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Hw(t),r,t.component,t,Mw(e),Fw(e)+o.length,Bw(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Uw(e,o,s,a,this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return[new V_(i,t)]}if(0===a.length&&0===c.length)return[new V_(i,[])];const l=this.processSegment(a,u,c,"primary");return[new V_(i,l)]}}function Mw(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Fw(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Uw(t,e,n,r,i){if(n.length>0&&function(t,e,n){return n.some(n=>Vw(t,e,n)&&"primary"!==qw(n))}(t,n,r)){const i=new m_(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&"primary"!==qw(o)){const n=new m_([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[qw(o)]=n}return i}(t,e,r,new m_(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Vw(t,e,n))}(t,n,r)){const o=new m_(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Vw(t,n,a)&&!i[qw(a)]){const n=new m_([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[qw(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new m_(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Vw(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path&&void 0===n.redirectTo}function qw(t){return t.outlet||"primary"}function Hw(t){return t.data||{}}function Bw(t){return t.resolve||{}}function zw(t){return function(e){return e.pipe(At(e=>{const n=t(e);return n?Object(jt.a)(n).pipe(Object(Ct.a)(()=>e)):Object(jt.a)([e])}))}}class Gw{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}let Ww=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Jb(0,"router-outlet")},directives:function(){return[sO]},encapsulation:2}),t})();function Qw(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Kw(r,$w(e,r))}}function Kw(t,e){if(!t)throw new Error(`\n      Invalid configuration of route '${e}': Encountered undefined route.\n      The reason might be an extra comma.\n\n      Example:\n      const routes: Routes = [\n        { path: '', redirectTo: '/dashboard', pathMatch: 'full' },\n        { path: 'dashboard',  component: DashboardComponent },, << two commas\n        { path: 'detail/:id', component: HeroDetailComponent }\n      ];\n    `);if(Array.isArray(t))throw new Error(`Invalid configuration of route '${e}': Array cannot be specified`);if(!t.component&&!t.children&&!t.loadChildren&&t.outlet&&"primary"!==t.outlet)throw new Error(`Invalid configuration of route '${e}': a componentless route without children or loadChildren cannot have a named outlet set`);if(t.redirectTo&&t.children)throw new Error(`Invalid configuration of route '${e}': redirectTo and children cannot be used together`);if(t.redirectTo&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': redirectTo and loadChildren cannot be used together`);if(t.children&&t.loadChildren)throw new Error(`Invalid configuration of route '${e}': children and loadChildren cannot be used together`);if(t.redirectTo&&t.component)throw new Error(`Invalid configuration of route '${e}': redirectTo and component cannot be used together`);if(t.path&&t.matcher)throw new Error(`Invalid configuration of route '${e}': path and matcher cannot be used together`);if(void 0===t.redirectTo&&!t.component&&!t.children&&!t.loadChildren)throw new Error(`Invalid configuration of route '${e}'. One of the following must be provided: component, redirectTo, children or loadChildren`);if(void 0===t.path&&void 0===t.matcher)throw new Error(`Invalid configuration of route '${e}': routes must have either a path or a matcher specified`);if("string"==typeof t.path&&"/"===t.path.charAt(0))throw new Error(`Invalid configuration of route '${e}': path cannot start with a slash`);if(""===t.path&&void 0!==t.redirectTo&&void 0===t.pathMatch)throw new Error(`Invalid configuration of route '{path: "${e}", redirectTo: "${t.redirectTo}"}': please provide 'pathMatch'. The default value of 'pathMatch' is 'prefix', but often the intent is to use 'full'.`);if(void 0!==t.pathMatch&&"full"!==t.pathMatch&&"prefix"!==t.pathMatch)throw new Error(`Invalid configuration of route '${e}': pathMatch can only be set to 'prefix' or 'full'`);t.children&&Qw(t.children,e)}function $w(t,e){return e?t||e.path?t&&!e.path?t+"/":!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Yw(t){const e=t.children&&t.children.map(Yw),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&"primary"!==n.outlet&&(n.component=Ww),n}const Xw=new r.q("ROUTES");class Zw{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){return this.onLoadStartListener&&this.onLoadStartListener(e),this.loadModuleFactory(e.loadChildren).pipe(Object(Ct.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const r=n.create(t);return new hw(f_(r.injector.get(Xw)).map(Yw),r)}))}loadModuleFactory(t){return"string"==typeof t?Object(jt.a)(this.loader.load(t)):g_(t()).pipe(Object(Lb.a)(t=>t instanceof r.v?Object(Ot.a)(t):Object(jt.a)(this.compiler.compileModuleAsync(t))))}}class Jw{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tO,this.attachRef=null}}class tO{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Jw,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class eO{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function nO(t){throw t}function rO(t,e,n){return e.parse("/")}function iO(t,e){return Object(Ot.a)(null)}let oO=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new zt.a,this.errorHandler=nO,this.malformedUriErrorHandler=rO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:iO,afterPreactivation:iO},this.urlHandlingStrategy=new eO,this.routeReuseStrategy=new Gw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="legacy",this.ngModule=o.get(r.x),this.console=o.get(r.X);const c=o.get(r.z);this.isNgZoneEnabled=c instanceof r.z,this.resetConfig(u),this.currentUrlTree=new v_(new m_([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Zw(s,a,t=>this.triggerEvent(new Jb(t)),t=>this.triggerEvent(new t_(t))),this.routerState=B_(this.currentUrlTree,this.rootComponentType),this.transitions=new Cb({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(te(t=>0!==t.id),Object(Ct.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),At(t=>{let n=!1,r=!1;return Object(Ot.a)(t).pipe(Object(Mb.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),At(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(Ot.a)(t).pipe(At(t=>{const n=this.transitions.getValue();return e.next(new zb(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?ie.a:[t]}),At(t=>Promise.resolve(t)),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,function(t){return t.pipe(At(t=>function(t,e,n,r,i){return new bw(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Ct.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e})))))}),Object(Mb.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return function(o){return o.pipe(Object(Lb.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){return new Lw(t,e,n,r,i,o).recognize()}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Ct.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t})))))}}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Mb.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),Object(Mb.a)(t=>{const n=new Kb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new zb(n,this.serializeUrl(r),i,o);e.next(a);const u=B_(r,this.rootComponentType).snapshot;return Object(Ot.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),ie.a}),zw(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Mb.a)(t=>{const e=new $b(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Ct.a)(t=>Object.assign(Object.assign({},t),{guards:Tw(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return function(n){return n.pipe(Object(Lb.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(Ot.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(jt.a)(t).pipe(Object(Lb.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(Ot.a)(!0);const s=o.map(o=>{const s=Iw(o,e,i);let a;if(function(t){return t&&fw(t.canDeactivate)}(s))a=g_(s.canDeactivate(t,e,n,r));else{if(!fw(s))throw new Error("Invalid CanDeactivate guard");a=g_(s(t,e,n,r))}return a.pipe(ye())});return Object(Ot.a)(s).pipe(Aw())}(t.component,t.route,n,e,r)),ye(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Lb.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(jt.a)(e).pipe(Vb(e=>Object(jt.a)([kw(e.route.parent,r),Nw(e.route,r),Rw(t,e.path,n),Pw(t,e.route,n)]).pipe(Ge(),ye(t=>!0!==t,!0))),ye(t=>!0!==t,!0))}(r,o,t,e):Object(Ot.a)(n)),Object(Ct.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))}))}}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Mb.a)(t=>{if(dw(t.guardsResult)){const e=u_(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}}),Object(Mb.a)(t=>{const e=new Yb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),te(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Wb(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),zw(t=>{if(t.guards.canActivateChecks.length)return Object(Ot.a)(t).pipe(Object(Mb.a)(t=>{const e=new Xb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),At(t=>{let n=!1;return Object(Ot.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,function(t){return t.pipe(Object(Lb.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(Ot.a)(t);let o=0;return Object(jt.a)(n).pipe(Vb(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(Ot.a)({});const o={};return Object(jt.a)(i).pipe(Object(Lb.a)(i=>function(t,e,n,r){const i=Iw(t,e,r);return g_(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Mb.a)(t=>{o[i]=t}))),Ab(1),Object(Lb.a)(()=>Object.keys(o).length===i.length?Object(Ot.a)(o):ie.a))}(t._resolve,t,e,r).pipe(Object(Ct.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),G_(t,n).resolve),null)))}(t.route,e,r,i)),Object(Mb.a)(()=>o++),Ab(1),Object(Lb.a)(e=>o===n.length?Object(Ot.a)(t):ie.a))}))}),Object(Mb.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Wb(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Mb.a)(t=>{const e=new Zb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),zw(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Ct.a)(t=>{const e=function(t,e,n){const r=function t(e,n,r){if(r&&e.shouldReuseRoute(n.value,r.value.snapshot)){const i=r.value;i._futureSnapshot=n.value;const o=function(e,n,r){return n.children.map(n=>{for(const i of r.children)if(e.shouldReuseRoute(i.value.snapshot,n.value))return t(e,n,i);return t(e,n)})}(e,n,r);return new V_(i,o)}{const r=e.retrieve(n.value);if(r){const t=r.route;return function t(e,n){if(e.value.routeConfig!==n.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==n.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");n.value._futureSnapshot=e.value;for(let r=0;r<e.children.length;++r)t(e.children[r],n.children[r])}(n,t),t}{const r=new z_(new Cb((i=n.value).url),new Cb(i.params),new Cb(i.queryParams),new Cb(i.fragment),new Cb(i.data),i.outlet,i.component,i),o=n.children.map(n=>t(e,n));return new V_(r,o)}}var i}(t,e._root,n?n._root:void 0);return new H_(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Mb.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Ct.a)(t=>(new cw(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(Mb.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Wb(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new qb(i))),Pb(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=dw(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Wb(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);return this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Qb(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(Da){t.reject(Da)}}var i;return ie.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{let e=this.parseUrl(t.url);const n="popstate"===t.type?"popstate":"hashchange",r=t.state&&t.state.navigationId?t.state:null;setTimeout(()=>{this.scheduleNavigation(e,n,r,{replaceUrl:!0})},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Qw(t),this.config=t.map(Yw),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=null)}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:o,preserveQueryParams:s,queryParamsHandling:a,preserveFragment:u}=e;Object(r.U)()&&s&&console&&console.warn&&console.warn("preserveQueryParams is deprecated, use queryParamsHandling instead.");const c=n||this.routerState.root,l=u?this.currentUrlTree.fragment:o;let h=null;if(a)switch(a){case"merge":h=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}else h=s?this.currentUrlTree.queryParams:i||null;return null!==h&&(h=this.removeEmptyProps(h)),function(t,e,n,r,i){if(0===n.length)return J_(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new tw(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return p_(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new tw(n,e,r)}(n);if(o.toRoot())return J_(e.root,new m_([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new ew(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new ew(t,t===e.root,0)}const r=Z_(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new ew(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?iw(s.segmentGroup,s.index,o.commands):rw(s.segmentGroup,s.index,o.commands);return J_(s.segmentGroup,a,e,r,i)}(c,this.currentUrlTree,t,h,l)}navigateByUrl(t,e={skipLocationChange:!1}){Object(r.U)()&&this.isNgZoneEnabled&&!r.z.isInAngularZone()&&this.console.warn("Navigation triggered outside Angular zone, did you forget to call 'ngZone.run()'?");const n=dw(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(fy){e=this.malformedUriErrorHandler(fy,this.urlSerializer,t)}return e}isActive(t,e){if(dw(t))return y_(this.currentUrlTree,t,e);const n=this.parseUrl(t);return y_(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Gb(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){const o=this.getTransition();if(o&&"imperative"!==e&&"imperative"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"hashchange"==e&&"popstate"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);if(o&&"popstate"==e&&"hashchange"===o.source&&o.rawUrl.toString()===t.toString())return Promise.resolve(!0);let s,a,u;i?(s=i.resolve,a=i.reject,u=i.promise):u=new Promise((t,e)=>{s=t,a=e});const c=++this.navigationId;return this.setTransition({id:c,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:s,reject:a,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.M),r.Ob(O_),r.Ob(tO),r.Ob(O),r.Ob(r.r),r.Ob(r.w),r.Ob(r.i),r.Ob(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),sO=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||"primary",t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new aO(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(tO),r.Ib(r.P),r.Ib(r.j),r.Pb("name"),r.Ib(r.h))},t.\u0275dir=r.Db({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class aO{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===z_?this.route:t===tO?this.childContexts:this.parent.get(t,e)}}class uO{}class cO{preload(t,e){return Object(Ot.a)(null)}}let lO=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Zw(e,n,e=>t.triggerEvent(new Jb(e)),e=>t.triggerEvent(new t_(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(te(t=>t instanceof Gb),Vb(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.x);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(jt.a)(n).pipe(Object(ze.a)(),Object(Ct.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>this.loader.load(t.injector,e).pipe(Object(Lb.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(oO),r.Ob(r.w),r.Ob(r.i),r.Ob(r.r),r.Ob(uO))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})(),hO=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof zb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gb&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof o_&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new o_(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(oO),r.Ob(q),r.Ob(void 0))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();const fO=new r.q("ROUTER_CONFIGURATION"),dO=new r.q("ROUTER_FORROOT_GUARD"),pO=[O,{provide:O_,useClass:E_},{provide:oO,useFactory:function(t,e,n,r,i,o,a,u={},c,l){const h=new oO(null,t,e,n,r,i,o,f_(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),u.errorHandler&&(h.errorHandler=u.errorHandler),u.malformedUriErrorHandler&&(h.malformedUriErrorHandler=u.malformedUriErrorHandler),u.enableTracing){const t=s();h.events.subscribe(e=>{t.logGroup("Router Event: "+e.constructor.name),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return u.onSameUrlNavigation&&(h.onSameUrlNavigation=u.onSameUrlNavigation),u.paramsInheritanceStrategy&&(h.paramsInheritanceStrategy=u.paramsInheritanceStrategy),u.urlUpdateStrategy&&(h.urlUpdateStrategy=u.urlUpdateStrategy),u.relativeLinkResolution&&(h.relativeLinkResolution=u.relativeLinkResolution),h},deps:[O_,tO,O,r.r,r.w,r.i,Xw,fO,[class{},new r.A],[class{},new r.A]]},tO,{provide:z_,useFactory:function(t){return t.routerState.root},deps:[oO]},{provide:r.w,useClass:r.J},lO,cO,class{preload(t,e){return e().pipe(Pb(()=>Object(Ot.a)(null)))}},{provide:fO,useValue:{enableTracing:!1}}];function gO(){return new r.y("Router",oO)}let yO=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[pO,_O(e),{provide:dO,useFactory:bO,deps:[[oO,new r.A,new r.I]]},{provide:fO,useValue:n||{}},{provide:v,useFactory:mO,deps:[u,[new r.p(b),new r.A],fO]},{provide:hO,useFactory:vO,deps:[oO,q,fO]},{provide:uO,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:cO},{provide:r.y,multi:!0,useFactory:gO},[wO,{provide:r.d,multi:!0,useFactory:OO,deps:[wO]},{provide:CO,useFactory:EO,deps:[wO]},{provide:r.b,multi:!0,useExisting:CO}]]}}static forChild(e){return{ngModule:t,providers:[_O(e)]}}}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)(r.Ob(dO,8),r.Ob(oO,8))}}),t})();function vO(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new hO(t,e,n)}function mO(t,e,n={}){return n.useHash?new w(t,e):new _(t,e)}function bO(t){if(t)throw new Error("RouterModule.forRoot() called twice. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function _O(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Xw,multi:!0,useValue:t}]}let wO=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new zt.a}appInitializer(){return this.injector.get(l,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(oO),r=this.injector.get(fO);if(this.isLegacyDisabled(r)||this.isLegacyEnabled(r))t(!0);else if("disabled"===r.initialNavigation)n.setUpLocationChangeListener(),t(!0);else{if("enabled"!==r.initialNavigation)throw new Error(`Invalid initialNavigation options: '${r.initialNavigation}'`);n.hooks.afterPreactivation=()=>this.initNavigation?Object(Ot.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()}return e})}bootstrapListener(t){const e=this.injector.get(fO),n=this.injector.get(lO),i=this.injector.get(hO),o=this.injector.get(oO),s=this.injector.get(r.g);t===s.components[0]&&(this.isLegacyEnabled(e)?o.initialNavigation():this.isLegacyDisabled(e)&&o.setUpLocationChangeListener(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}isLegacyEnabled(t){return"legacy_enabled"===t.initialNavigation||!0===t.initialNavigation||void 0===t.initialNavigation}isLegacyDisabled(t){return"legacy_disabled"===t.initialNavigation||!1===t.initialNavigation}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(r.r))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac}),t})();function OO(t){return t.appInitializer.bind(t)}function EO(t){return t.bootstrapListener.bind(t)}const CO=new r.q("Router Initializer");let SO=(()=>{class t{constructor(t){this.db=t}add_product(t){return this.db.collection("Products").add(t)}getProduct(){return this.db.collection("Products").snapshotChanges()}}return t.\u0275fac=function(e){return new(e||t)(r.Ob(Ny))},t.\u0275prov=r.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),TO=(()=>{class t{constructor(t,e){this.fb=t,this.fireDbService=e,this.productMed=this.fb.group({name:[""],elementName:[""],manufacturer:[""],shop:[""],unitPrice:[""],boxSize:[""]})}ngOnInit(){}get productMedFormControl(){return this.productMed.controls}saveProduct(){console.log(this.productMed.value),alert("form is submitted"),this.fireDbService.add_product(this.productMed.value).then(t=>{console.log(t)}).catch(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(wb),r.Ib(SO))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-addproduct"]],decls:28,vars:1,consts:[[1,"container-fluid","d-flex","justify-content-center"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["type","text","formControlName","name","id","name","placeholder","Medicine Name",1,"form-control"],["for","elementName"],["type","text","formControlName","elementName","id","elementName","placeholder","element used",1,"form-control"],["for","manufacturer"],["type","text","formControlName","manufacturer","id","manufacturer","placeholder","Produced By",1,"form-control"],["for","shop"],["type","text","formControlName","shop","id","shop","placeholder","Name of the shop",1,"form-control"],["for","unitPrice"],["type","text","formControlName","unitPrice","id","unitPrice","placeholder","Price of one unit",1,"form-control"],["for","boxSize"],["type","text","formControlName","boxSize","id","boxSize","placeholder","m file X n",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"form",1),r.Rb("ngSubmit",(function(){return e.saveProduct()})),r.Lb(2,"div",2),r.Lb(3,"label",3),r.ac(4,"Name"),r.Kb(),r.Jb(5,"input",4),r.Kb(),r.Lb(6,"div",2),r.Lb(7,"label",5),r.ac(8,"Element Name"),r.Kb(),r.Jb(9,"input",6),r.Kb(),r.Lb(10,"div",2),r.Lb(11,"label",7),r.ac(12,"Manufacturer Name"),r.Kb(),r.Jb(13,"input",8),r.Kb(),r.Lb(14,"div",2),r.Lb(15,"label",9),r.ac(16,"Shop Name"),r.Kb(),r.Jb(17,"input",10),r.Kb(),r.Lb(18,"div",2),r.Lb(19,"label",11),r.ac(20,"Unit Price"),r.Kb(),r.Jb(21,"input",12),r.Kb(),r.Lb(22,"div",2),r.Lb(23,"label",13),r.ac(24,"Box Size"),r.Kb(),r.Jb(25,"input",14),r.Kb(),r.Lb(26,"button",15),r.ac(27,"Add Product"),r.Kb(),r.Kb(),r.Kb()),2&t&&(r.yb(1),r.Vb("formGroup",e.productMed))},directives:[cb,bm,fb,hm,mm,bb],styles:[""]}),t})();function IO(t,e){if(1&t&&(r.Lb(0,"div",2),r.Lb(1,"div",3),r.Lb(2,"h4",4),r.ac(3),r.Kb(),r.Lb(4,"h5",5),r.ac(5),r.Kb(),r.Jb(6,"img",6),r.Lb(7,"div",7),r.Lb(8,"div",8),r.Lb(9,"strong"),r.ac(10),r.Tb(11,"currency"),r.Kb(),r.Jb(12,"br"),r.ac(13),r.Kb(),r.Lb(14,"div",8),r.ac(15),r.Jb(16,"br"),r.Lb(17,"strong"),r.ac(18),r.Kb(),r.Kb(),r.Lb(19,"div",9),r.Lb(20,"div",10),r.Lb(21,"button",11),r.ac(22,"Add to Cart"),r.Kb(),r.Lb(23,"button",12),r.ac(24,"View Details"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb()),2&t){const t=e.$implicit;r.yb(3),r.bc(t.name),r.yb(2),r.bc(t.elementName),r.yb(5),r.bc(r.Ub(11,6,t.unitPrice,"tk ")),r.yb(3),r.cc(" ",t.boxSize," "),r.yb(2),r.bc(t.manufacturer),r.yb(3),r.cc("Shop: ",t.shop,"")}}let xO=(()=>{class t{constructor(t){this.fireDbService=t}ngOnInit(){this.fireDbService.getProduct().subscribe(t=>{this.Products=t.map(t=>Object.assign({id:t.payload.doc.id},t.payload.doc.data())),console.log(this.Products)},t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Ib(SO))},t.\u0275cmp=r.Cb({type:t,selectors:[["app-products"]],decls:2,vars:1,consts:[[1,"row"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","item-card","card-block","mb-4"],[1,"card-title","text-right","p-2"],[1,"item-card-title","p-2"],["width","100%","src","https://images.unsplash.com/photo-1584308666744-24d5c474f2ae?ixid=MXwxMjA3fDB8MHxzZWFyY2h8M3x8bWVkaWNpbmV8ZW58MHx8MHw%3D&ixlib=rb-1.2.1&w=1000&q=80",1,"bd-placeholder-img","card-img-top","p-2"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-primary","product-btn"],["type","button",1,"btn","btn-sm","btn-outline-secondary","product-btn"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Zb(1,IO,25,9,"div",1),r.Kb()),2&t&&(r.yb(1),r.Vb("ngForOf",e.Products))},directives:[L],pipes:[F],styles:['img[_ngcontent-%COMP%]{height:150px;width:100%}.item-card[_ngcontent-%COMP%]{transition:.5s;cursor:pointer}.item-card-title[_ngcontent-%COMP%]{font-size:15px;transition:1s;cursor:pointer}.card[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:10px 10px 15px rgba(0,0,0,.3)}.card-text[_ngcontent-%COMP%]{height:80px}.card[_ngcontent-%COMP%]:after, .card[_ngcontent-%COMP%]:before{position:absolute;top:0;right:0;bottom:0;left:0;transform:scale3d(0,0,1);transition:transform .3s ease-out 0s;background:hsla(0,0%,100%,.1);content:"";pointer-events:none}.card[_ngcontent-%COMP%]:before{transform-origin:left top}.card[_ngcontent-%COMP%]:after{transform-origin:right bottom}.card[_ngcontent-%COMP%]:focus:after, .card[_ngcontent-%COMP%]:focus:before, .card[_ngcontent-%COMP%]:hover:after, .card[_ngcontent-%COMP%]:hover:before{transform:scaleX(1)}']}),t})();const jO=[{path:"home",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-homepage"]],decls:7,vars:0,consts:[[1,"container-fluid","spaceTop","mt-4"],[1,"row"],[1,"col-md-2"],[1,"col-md-8"]],template:function(t,e){1&t&&(r.Lb(0,"section"),r.Lb(1,"div",0),r.Lb(2,"div",1),r.Jb(3,"div",2),r.Lb(4,"div",3),r.Jb(5,"app-products"),r.Kb(),r.Jb(6,"div",2),r.Kb(),r.Kb(),r.Kb())},directives:[xO],styles:[""]}),t})()},{path:"",redirectTo:"/home",pathMatch:"full"},{path:"addproduct",component:TO}];let AO=(()=>{class t{}return t.\u0275mod=r.Gb({type:t}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},imports:[[yO.forRoot(jO)],yO]}),t})(),NO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-header"]],decls:2,vars:0,template:function(t,e){1&t&&(r.Lb(0,"p"),r.ac(1,"header works!"),r.Kb())},styles:[""]}),t})(),kO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-navbar"]],decls:18,vars:0,consts:[[1,"navbar","navbar-expand-md","navbar-dark","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarsExampleDefault","aria-controls","navbarsExampleDefault","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExampleDefault",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-md-0"],[1,"nav-item"],["href","#",1,"nav-link"]],template:function(t,e){1&t&&(r.Lb(0,"section"),r.Lb(1,"nav",0),r.Lb(2,"div",1),r.Lb(3,"a",2),r.Jb(4,"app-header"),r.Kb(),r.Lb(5,"button",3),r.Jb(6,"span",4),r.Kb(),r.Lb(7,"div",5),r.Lb(8,"ul",6),r.Lb(9,"li",7),r.Lb(10,"a",8),r.ac(11,"Home"),r.Kb(),r.Kb(),r.Lb(12,"li",7),r.Lb(13,"a",8),r.ac(14,"Home"),r.Kb(),r.Kb(),r.Lb(15,"li",7),r.Lb(16,"a",8),r.ac(17,"Home"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb())},directives:[NO],styles:[""]}),t})(),PO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-footer"]],decls:52,vars:0,consts:[[1,"page-footer","font-small","pt-4","mt-5","navbar-dark","bg-dark",2,"color","white","font-size","1em"],[1,"container","text-center","text-md-left"],[1,"row"],[1,"col-md-4","mx-auto"],[1,"font-weight-bold"],[1,"mb-4","mt-0","d-inline-block","mx-auto",2,"width","80px","background-color","#33b5e5"],[1,"list-unstyled"],["href","#!"],["aria-hidden","true",1,"fa","fa-home","mr-3"],[1,"fa","fa-envelope","mr-3"],[1,"fa","fa-phone","mr-3"],[2,"background-color","red","width","50%"],["id","icon",1,"list-unstyled","list-inline","text-center"],[1,"list-inline-item","p-3"],[1,"btn-floating","btn-fb","mx-1"],["aria-hidden","true",1,"fa","fa-facebook","fa-3x"],[1,"btn-floating","btn-tw","mx-1"],[1,"fa","fa-twitter","fa-3x"],[1,"btn-floating","btn-dribbble","mx-1"],["aria-hidden","true",1,"fa","fa-youtube","fa-3x"],[1,"text-center","py-3",2,"background-color","#212121"]],template:function(t,e){1&t&&(r.Lb(0,"footer",0),r.Lb(1,"div",1),r.Lb(2,"div",2),r.Lb(3,"div",3),r.Lb(4,"h5",4),r.ac(5,"fastMed"),r.Kb(),r.Jb(6,"hr",5),r.Lb(7,"p"),r.ac(8,"Wellcome To fastMed......"),r.Jb(9,"br"),r.ac(10," \xa9 2020-2020 Copyright: fastMed "),r.Kb(),r.Kb(),r.Lb(11,"div",3),r.Lb(12,"h5",4),r.ac(13,"USEFUL LINKS"),r.Kb(),r.Jb(14,"hr",5),r.Lb(15,"ul",6),r.Lb(16,"li"),r.Lb(17,"a",7),r.ac(18,"OUR Team"),r.Kb(),r.Kb(),r.Lb(19,"li"),r.Lb(20,"a",7),r.ac(21,"Help"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Lb(22,"div",3),r.Lb(23,"h5",4),r.ac(24,"CONTACT"),r.Kb(),r.Jb(25,"hr",5),r.Lb(26,"ul",6),r.Lb(27,"p"),r.Jb(28,"i",8),r.ac(29," Uttara,Dhaka-1230,Bangladesh"),r.Kb(),r.Lb(30,"p"),r.Jb(31,"i",9),r.ac(32," fastMedinfo@gmail.com"),r.Kb(),r.Lb(33,"p"),r.Jb(34,"i",10),r.ac(35,"+880 153 357 0798"),r.Kb(),r.Lb(36,"p"),r.Jb(37,"i",10),r.ac(38," +880 140 013 7837"),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Kb(),r.Jb(39,"hr",11),r.Lb(40,"ul",12),r.Lb(41,"li",13),r.Lb(42,"a",14),r.Jb(43,"i",15),r.Kb(),r.Kb(),r.Lb(44,"li",13),r.Lb(45,"a",16),r.Jb(46,"i",17),r.Kb(),r.Kb(),r.Lb(47,"li",13),r.Lb(48,"a",18),r.Jb(49,"i",19),r.Kb(),r.Kb(),r.Kb(),r.Lb(50,"div",20),r.ac(51,"All rights reserved \xa9Fahad "),r.Kb(),r.Kb())},styles:["i[_ngcontent-%COMP%]{color:#fff}textarea[_ngcontent-%COMP%]{width:100px}.fa-facebook[_ngcontent-%COMP%]:hover{color:#0d65f1;text-shadow:0 0 10px #1272e0}.fa-twitter[_ngcontent-%COMP%]:hover{color:#00bfff;text-shadow:0 0 10px #00bfff}.fa-youtube[_ngcontent-%COMP%]:hover{color:#c55555;text-shadow:0 0 10px #f15913}"]}),t})(),RO=(()=>{class t{constructor(){this.title="fastMed"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Cb({type:t,selectors:[["app-root"]],decls:6,vars:0,consts:[[1,"card","message","text-center"]],template:function(t,e){1&t&&(r.Lb(0,"div",0),r.Lb(1,"span"),r.ac(2,".....This Website is under construction....."),r.Kb(),r.Kb(),r.Jb(3,"app-navbar"),r.Jb(4,"router-outlet"),r.Jb(5,"app-footer"))},directives:[kO,sO,PO],styles:[".message[_ngcontent-%COMP%]{background-color:#f3f3a5}"]}),t})(),DO=(()=>{class t{}return t.\u0275mod=r.Gb({type:t,bootstrap:[RO]}),t.\u0275inj=r.Fb({factory:function(e){return new(e||t)},providers:[SO],imports:[[mt,AO,bt.a.initializeApp(i),ky,Te,nm,Be,Ob,Eb]]}),t})();Object(r.S)(),yt().bootstrapModule(DO).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}))}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"}},[[0,0]]]);